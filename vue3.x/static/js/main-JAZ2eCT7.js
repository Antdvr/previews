const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/bootstrap-BN-ByZfU.js","static/js/vue-all-MT0lSpLc.js","static/js/storage-all-BvroRra4.js","static/js/antdv-all-DObV7vEi.js","static/js/vendors-all-CU4ey4nT.js","static/js/date-all-CtlRm6R5.js","static/js/ant-design-icons-vue-CWrpCT1c.js","static/js/ant-design-colors-BmHzfDxM.js","static/js/ant-design-icons-svg-DspUpZAK.js","static/js/lodash-all-DyiJAJR2.js","static/js/ant-design-localer-D8sumQG7.js","static/js/antdvr-3x-DhNf1gLD.js","static/js/assets-all-CV7dZIGH.js","static/js/darker-all-BplXSMu0.js","static/js/fetch-all-ei4kQ0Q2.js","static/css/bootstrap-DEg7pdYA.css"])))=>i.map(i=>d[i]);
import{l as e,b as o}from"./ant-design-localer-D8sumQG7.js";import{V as s,J as t,y as a}from"./antdv-all-DObV7vEi.js";import{u as r,d as i,_ as n,U as c,A as d,a as m,g as l,b as u,c as p,e as h,f as y,h as _,i as g,j as b,k as L,l as v,D as f,P as w}from"./bootstrap-BN-ByZfU.js";import{d as E}from"./date-all-CtlRm6R5.js";import{d as R,j,k as P,W as k,a8 as O,a0 as x,a1 as A,c as T,u as C,ac as M,ad as V,ae as D,J as I,af as S}from"./vue-all-MT0lSpLc.js";import{n as q}from"./antdvr-3x-DhNf1gLD.js";import"./temporary-BLJ23lCr.js";import{N as z,C as U}from"./vendors-all-CU4ey4nT.js";const W=R({__name:"App",setup(t){const a=r(),i=j(()=>a.componentSize),n=j(()=>a.language===e.locale?e:o),c=j(()=>({token:{borderRadius:4,colorLink:a.primaryColor,colorLinkHover:a.primaryColor,colorLinkActive:a.primaryColor,colorPrimary:a.primaryColor,colorWarning:a.warningColor,colorSuccess:a.successColor,colorError:a.errorColor,colorInfo:a.infoColor}}));return P(()=>{a.isMacOS?document.body.classList.add("is-mac-os"):document.body.classList.remove("is-mac-os"),a.isMobile?document.body.classList.add("is-mobile"):document.body.classList.remove("is-mobile"),a.isMixMenu?document.body.classList.add("is-mix-menu"):document.body.classList.remove("is-mix-menu"),a.isTopMenu?document.body.classList.add("is-top-menu"):document.body.classList.remove("is-top-menu"),a.isSideMenu?document.body.classList.add("is-side-menu"):document.body.classList.remove("is-side-menu"),a.isRealDark?document.body.classList.add("is-real-dark"):document.body.classList.remove("is-real-dark"),a.isWindowOS?document.body.classList.add("is-window-os"):document.body.classList.remove("is-window-os"),a.themeWeak?document.body.classList.add("is-theme-weak"):document.body.classList.remove("is-theme-weak"),a.keepAlive?document.body.classList.add("is-keep-alive"):document.body.classList.remove("is-keep-alive"),a.multiTab?document.body.classList.add("is-multi-tab"):document.body.classList.remove("is-multi-tab"),s.config({theme:a.themeColor}),E.locale(a.language)}),(e,o)=>{const t=k("RouterView"),a=s;return x(),O(a,{theme:C(c),locale:C(n),componentSize:C(i)},{default:A(()=>[T(t)]),_:1},8,["theme","locale","componentSize"])}}}),B=i.constantRoutes;B.push({path:"/index",name:"index",redirect:"/system/OrganizeManage"},{path:"/auth",redirect:"/auth/Login",component:c,children:[{path:"Login",name:"Login",component:()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.L),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),meta:{title:"系统登录"}}]});const J=M({routes:B,history:d?V(m):D(m),scrollBehavior:(e,o,s)=>{const t=r(),a=t.multiTab,i=t.keepAlive,n=!1!==e.meta.allowCache;return a&&i&&n&&s?s:{top:0,left:0}}}),F={...u(Object.assign({"/src/views/auth/Login.vue":()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.L),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError403.vue":()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.o),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError404.vue":()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.p),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/error/PageError500.vue":()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.q),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/OrganizeManage.vue":()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.O),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/ResourceManage.vue":()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.R),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/RoleManage.vue":()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.s),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"/src/views/system/UserManage.vue":()=>n(()=>import("./bootstrap-BN-ByZfU.js").then(e=>e.t),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))})),...l(Object.assign({"/src/layout/BasicLayout.tsx":b,"/src/layout/BlankLayout.tsx":g,"/src/layout/PageFrame.tsx":_,"/src/layout/PageView.tsx":y,"/src/layout/RouteView.tsx":h,"/src/layout/UserLayout.tsx":p}))};z.configure({showSpinner:!1});const H="/auth/Login",N=["/auth/Login"];J.beforeEach(async(e,o)=>{z.start();const s=L(),a=v(),r=s.token,i=s.logined;if(r){if(e.path===H)return{path:U(e.query.redirect)&&e.query.redirect||"/index"};if(!i)try{await s.loginUserInfo({}),await a.generateRouter({},F);const t=I(a.dynamicRoutes),r=o.query.redirect||e.path,i="string"==typeof r?decodeURIComponent(r):"";for(const e of t)J.addRoute(e);return e.path===i?{...e,replace:!0}:{path:i}}catch{return await new Promise(e=>{t.error({duration:.8,message:"系统通知",description:"获取用户信息失败，请重新登录!",onClose:()=>s.logout().then(e).catch(e)})}),{path:H,query:{redirect:e.fullPath}}}}else{if(!e||!e.name)return{path:H};if(!N.includes(e.path))return await new Promise(e=>{t.error({duration:.8,message:"系统通知",description:"token 已过期, 请重新登录!",onClose:()=>s.logout().then(e).catch(e)})}),{path:H,query:{redirect:e.fullPath}}}}),J.afterEach(e=>{let o="";for(const r of e.matched){const e="/"!==r.path,s="string"==typeof r.meta.title&&r.meta.title.trim();e&&s&&(o=o?o+" - "+s:s)}const s=r(),t=s.themeMode,a=s.toggleDomTitle;(0,s.toggleThemeMode)(t),a(o),z.done()}),t.config({duration:1}),a.config({duration:1}),S(W).use(f).use(q).use(w).use(J).mount("#app");export{J as R};
