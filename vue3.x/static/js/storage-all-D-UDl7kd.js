import{i as t,ag as e,r as n,a as s,ah as o,H as a,ai as c,J as r,M as i,N as u,w as l,n as f,I as p,aj as h,j as d}from"./vue-all-BxN2afKQ.js";let y;const v=t=>y=t,b=Symbol();function g(t){return t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t.toJSON}var S,$;function _(){const t=o(!0),e=t.run(()=>n({}));let s=[],a=[];const c=h({install(t){v(c),c._a=t,t.provide(b,c),t.config.globalProperties.$pinia=c,a.forEach(t=>s.push(t)),a=[]},use(t){return this._a?s.push(t):a.push(t),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return c}($=S||(S={})).direct="direct",$.patchObject="patch object",$.patchFunction="patch function";const j=()=>{};function O(t,e,n,s=j){t.add(e);const o=()=>{t.delete(e)&&s()};return!n&&i()&&u(o),o}function m(t,...e){t.forEach(t=>{t(...e)})}const w=t=>t(),E=Symbol(),I=Symbol();function P(t,e){t instanceof Map&&e instanceof Map?e.forEach((e,n)=>t.set(n,e)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],o=t[n];g(o)&&g(s)&&t.hasOwnProperty(n)&&!a(s)&&!c(s)?t[n]=P(o,s):t[n]=s}return t}const J=Symbol();function N(t){return!g(t)||!Object.prototype.hasOwnProperty.call(t,J)}const{assign:k}=Object;function M(t){return!(!a(t)||!t.effect)}function x(t,e,i={},u,p,h){let d;const y=k({actions:{}},i),b={deep:!0};let g,$,_,J=new Set,x=new Set;const A=u.state.value[t];let F;function C(e){let n;g=$=!1,"function"==typeof e?(e(u.state.value[t]),n={type:S.patchFunction,storeId:t,events:_}):(P(u.state.value[t],e),n={type:S.patchObject,payload:e,storeId:t,events:_});const s=F=Symbol();f().then(()=>{F===s&&(g=!0)}),$=!0,m(J,n,u.state.value[t])}h||A||(u.state.value[t]={}),n({});const H=h?function(){const{state:t}=i,e=t?t():{};this.$patch(t=>{k(t,e)})}:j;const W=(e,n="")=>{if(E in e)return e[I]=n,e;const s=function(){v(u);const n=Array.from(arguments),o=new Set,a=new Set;let c;m(x,{args:n,name:s[I],store:z,after:function(t){o.add(t)},onError:function(t){a.add(t)}});try{c=e.apply(this&&this.$id===t?this:z,n)}catch(r){throw m(a,r),r}return c instanceof Promise?c.then(t=>(m(o,t),t)).catch(t=>(m(a,t),Promise.reject(t))):(m(o,c),c)};return s[E]=!0,s[I]=n,s},q={_p:u,$id:t,$onAction:O.bind(null,x),$patch:C,$reset:H,$subscribe(e,n={}){const s=O(J,e,n.detached,()=>o()),o=d.run(()=>l(()=>u.state.value[t],s=>{("sync"===n.flush?$:g)&&e({storeId:t,type:S.direct,events:_},s)},k({},b,n)));return s},$dispose:function(){d.stop(),J.clear(),x.clear(),u._s.delete(t)}},z=s(q);u._s.set(t,z);const B=(u._a&&u._a.runWithContext||w)(()=>u._e.run(()=>(d=o()).run(()=>e({action:W}))));for(const n in B){const e=B[n];if(a(e)&&!M(e)||c(e))h||(A&&N(e)&&(a(e)?e.value=A[n]:P(e,A[n])),u.state.value[t][n]=e);else if("function"==typeof e){const t=W(e,n);B[n]=t,y.actions[n]=e}}return k(z,B),k(r(z),B),Object.defineProperty(z,"$state",{get:()=>u.state.value[t],set:t=>{C(e=>{k(e,t)})}}),u._p.forEach(t=>{k(z,d.run(()=>t({store:z,app:u._a,pinia:u,options:y})))}),A&&h&&i.hydrate&&i.hydrate(z.$state,A),g=!0,$=!0,z}function A(n,s,o){let a;const c="function"==typeof s;function r(o,r){const i=e();(o=o||(i?t(b,null):null))&&v(o),(o=y)._s.has(n)||(c?x(n,s,a,o):function(t,e,n){const{state:s,actions:o,getters:a}=e,c=n.state.value[t];let r;r=x(t,function(){c||(n.state.value[t]=s?s():{});const e=p(n.state.value[t]);return k(e,o,Object.keys(a||{}).reduce((e,s)=>(e[s]=h(d(()=>{v(n);const e=n._s.get(t);return a[s].call(e,e)})),e),{}))},e,n,0,!0)}(n,a,o));return o._s.get(n)}return a=c?o:s,r.$id=n,r}const F=(t,e)=>{const n=t.storage||sessionStorage,s=t.key||e.$id;if(t.paths){const o=t.paths.reduce((t,n)=>(t[n]=e.$state[n],t),{});n.setItem(s,JSON.stringify(o))}else n.setItem(s,JSON.stringify(e.$state))};var C=({options:t,store:e})=>{var n,s,o,a;if(null==(n=t.persist)?void 0:n.enabled){const n=[{key:e.$id,storage:sessionStorage}],c=(null==(o=null==(s=t.persist)?void 0:s.strategies)?void 0:o.length)?null==(a=t.persist)?void 0:a.strategies:n;c.forEach(t=>{const n=t.storage||sessionStorage,s=t.key||e.$id,o=n.getItem(s);o&&(e.$patch(JSON.parse(o)),F(t,e))}),e.$subscribe(()=>{c.forEach(t=>{F(t,e)})})}};export{_ as c,A as d,C as i};
