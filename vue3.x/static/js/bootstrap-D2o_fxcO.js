import{a as e,r as a,j as t,d as l,c as o,X as r,S as n,F as s,E as i,G as d,Q as u,Y as c,b as p,Z as v,w as m,z as g,R as h,I as f,k as y,f as b,o as x,u as _,_ as w,J as k,$ as C,a0 as T,a1 as S,a2 as P,a3 as I,a4 as M,a5 as O,W as A,H as R,a6 as z,v as j,a7 as E,q as N,a8 as F,a9 as V,n as D,B as L,aa as U,ab as q}from"./vue-all-DTco6533.js";import{R as H}from"./main-BajoORXj.js";import{d as $,c as W,i as B}from"./storage-all-D1wj3yb4.js";import{n as Y,o as G,A as K,p as Q,L as X,q as Z,r as J,s as ee,t as ae,S as te,_ as le,v as oe,w as re,x as ne,y as se,z as ie,G as de,M as ue,H as ce,J as pe,K as ve,F as me,j as ge,N as he,B as fe,g as ye,O as be,I as xe,C as _e,Q as we,u as ke,U as Ce}from"./antdv-all-BdsrxCwl.js";import{c as Te,P as Se,G as Pe,t as Ie,a as Me,b as Oe,d as Ae,e as Re,f as ze,g as je,h as Ee,i as Ne,j as Fe,k as Ve,l as De,m as Le}from"./antdvr-3x-D-pJbMb1.js";import{a as Ue,x as qe,b as He,K as $e,N as We,O as Be,T as Ye,V as Ge,X as Ke,P as Qe,Y as Xe,S as Ze,Z as Je,o as ea,p as aa,w as ta,_ as la,u as oa,t as ra}from"./ant-design-icons-vue-OUqVA5yR.js";import{o as na,l as sa,w as ia,x as da,C as ua,F as ca,y as pa}from"./vendors-all-B2Pvedt7.js";import{d as va,l as ma,a as ga,b as ha,c as fa,_ as ya}from"./assets-all-CV7dZIGH.js";import{d as ba,i as xa,f as _a,g as wa,o as ka,a as Ca,c as Ta,q as Sa,b as Pa}from"./date-all-CtlRm6R5.js";import{b as Ia}from"./ant-design-localer-wmpSKvGy.js";import{e as Ma,d as Oa,i as Aa}from"./darker-all-BTk2tCNt.js";import{a as Ra}from"./fetch-all-DZIQhO2a.js";const za={themeColor:{primaryColor:"#f5222d",warningColor:"#faad14",successColor:"#52c41a",errorColor:"#ff4d4f",infoColor:"#1890ff"},themeWeak:!1,themeMode:"light",layoutMode:"side",iconPrefix:"icon-",iconfontUrl:"",contentWidth:"Fluid",componentSize:"middle",domTitle:"Antdv.pro",language:Ia.locale,multiTab:!0,keepAlive:!0,fixedHeader:!0,fixedSidebar:!0,fixedHeaderTab:!0,hideMixHeaderTab:!0},ja=$("app",()=>{const l=e({primaryColor:za.themeColor.primaryColor,warningColor:za.themeColor.warningColor,successColor:za.themeColor.successColor,errorColor:za.themeColor.errorColor,infoColor:za.themeColor.infoColor}),o=a(!1),r=a(!1),n=a(za.domTitle),s=a(za.language),i=a(za.multiTab),d=a(za.keepAlive),u=a(za.themeMode),c=a(za.themeWeak),p=a(za.layoutMode),v=a(za.iconPrefix),m=a(za.iconfontUrl),g=a(za.fixedHeader),h=a(za.fixedSidebar),f=a(za.fixedHeaderTab),y=a(za.hideMixHeaderTab),b=a(za.componentSize),x=a(za.contentWidth),_=t(()=>"Fixed"===x.value),w=t(()=>"Fluid"===x.value),k=t(()=>"mix"===p.value),C=t(()=>"top"===p.value),T=t(()=>"side"===p.value),S=t(()=>"realDark"===u.value),P=t(()=>l.primaryColor),I=t(()=>l.warningColor),M=t(()=>l.successColor),O=t(()=>l.errorColor),A=t(()=>l.infoColor),R=t(()=>{let e="100%",a="100vh",t="100%",l="none",r="100vh",n="none";return C.value&&"Fixed"===x.value&&(e="100%",t="100%",l="1200px"),!k.value||!y.value&&f.value||(a="calc(100vh - 50px)"),k.value&&!y.value&&f.value&&(a="calc(100vh - 90px)"),k.value&&!y.value&&(r="calc(100vh - 90px)"),k.value&&y.value&&(r="calc(100vh - 50px)"),!k.value&&g.value&&f.value&&(a="calc(100vh - 90px)"),k.value||!g.value||f.value||(a="calc(100vh - 50px)"),k.value||g.value||(a="100vh"),k.value||(r="calc(100vh - 90px)"),o.value&&(e="100%",t="100%",l="none",n="none"),{width:e,height:a,minWidth:t,maxWidth:l,minHeight:r,maxHeight:n}}),z=t(()=>/windows/i.test(window.navigator.userAgent)),j=t(()=>/Macintosh/i.test(window.navigator.userAgent));return{isFixed:_,isFluid:w,isMobile:o,domTitle:n,language:s,multiTab:i,keepAlive:d,collapsed:r,themeMode:u,themeWeak:c,isMixMenu:k,isTopMenu:C,isSideMenu:T,isRealDark:S,layoutMode:p,iconPrefix:v,iconfontUrl:m,fixedHeader:g,fixedSidebar:h,fixedHeaderTab:f,hideMixHeaderTab:y,componentSize:b,contentWidth:x,primaryColor:P,warningColor:I,successColor:M,errorColor:O,infoColor:A,themeColor:l,toggleMobile:e=>{o.value=e},toggleDomTitle:e=>{e&&(e=e??n),e?.trim()&&(n.value=e?.trim()),e?.trim()||(n.value=za.domTitle),"undefined"!=typeof document&&(document.title=n.value)},toggleLanguage:e=>{s.value=e},toggleMultiTab:e=>{i.value=e},toggleKeepAlive:e=>{d.value=e},toggleCollapsed:e=>{r.value=e},toggleThemeMode:e=>{const a="realDark"===e,t=Aa();a&&!t&&Ma({brightness:100,contrast:90,sepia:10}),!a&&t&&Oa(),u.value=e??u.value},toggleLayoutMode:e=>{p.value=e},toggleIconPrefix:e=>{v.value=e},toggleIconfontUrl:e=>{m.value=e},toggleFixedHeader:e=>{g.value=e},toggleFixedSidebar:e=>{h.value=e},toggleFixedHeaderTab:e=>{f.value=e},toggleHideMixHeaderTab:e=>{y.value=e},toggleComponentSize:e=>{b.value=e},toggleContentWidth:e=>{x.value=e},togglePrimaryColor:e=>{l.primaryColor=e},toggleWarningColor:e=>{l.warningColor=e},toggleSuccessColor:e=>{l.successColor=e},toggleErrorColor:e=>{l.errorColor=e},toggleInfoColor:e=>{l.infoColor=e},toggleThemeWeak:e=>{c.value=e},layoutViewStyle:R,isWindowOS:z,isMacOS:j}},{persist:{enabled:!0,strategies:[{key:"STORE-APP",storage:localStorage}]}});ba.extend(xa),ba.extend(_a),ba.extend(wa),ba.extend(ka),ba.extend(Ca),ba.extend(Ta),ba.extend(Sa),ba.extend(Pa);const Ea=e=>"TRUE"===e||"True"===e||"true"===e||!0===e,Na=e=>{const a=/^https?:\/\//i,t=/^\/*/,l=/\/+$/;return a.test(e)||(e=(e=e.replace(l,"")).replace(t,"/")),a.test(e)&&(e=e.replace(l,"")),e},Fa=Na("/api"),Va=Na("/previews/vue3.x"),Da=Na("/previews/vue3.x"),La=Ea("true"),Ua=Ea("false"),qa={},Ha=function(e,a,t){let l=Promise.resolve();if(a&&a.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),o=t?.nonce||t?.getAttribute("nonce");l=e(a.map(e=>{if((e=function(e){return"/previews/vue3.x/"+e}(e))in qa)return;qa[e]=!0;const a=e.endsWith(".css"),t=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const l=document.createElement("link");return l.rel=a?"stylesheet":"modulepreload",a||(l.as="script"),l.crossOrigin="",l.href=e,o&&l.setAttribute("nonce",o),document.head.appendChild(l),a?new Promise((a,t)=>{l.addEventListener("load",a),l.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=e,window.dispatchEvent(a),!a.defaultPrevented)throw e}return l.then(a=>{for(const e of a||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})},$a=l({name:"UserLayout",setup:()=>()=>o("div",{class:"user-layout-wrapper",style:"width: 100%; height: 100%"},[o("div",{class:"container",style:"width: 100%; height: 100%; background-size: 100%; background-repeat: no-repeat; position: relative;"},[o(r,null,null)])])}),Wa=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"})),Ba=$("tag",()=>{const e=a(null),t=a([]),l=a([]),o=a(["BasicLayout","RouteView","PageFrame","PageView"]),r=e=>Object.assign({},{fullPath:e.fullPath,path:e.path,meta:e.meta,name:e.name,query:e.query,params:e.params,title:e.meta.title||"未定义",matched:e.matched?.map(e=>({path:e.path,name:e.name,meta:e.meta}))}),s=a=>(a=Array.isArray(a)?a:[a],(a=Array.from(new Set(a))).forEach(a=>{const o=t.value.find(e=>e.fullPath===a.fullPath),n=l.value.find(e=>e.fullPath===a.fullPath);o&&(t.value.splice(t.value.indexOf(o),1),t.value.unshift(o)),o||t.value.unshift(r(a)),n||(e.value=r(a),l.value.push(e.value)),n&&(e.value=n)}),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),i=e=>(e=Array.isArray(e)?e:[e],(e=Array.from(new Set(e))).forEach(e=>{const a=e.meta.componentName,t=ja().keepAlive,l=!1!==e.meta.allowCache;t&&l&&a&&!o.value.includes(a)&&o.value.push(a)}),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),d=e=>(e=Array.isArray(e)?e:[e],(e=Array.from(new Set(e))).forEach(e=>{const a=e.meta.componentName,t=ja().keepAlive,r=!1!==e.meta.allowCache;l.value.some(a=>a.fullPath===e.fullPath)?t&&r&&a&&!o.value.includes(a)&&o.value.push(a):o.value=o.value.filter(a=>a!==e.meta.componentName)}),o.value=Array.from(new Set([...o.value,"BasicLayout","RouteView","PageFrame","PageView"])),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),u=a=>(a=Array.isArray(a)?Array.from(new Set(a)):Array.from(new Set([a])),t.value=t.value.filter(e=>!a.some(a=>e.fullPath===a.fullPath)),l.value=l.value.filter(e=>!a.some(a=>e.fullPath===a.fullPath)),e.value&&t.value.includes(e.value)||(e.value=t.value[0]||null),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),c=e=>(e=Array.isArray(e)?Array.from(new Set(e)):Array.from(new Set([e])),o.value=o.value.filter(a=>!e.some(e=>a===e.meta.componentName)),o.value=Array.from(new Set([...o.value,"BasicLayout","RouteView","PageFrame","PageView"])),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),p=a=>(a=Array.isArray(a)?Array.from(new Set(a)):Array.from(new Set([a])),t.value=t.value.filter(e=>a.some(a=>e.fullPath===a.fullPath)),l.value=l.value.filter(e=>a.some(a=>e.fullPath===a.fullPath)),e.value&&t.value.includes(e.value)||(e.value=t.value[0]||null),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),v=e=>(e=Array.isArray(e)?Array.from(new Set(e)):Array.from(new Set([e])),o.value=o.value.filter(a=>e.some(e=>a===e.meta.componentName)),o.value=Array.from(new Set([...o.value,"BasicLayout","RouteView","PageFrame","PageView"])),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),m=()=>(t.value=[],l.value=[],e.value=null,{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),g=()=>(o.value=["BasicLayout","RouteView","PageFrame","PageView"],{stackTags:n(t),visitTags:n(l),cacheTags:n(o)});return{stackTags:t,visitTags:l,cacheTags:o,currentTag:e,addTags:e=>(s(e),i(e),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),addVisitTags:s,addCacheTags:i,updateVisitTags:e=>(e=Array.isArray(e)?e:[e],(e=Array.from(new Set(e))).forEach(e=>{for(const a of t.value)if(a.fullPath===e.fullPath){Object.assign(a,r(e));break}for(const a of l.value)if(a.fullPath===e.fullPath){Object.assign(a,r(e));break}}),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),updateCacheTags:d,delTags:e=>(u(e),c(e),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),delVisitTags:u,delCacheTags:c,delOtherTags:e=>(p(e),v(e),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),delOtherVisitTags:p,delOtherCacheTags:v,delAllTags:()=>(m(),g(),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)}),delAllVisitTags:m,delAllCacheTags:g,delCurrentTag:()=>(e.value&&(u(e.value),c(e.value),d(e.value)),{stackTags:n(t),visitTags:n(l),cacheTags:n(o)})}},{persist:{enabled:!0,strategies:[{storage:sessionStorage,key:"STORE-STACK-TAGS",paths:["stackTags"]},{storage:sessionStorage,key:"STORE-VISIT-TAGS",paths:["visitTags"]}]}}),Ya=[{name:"极客蓝",color:"#4557ff"},{name:"拂晓蓝",color:"#1890ff"},{name:"薄暮",color:"#f5222d"},{name:"火山",color:"#fa541c"},{name:"日暮",color:"#faad14"},{name:"明青",color:"#13c2c2"},{name:"极光绿",color:"#52c41a"},{name:"酱紫",color:"#722ed1"}],Ga=l({name:"LayoutSettingDrawer",setup(){const e=a(!1),t=ja(),l=e=>o("div",e,[o("h3",{class:"setting-title"},[d("布局风格")]),o("div",{class:"setting-checbox"},[o(K,{title:"侧边菜单导航"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>t.toggleLayoutMode("side")},[o("div",{class:"setting-icon bg-light sidemenu-dark topmenu-light"},null),o("div",{class:"setting-check"},[t.isSideMenu?o(Ue,null,null):null])])]}),o(K,{title:"顶部菜单导航"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>t.toggleLayoutMode("top")},[o("div",{class:"setting-icon bg-light topmenu-dark"},null),o("div",{class:"setting-check"},[t.isTopMenu?o(Ue,null,null):null])])]}),o(K,{title:"混合菜单导航"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>t.toggleLayoutMode("mix")},[o("div",{class:"setting-icon bg-light sidemenu-dark topmenu-dark"},null),o("div",{class:"setting-check"},[t.isMixMenu?o(Ue,null,null):null])])]})])]),r=e=>o("div",e,[o("h3",{class:"setting-title"},[d("组件风格")]),o("div",{class:"setting-components"},[o("span",{class:"setting-component",onClick:()=>t.toggleComponentSize("small")},[o(Q,{class:"setting-components-tag",color:"small"===t.componentSize?"var(--ant-primary-color)":"#e3e3e3"},{default:()=>[o("span",{class:"setting-components-text"},[d("小")])]})]),o("span",{class:"setting-component",onClick:()=>t.toggleComponentSize("middle")},[o(Q,{class:"setting-components-tag",color:"middle"===t.componentSize?"var(--ant-primary-color)":"#e3e3e3"},{default:()=>[o("span",{class:"setting-components-text"},[d("中")])]})]),o("span",{class:"setting-component",onClick:()=>t.toggleComponentSize("large")},[o(Q,{class:"setting-components-tag",color:"large"===t.componentSize?"var(--ant-primary-color)":"#e3e3e3"},{default:()=>[o("span",{class:"setting-components-text"},[d("大")])]})])])]),n=e=>o("div",e,[o("h3",{class:"setting-title"},[d("主题风格")]),o("div",{class:"setting-checbox"},[o(K,{title:"亮色主题风格"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>t.toggleThemeMode("light")},[o("div",{class:"setting-icon bg-light sidemenu-light topmenu-light"},null),o("div",{class:"setting-check"},["light"===t.themeMode?o(Ue,null,null):null])])]}),o(K,{title:"暗色主题风格"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>t.toggleThemeMode("dark")},[o("div",{class:"setting-icon bg-light sidemenu-dark topmenu-light"},null),o("div",{class:"setting-check"},["dark"===t.themeMode?o(Ue,null,null):null])])]}),o(K,{title:"暗黑主题风格"},{default:()=>[o("div",{class:"setting-checbox-item",onClick:()=>t.toggleThemeMode("realDark")},[o("div",{class:"setting-icon bg-dark"},null),o("div",{class:"setting-check"},["realDark"===t.themeMode?o(Ue,null,null):null])])]})])]),c=e=>o("div",e,[o("h3",{class:"setting-title"},[d("主题颜色")]),o("div",{class:"setting-tags"},[Ya.map(({name:e,color:a})=>o(K,{title:e},{default:()=>[o("div",{class:"setting-tag",onClick:()=>t.togglePrimaryColor(a)},[o(Q,{style:"width: 100%; height: 100%; padding: 0;",color:a},{default:()=>[o("div",{class:"setting-check"},[t.primaryColor===a?o(Ue,null,null):null])]})])]}))])]),p=e=>o("div",e,[o("h3",{class:"setting-title"},[d("导航设置")]),o("div",{class:"setting-navigates"},[o(X,{split:!1,size:"small"},{default:()=>[o(Z,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(te,{size:"small",value:t.contentWidth,onChange:e=>t.toggleContentWidth(e)},{default:()=>[o(ae,{value:"Fixed"},{default:()=>[d("固定")]}),o(ae,{value:"Fluid"},{default:()=>[d("流式")]})]})]},{default:()=>[o(J,{title:"内容区域宽度"},null)]}),o(Z,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(le,{size:"small",checked:t.fixedHeader,onChange:e=>t.toggleFixedHeader(e)},null)]},{default:()=>[o(J,{title:"固定顶部栏导航"},null)]}),o(Z,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(le,{size:"small",checked:t.fixedSidebar,onChange:e=>t.toggleFixedSidebar(e)},null)]},{default:()=>[o(J,{title:"固定侧边栏菜单"},null)]}),o(Z,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(le,{size:"small",checked:t.fixedHeaderTab,onChange:e=>t.toggleFixedHeaderTab(e)},null)]},{default:()=>[o(J,{title:"固定导航栏页签"},null)]}),o(Z,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(le,{size:"small",checked:t.hideMixHeaderTab,onChange:e=>t.toggleHideMixHeaderTab(e)},null)]},{default:()=>[o(J,{title:"隐藏混合导航栏页签"},null)]})]})])]),v=e=>o("div",e,[o("h3",{class:"setting-title"},[d("其他设置")]),o("div",{class:"setting-others"},[o(X,{split:!1,size:"small"},{default:()=>[o(Z,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(le,{size:"small",checked:t.themeWeak,onChange:e=>t.toggleThemeWeak(e)},null)]},{default:()=>[o(J,{title:"色弱模式"},null)]}),o(Z,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(le,{size:"small",checked:t.multiTab,onChange:e=>t.toggleMultiTab(e)},null)]},{default:()=>[o(J,{title:"多页签模式"},null)]}),o(Z,{style:"padding: 4px 3px; margin: 13px 0 10px;",actions:[o(le,{size:"small",checked:t.keepAlive,disabled:!t.multiTab,onChange:e=>t.toggleKeepAlive(e)},null)]},{default:()=>[o(J,{title:"多页签缓存"},null)]})]})])]),m=e=>{const a=console.info;return o("div",u(e,{onClick:()=>a(`{\n  themeColor: {\n    primaryColor: '${t.primaryColor}',\n    warningColor: '${t.warningColor}',\n    successColor: '${t.successColor}',\n    errorColor: '${t.errorColor}',\n    infoColor: '${t.infoColor}'\n  },\n  themeWeak: ${t.themeWeak},\n  themeMode: '${t.themeMode}',\n  layoutMode: '${t.layoutMode}',\n  iconPrefix: '${t.iconPrefix}',\n  iconfontUrl: '${t.iconfontUrl}',\n  contentWidth: '${t.contentWidth}',\n  componentSize: '${t.componentSize}',\n  domTitle: '${za.domTitle}',\n  language: '${t.language}',\n  multiTab: ${t.multiTab},\n  keepAlive: ${t.keepAlive},\n  fixedHeader: ${t.fixedHeader},\n  fixedSidebar: ${t.fixedSidebar},\n  fixedHeaderTab: ${t.fixedHeaderTab},\n  hideMixHeaderTab: ${t.hideMixHeaderTab}\n}`)}),[o(ee,{type:"warning",style:{marginBottom:"5px",fontSize:"14px",cursor:"pointer"},message:o(s,null,[o("span",null,[d("配置栏应用于开发环境中预览、调试")]),o("br",null,null),o("span",null,[d("点击此处 - 可在游览器Console界面中查看目前配置选项")])])},null)])},g=()=>e.value?o(He,{style:"color: #ffffff;"},null):o(qe,{style:"color: #ffffff;"},null);if(!Ua)return()=>o(s,null,[o(Y,{width:"300",open:e.value,closable:!0,forceRender:!0,placement:"right",prefixCls:"layout-setting-drawer",contentWrapperStyle:{display:"block",transform:e.value?"translateX(0)":"translateX(100%)"},headerStyle:{padding:"16px 0",direction:"rtl",border:"none"},rootStyle:{width:e.value?"100%":0},bodyStyle:{padding:"0 0 10px"},onClose:()=>{e.value=!1}},{default:()=>[o("div",{class:"layout-setting-drawer-body-content"},[o(l,{style:"margin-bottom: 22px;"},null),o(G,null,null),o(r,null,null),o(n,{style:"margin: 22px 0 0;"},null),o(c,{style:"margin: 28px 0 20px;"},null),o(G,null,null),o(p,{style:"margin-bottom: 22px;"},null),o(G,null,null),o(v,{style:"margin-bottom: 30px;"},null),o(G,null,null),o(m,null,null)])]}),o(i,{to:".layout-setting-drawer-content-wrapper"},{default:()=>[o("div",{class:"layout-setting-drawer-body-button",onClick:()=>{e.value=!e.value}},[o(g,null,null)])]})])}});const Ka=l({name:"LayoutBreadcrumb",props:{multiTab:na().def(!1),isMixMenu:na().def(!1),hideMixHeaderTab:na().def(!0)},setup(e){const a=c(),l=t(()=>a.matched);return()=>{let a;var t;if(!e.multiTab&&(!e.isMixMenu||!e.hideMixHeaderTab))return o("div",{class:"layout-breadcrumb",style:"height: 38px;"},[o("div",{style:{width:"100%",height:"38px",padding:"9px 0 0 12px",backgroundColor:"#ffffff",boxShadow:"0 1px 1px 0 rgba(0, 0, 0, 0.15)",position:"relative",zIndex:9}},[o(oe,null,(t=a=l.value.map((e,a)=>o(re,null,{default:()=>[0===a&&o($e,null,null),o("span",null,[e.meta.title])]})),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!p(t)?a:{default:()=>[a]}))])])}}});const Qa=l({name:"LayoutMultiTab",props:{multiTab:na().def(!1),isMixMenu:na().def(!1),hideMixHeaderTab:na().def(!0)},setup(e){const t=c(),l=v(),r=Ba(),n=a(t.fullPath),s=e=>r.visitTags.find(a=>e===a||e===a.fullPath),i=e=>{r.delVisitTags(e),r.delCacheTags(e),r.updateCacheTags(e),e.some(e=>n.value===e.fullPath)&&(n.value=r.stackTags.map(e=>e.fullPath)[0]||"/")},u=e=>{const a=s(e),t=r.visitTags.length<=1;a&&t&&se.info("这是最后一个标签了, 无法被关闭"),a&&!t&&i([s(e)])},g={closeThis:u,closeLeft:e=>{const a=r.visitTags.findIndex(a=>a===s(e));a>0&&i(r.visitTags.filter((e,t)=>t<a)),a<=0&&se.info("左侧没有标签")},closeRight:e=>{const a=r.visitTags.length-1,t=r.visitTags.findIndex(a=>a===s(e));t<a&&i(r.visitTags.filter((e,a)=>a>t)),t>=a&&se.info("右侧没有标签")},closeOthers:e=>{const a=r.visitTags.findIndex(a=>a===s(e));i(r.visitTags.filter((e,t)=>t!==a))}};return r.$onAction(({name:e,after:a})=>{if("delCurrentTag"===e){const e=s(n.value);a(()=>i([e]))}}),m(n,e=>e!==t.fullPath&&l.push(s(e))),m(t,e=>(e=>{e={...e,meta:{...e.meta,icon:void 0}},n.value=e.fullPath,r.updateVisitTags(e),r.updateCacheTags(e),r.addVisitTags(e),r.addCacheTags(e)})(e),{immediate:!0}),()=>{let a;const t=e=>o(ue,{onClick:({key:a})=>g[a]?.(e)},{default:()=>[o(ce,{key:"closeThis"},{default:()=>[d("关闭当前标签")]}),o(ce,{key:"closeLeft"},{default:()=>[d("关闭左侧标签")]}),o(ce,{key:"closeRight"},{default:()=>[d("关闭右侧标签")]}),o(ce,{key:"closeOthers"},{default:()=>[d("关闭其他标签")]})]}),l=(e,a)=>o(de,{overlay:t(a),trigger:["contextmenu"]},{default:()=>[o("span",null,[e])]});var s;if(e.multiTab&&(!e.isMixMenu||!e.hideMixHeaderTab))return o("div",{class:"layout-tabs-container"},[o("div",{style:{width:"100%",height:"38px",boxSizing:"border-box",boxShadow:"0 .5px 1px 0 rgba(0, 0, 0, 0.15)",position:"relative",zIndex:9}},[o(ne,{hideAdd:!0,size:"small",type:"editable-card",prefixCls:"layout-tabs",activeKey:n.value,"onUpdate:activeKey":e=>n.value=e,onEdit:(e,a)=>"remove"===a?u(e):null,tabBarStyle:{margin:"0 0",padding:"6.5px 0 5px",background:"#ffffff"}},(s=a=r.visitTags.map(e=>{const a=e.fullPath,t="external"===e.meta.match&&e.query?.title||e.meta.title;return o(ie,{key:e.fullPath,tab:l(t,a),closable:r.visitTags.length>1},null)}),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!p(s)?a:{default:()=>[a]}))])])}}}),Xa=e=>(e.interceptors.request.use(e=>{const a=Ja(),t=e.headers;return a.token&&!t.token&&null!==t.token&&(t.token=`${a.token}`),null===t.token&&delete t.token,e}),e.interceptors.response.use(e=>{const a=e.config,t=e.status,l=a.messager;return t<200||t>300?Promise.reject(e):"blob"===a.responseType||"stream"===a.responseType||"arraybuffer"===a.responseType?e:!l&&["403","401",403,401].includes(e.data?.code)||l&&"0000"!==e.data?.code?Promise.reject(e):e.data}),e.interceptors.response.use(null,e=>{let a=500,t=null,l=!0;const o=Ja().token,r=Ja().logout,n=Promise.reject(e);try{a=e.response?.status||e.status||a,a=e.response?.data?.code||e.data?.code||a,t=e.response?.data?.message||e.data?.message||null,l=!1!==(e.response?.config?.messager??e.config?.messager)}catch{}return e.toString().indexOf("timeout")>-1?(pe.error({duration:1.5,message:"系统消息",description:"请求超时"}),n):403===a||"403"===a?(pe.error({duration:1.5,message:"系统消息",description:t||"暂无权限"}),n):401===a||"401"===a?(pe.error({duration:1.5,message:"系统消息",description:t||(o?"token已过期":"暂无权限")}),o&&r().then(()=>{setTimeout(()=>window.location.reload(),800)}),n):(!0===l&&pe.error({duration:1.5,message:"系统消息",description:t??"系统异常"}),n)}),e),Za=(e=>{const a=Xa(Ra.create(e));return Object.assign(e=>a(e),a)})({baseURL:Fa||"/",timeout:3e4,messager:!0});const Ja=$("user",()=>{const e=a(""),l=a(""),o=a(""),r=a(""),n=a(va),s=a(""),i=a(""),d=a(""),u=a(""),c=a(""),p=a({}),v=a({}),m=t(()=>o.value),g=Ba(),h=a(!1),f=async(a={})=>{e.value="",l.value="",o.value="",s.value="",i.value="",d.value="",u.value="",c.value="",n.value=va,p.value={},v.value={},h.value=!1};return{token:e,userNo:l,userName:o,mobilePhone:r,avatar:n,orgId:s,orgName:i,deptId:d,deptName:u,dataFlag:c,userInfo:p,userRole:v,nickname:m,logined:h,login:async(a={})=>{return g&&g.delAllTags(),h.value&&(h.value=!1),(t=a,Za({url:"/auth/login",method:"post",data:t})).then(a=>{if("0000"!==a.code)return Promise.reject(a);const t=a.result||{},n=t.data;return e.value=t.token,l.value=n?.userNo||"",o.value=n?.userName||"",r.value=n?.mobilePhone||"",s.value=n?.orgId||"",i.value=n?.orgName||"",d.value=n?.deptId||"",u.value=n?.deptName||"",a});var t},logout:async(a={})=>{return g&&g.delAllTags(),e.value?(t=a,Za({url:"/auth/logout",method:"post",data:t})).then(()=>f()).catch(()=>f()):f();var t},loginUserInfo:async(e={})=>{return(a=e,Za({url:"/auth/loginUserInfo",method:"post",data:a})).then(e=>{if("0000"!==e.code)return Promise.reject(new Error(e.message||"获取用户失败!"));const a=e.result;if(p.value=a||p.value,v.value=a.role||v.value,l.value=a.userNo||l.value,o.value=a.userName||o.value,n.value=a.avatar||n.value,s.value=a.orgId||s.value,i.value=a.orgName||i.value,d.value=a.deptId||d.value,u.value=a.deptName||u.value,c.value=a.dataFlag||c.value,v.value&&v.value.permissions){for(const e of v.value.permissions)e.actionEntitySet&&(e.actionList=e.actionEntitySet.map(e=>e.action));v.value.permissionList=v.value.permissions.map(e=>e.permissionId)}return h.value=!0,e});var a}}},{persist:{enabled:!0,strategies:[{storage:localStorage,key:"STORE-TOKEN",paths:["token"]},{storage:localStorage,key:"STORE-ORG-ID",paths:["orgId"]},{storage:localStorage,key:"STORE-USER-NO",paths:["userNo"]}]}}),et=l({name:"LayoutAvatar",props:{isTopMenu:na().def(!1),isSideMenu:na().def(!1),themeMode:sa().def("light")},setup(){const l=ja(),r=Ja(),n=g(r,"nickname"),i=g(r,"avatar"),u=a(!1),c=t(()=>"light"!==l.themeMode&&"top"===l.layoutMode&&!l.isMobile||"light"!==l.themeMode&&"mix"===l.layoutMode),p=()=>{const e=()=>{ve.confirm({title:"提示",content:"真的要注销登录吗 ?",onOk:()=>{r.logout().then(()=>window.location.replace(Da))}})};return o(s,null,[o(ue,{class:"layout-avatar-dropdown",style:"min-width: 120px"},{default:()=>[o(ce,{key:"1"},{default:()=>[o("a",{href:"javascript:void(0);",onClick:()=>{u.value=!0}},[o(qe,{style:"margin-right: 10px"},null),o("span",null,[d("修改密码")])])]}),o(ce,{key:"2"},{default:()=>[o("a",{href:"javascript:void(0);",onClick:e},[o(We,{style:"margin-right: 10px"},null),o("span",null,[d("退出登录")])])]})]})])},v=()=>{if(!u.value)return o(s,null,null);const a=h("formRef"),t=e({password:"",newPassword:"",confirmPassword:""}),l=e({password:[{required:!0,message:"请输入原密码"}],newPassword:[{required:!0,validator:(e,a)=>""===a?Promise.reject(new Error("请输入新密码")):a===t.password?Promise.reject(new Error("新密码与旧密码一样, 请重新输入")):/[a-z0-9A-Z_]{8,}/.test(a)?Promise.resolve():Promise.reject(new Error("您的密码长度不足8位"))}],confirmPassword:[{required:!0,validator:(e,a)=>""===a?Promise.reject(new Error("请确认新密码")):a!==t.newPassword?Promise.reject(new Error("确认密码与新密码不一样, 请重新输入")):Promise.resolve()}]}),n=async()=>{try{const l={userNo:r.userNo,password:t.password,newPassword:t.newPassword};return await a.value.validate(),await(e=l,Za({url:"/auth/modifyPassword",method:"post",data:e})).then(e=>{if("0000"!==e.code)return Promise.reject(e)}),r.logout().then(()=>{se.success("修改成功，即将返回登录界面"),window.location.reload()})}catch(l){se.error(l.message||"表单校验失败")}var e};return o(ve,{width:420,title:"修改密码",bodyStyle:{padding:"15px 30px 10px 30px"},open:u.value,"onUpdate:open":e=>u.value=e},{default:()=>[o(me,{ref:"formRef",model:t,rules:l,hideRequiredMark:!0},{default:()=>[o(ge,{name:"password",label:"原密码"},{default:()=>[o(he,{value:t.password,"onUpdate:value":e=>t.password=e,placeholder:"请输入原密码"},null)]}),o(ge,{name:"newPassword",label:"新密码",hasFeedback:!0},{default:()=>[o(he,{value:t.newPassword,"onUpdate:value":e=>t.newPassword=e,placeholder:"请输入新密码"},null)]}),o(ge,{name:"confirmPassword",label:"确认密码",hasFeedback:!0},{default:()=>[o(he,{value:t.confirmPassword,"onUpdate:value":e=>t.confirmPassword=e,placeholder:"请确认新密码"},null)]})]})],footer:()=>o(s,null,[o(fe,{key:"back",onClick:()=>{u.value=!1}},{default:()=>[o("span",null,[d("取消")])]}),o(fe,{key:"submit",type:"primary",onClick:()=>{n()}},{default:()=>[o("span",null,[d("提交")])]})])})};return()=>o("div",{class:"layout-avatar-container",style:{height:"100%",padding:"0 16px 0 10px",color:c.value?"inherit":"#ffffff",cursor:"pointer"}},[o(de,{overlay:p()},{default:()=>[o("div",{class:"layout-avatar-wrapper",style:{height:"100%",display:"flex",flexFlow:"row nowrap",alignItems:"center",alignContent:"center"}},[o("div",{class:"layout-avatar-img",style:"width: 30px; height: 30px; flex: 0 0 auto; margin-right: 6px;"},[o("img",{style:"display: block; width: 100%; height: 100%; margin: 0;",src:i.value},null)]),o("span",{class:"layout-avatar-nick",style:{flex:"1 1 auto",maxWidth:"120px",color:c.value?"#f9f9f9":"#303133",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},[n.value])])]}),o(v,null,null)])}}),at=l({name:"LayoutLogo",props:{full:na().def(!1),title:sa().def(""),isMobile:na().def(!1),isSideMenu:na().def(!1),collapsed:na().def(!1),layoutMode:sa().def("side"),themeMode:sa().def("light")},setup(e){const{full:a,title:l,collapsed:r,isSideMenu:n}=f(e),s=t(()=>n.value&&r.value?48:192),i=t(()=>e.isMobile&&"mix"===e.layoutMode?"realDark"===e.themeMode:"light"!==e.themeMode),d=t(()=>n.value&&r.value?u.value:c.value),u=t(()=>i.value?ma:ga),c=t(()=>i.value?ha:fa),p=()=>o("div",{class:"layout-logo-content",style:{flex:"0 0 auto",justifyContent:"center",alignItems:"center",display:"flex",width:a.value||!l.value?"100%":"48px",height:a.value||!l.value?"100%":"48px",textAlign:"center",overflow:"hidden",padding:"0 0",margin:"0 0"}},[o("img",{src:a.value||!l.value?d.value:u.value,style:"width: 100%; height: 100%; display: block"},null)]),v=()=>{if(n.value&&r.value)return null;const e={flex:"1 1 auto",margin:"0 0",height:"48px",fontSize:"18px",lineHeight:"48px",color:i.value?"#ffffff":"var(--ant-primary-color)"};return o("h1",{style:e},[l.value])};return()=>o("div",{class:"layout-logo-container",style:{display:"flex",width:`${s.value}px`,height:"48px"}},[o(p,null,null),o(v,null,null)])}}),tt=l({name:"BasicLayout",setup(){const e=c(),l=v(),n=ja(),s=Ba(),i=a(!0),d=a(192),p=a(48),g=a(48),f=h("refLayoutHeader"),k=new window.IntersectionObserver(e=>{e[0].intersectionRatio<=.5&&E()}),C=t(()=>({overflow:n.isMixMenu&&(n.hideMixHeaderTab||!n.fixedHeaderTab)||!n.isMixMenu&&n.fixedHeader&&!n.fixedHeaderTab?"auto":"visible"})),T=t(()=>{const e=l.getRoutes(),a=e.find(e=>"/"===e.path)?.children||[];return Te(a)}),S=a(!n.collapsed&&!n.isTopMenu||n.isMobile),P=a(e.matched.map(e=>e.path).filter(e=>"/"!==e)),I=a(e.matched.map(e=>e.path).filter(e=>"/"!==e)),M=a(e.matched.map(e=>e.path).filter(e=>"/"!==e&&S.value)),O=(e,a)=>{for(const t of a){if(t.path===e)return[t.path];if(t.children&&t.children.length>0){const a=O(e,t.children);if(a)return[t.path,...a]}}return null},A=(e,a)=>{if(n.toggleMobile(e.isMobile),e.isMobile||n.isSideMenu||n.isMixMenu){const a={margin:"0 0",padding:"0 15px",fontSize:"24px",color:t(()=>!n.isMobile&&"light"!==n.themeMode&&"side"!==n.layoutMode||n.isMobile&&"dark"===n.themeMode&&"mix"===n.layoutMode||"realDark"===n.themeMode).value?"#ffffff":"var(--ant-primary-color)",cursor:"pointer"};return o(Pe,u(e,{iconPrefix:n.iconPrefix,iconfontUrl:n.iconfontUrl}),{default:()=>[o("div",{ref:"refLayoutHeader",style:"display: flex; flex: 1 1 auto; align-items: center; height: 48px; lineHeight: 48px;"},[o("h1",{style:a,onClick:()=>n.toggleCollapsed(!n.collapsed)},[e.collapsed?o(Be,null,null):o(Ye,null,null)])])]})}return a},R=e=>o(et,{isTopMenu:n.isTopMenu,isSideMenu:n.isSideMenu,themeMode:n.themeMode},null),z=e=>o(at,{full:!1,title:za.domTitle,layoutMode:n.layoutMode,collapsed:n.collapsed,themeMode:n.themeMode,isSideMenu:n.isSideMenu,isMobile:n.isMobile},null),j=e=>{if("mix"===e.layout&&!e.isMobile)return o("div",{style:"width: 100%; height: 5px"},null)},E=e=>{n.toggleCollapsed(!0)},N=e=>{n.isMobile&&n.toggleCollapsed(!0)},F=e=>{if(e.length>0){const a=e.pop(),t=_(T),l=I.value[I.value.length-1];P.value=(I.value.includes(a)?O(l,t):O(a,t))||e}};return y(()=>{!n.isMobile&&n.isMixMenu&&n.toggleCollapsed(!1),!n.isMobile&&n.isTopMenu&&n.toggleCollapsed(!0),!n.isMobile&&n.collapsed&&(M.value=[])}),m(e,()=>{S.value=!n.collapsed&&!n.isTopMenu||n.isMobile,P.value=e.matched.map(e=>e.path).filter(e=>"/"!==e),I.value=e.matched.map(e=>e.path).filter(e=>"/"!==e),M.value=e.matched.map(e=>e.path).filter(e=>"/"!==e&&S.value)}),b(()=>{k.disconnect()}),x(()=>{f.value&&k.observe(f.value)}),()=>o(Se,{theme:n.themeMode,layout:n.layoutMode,iconPrefix:n.iconPrefix,iconfontUrl:n.iconfontUrl,fixedHeader:n.fixedHeader,fixSiderbar:n.fixedSidebar,contentWidth:n.contentWidth,primaryColor:n.primaryColor,headerTheme:"realDark"!==n.themeMode?n.themeMode:"dark",menuData:T.value,collapsed:n.collapsed,siderWidth:d.value,splitMenus:i.value,headerHeight:p.value,contentStyle:C.value,collapsedWidth:g.value,selectedKeys:P.value,"onUpdate:selectedKeys":e=>P.value=e,openKeys:M.value,"onUpdate:openKeys":e=>M.value=e,onMenuClick:N,onCollapse:N,onSelect:F},{default:()=>[o("div",{class:"page-router-view-navigate",style:{position:"sticky",left:0}},[o(Qa,{multiTab:n.multiTab,isMixMenu:n.isMixMenu,hideMixHeaderTab:n.hideMixHeaderTab},null),o(Ka,{multiTab:n.multiTab,isMixMenu:n.isMixMenu,hideMixHeaderTab:n.hideMixHeaderTab},null)]),o("div",{class:"page-router-view-container",style:{width:"100%",maxWidth:n.isTopMenu&&n.isFixed?"1200px":"none",height:n.isMixMenu&&!n.hideMixHeaderTab&&n.fixedHeaderTab||!n.isMixMenu&&n.fixedHeader&&n.fixedHeaderTab?"calc(100vh - 89px)":"auto",overflow:n.isMixMenu&&!n.hideMixHeaderTab&&n.fixedHeaderTab||!n.isMixMenu&&n.fixedHeader&&n.fixedHeaderTab?"auto":"visible",position:n.isMixMenu||n.fixedHeader?"absolute":"relative",margin:"0px auto",padding:"0px 0px",zIndex:1,right:0,left:0}},[o(r,null,{default:e=>o(w,{include:n.multiTab&&n.keepAlive?s.cacheTags:[]},[e.Component?o(e.Component,null,null):null])})]),o("div",{class:"page-router-view-settings"},[o(Ga,null,null)])],headerRender:A,menuHeaderRender:z,menuExtraRender:j,rightContentRender:R})}}),lt=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),ot=e=>{let a="";const t=e.path,l={...e.meta},o={...e.query},r={...e.params};if(a=/^\/external\/link(\/.*)?/.test(t)?o.from:l.external,a===o.from&&delete o.from,a){/^file:\/\/\/|^https?:\/\//.test(a)?(a=a.replace(/^([^?]*)\/$/,"$1"),a=a.replace(/^([^?]*)\/(?=\?)/,"$1")):/^\/\/\/.+/.test(a)?(a=a.replace(/^([^?]*)\/$/,"$1"),a=a.replace(/^([^?]*)\/(?=\?)/,"$1"),a="file:"+a):/^\/\/.+/.test(a)?(a=a.replace(/^([^?]*)\/$/,"$1"),a=a.replace(/^([^?]*)\/(?=\?)/,"$1"),a=window.location.protocol+a):/^\/.+/.test(a)?(a=a.replace(/^\//,""),a=a.replace(/^([^?]*)\/$/,"$1"),a=a.replace(/^([^?]*)\/(?=\?)/,"$1"),a=window.location.protocol+"//"+window.location.host+"/"+a):/\w+/.test(a)&&(a=a.replace(/^([^?]*)\/$/,"$1"),a=a.replace(/^([^?]*)\/(?=\?)/,"$1"),a=window.location.protocol+"//"+a);const e=new URL(a),l=e.search,n=e.origin,s=new URLSearchParams(l);let i=e.pathname.replace(/\/+$/,"");if("/external/link"!==t){for(const e in o)void 0!==o[e]&&null!==o[e]&&s.set(e,o[e]);"string"==typeof r.path&&(i=i+"/"+r.path,i.replace(/\/+/,"/"),i.replace(/\/+$/,""))}s.sort(),a=n+i+"?"+s.toString()}return a||""},rt=l({name:"PageFrame",setup(){const e=c(),t=ja(),l=ot(e),r=h("iframe"),n=a(!0);return x(()=>{r.value&&(r.value.onload=()=>{n.value=!1}),setTimeout(()=>{n.value=!1},1e4)}),()=>o("div",{class:"page-frame-container",style:{margin:"0",padding:"0.5px",position:"absolute",boxSizing:"border-box",...t.layoutViewStyle}},[o(ye,{size:"large",tip:"正在加载访问中...",wrapperClassName:"ant-spin-wrapper",spinning:n.value},{default:()=>[o("iframe",{ref:"iframe",width:"100%",height:"100%",scrolling:"yes",frameborder:"0",src:l},null)]})])}}),nt=Object.freeze(Object.defineProperty({__proto__:null,default:rt},Symbol.toStringTag,{value:"Module"})),st={rootRoute:{key:"Basic",name:"Basic",path:"/",redirect:"/index",component:tt,meta:{title:"首页"},children:[]},externalRoute:{key:"ExternalLink",name:"ExternalLink",path:"/external/link/:path(.*)?",component:rt,meta:{title:"外部链接",match:"external",external:"",componentName:"ExternalLink",hideChildInMenu:!0,hideInMenu:!0,allowCache:!0}},notFoundRoutes:[{name:"PageError403",path:"/PageError403",component:()=>Ha(()=>Promise.resolve().then(()=>Pt),void 0)},{name:"PageError404",path:"/PageError404",component:()=>Ha(()=>Promise.resolve().then(()=>Ot),void 0)},{name:"PageError500",path:"/PageError500",component:()=>Ha(()=>Promise.resolve().then(()=>zt),void 0)},{path:"/:catchAll(.*)",redirect:"/PageError404"}],constantRoutes:[]},it=e=>{e.directive("action",{created:async(e,a)=>{const t=a.arg,l=k(Ja().userRole),o=H.currentRoute.value.meta.permission,r=Array.isArray(o)?o:[o];for(const n of l.permissions){if(!r||!r.length)return;if(r.includes(n.permissionId))return void(n.actionList&&n.actionList.includes(t)||e.parentNode&&e.parentNode.removeChild(e)||(e.style.display="none"))}}})},dt=W().use(B),ut=l({name:"BlankLayout",setup:()=>()=>o(r,null,null)}),ct=Object.freeze(Object.defineProperty({__proto__:null,default:ut},Symbol.toStringTag,{value:"Module"})),pt=l({name:"PageView",setup(){const e=Ba(),a=ja(),l=t(()=>{const e=c();return"external"!==((e.meta||{}).match||"path")?e.fullPath:ot(e)});return()=>o("div",{class:"page-view-container",style:{width:"100%",height:"100%",margin:"0",padding:"0.5px",position:"relative",boxSizing:"border-box"}},[o(r,null,{default:t=>o(w,{include:a.multiTab&&a.keepAlive?e.cacheTags:[]},[t.Component?o(t.Component,{key:l.value},null):null])})])}}),vt=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"})),mt=l({name:"RouteView",setup(){const e=Ba(),a=ja(),l=t(()=>{const e=c();return"external"!==((e.meta||{}).match||"path")?e.fullPath:ot(e)});return()=>o("div",{class:"route-view-container"},[o(r,null,{default:t=>o(w,{include:a.multiTab&&a.keepAlive?e.cacheTags:[]},[t.Component?o(t.Component,{key:l.value},null):null])})])}}),gt=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"})),ht=(e,a,t)=>{e.forEach(l=>{if(l.parentId===t.id){const t={...l,children:[]};ht(e,t.children,l),t.children.length<=0&&delete t.children,a.push(t)}}),a.sort((e,a)=>{const t=e.sort===1/0||Number.isFinite(+e.sort)?e.sort:-1,l=a.sort===1/0||Number.isFinite(+a.sort)?a.sort:-1;return t-l<0?-1:t-l>0?1:0})},ft=(e,a={},t={})=>e.map(e=>{const{icon:l,title:o,target:r,allowCache:n,hideInMenu:s,hideChildInMenu:i}=e.meta||{};e.component===pt&&(e.component="PageView"),e.component===rt&&(e.component="PageFrame"),e.component===mt&&(e.component="RouteView");const d=a.meta?.allowCache,u="PageFrame"===e.component,c=["PageView","RouteView"].includes(e.component),p="PageFrame"===e.component?"external":"path",v={id:e.id,name:e.name||"",path:yt(a,e),component:bt(a,e,t),redirect:e.redirect&&e.redirect.trim(),meta:{icon:l,title:o,match:p,target:r??(c?"_none":"RouterLink"),groupId:(a.meta||{}).groupId||e.id,external:u&&e.path||"",componentName:e.component||e.name||"",hideChildInMenu:!0===s||"Y"===s||!0===i||"Y"===i,allowCache:!1!==d&&"N"!==d||!1!==n&&"N"!==n,hideInMenu:!0===s||"Y"===s,permission:e.name&&[e.name]||[]}};return l||delete v.meta.icon,u&&(v.path=v.path.replace(/\/+$/,"")+"/:path(.*)?"),v.redirect||delete v.redirect,v.path.startsWith("http")||(v.path=v.path.replace(/^\/+/,"/")),e.children&&e.children.length>0&&(v.children=ft(e.children,v,t)),!v.meta.hideChildInMenu&&v.children?.every(e=>e.meta&&e.meta.hideInMenu)&&(v.meta.hideChildInMenu=!0),v}),yt=(e={},a={})=>{const t=/\/+$/,l=/^\/*/,o=a.name?.replace(t,"")??"",r=a.path?.replace(/(.+?)\/*$/,"$1")??"",n=e.path?.replace(t,"")??"",s="PageFrame"===a.component;return!s&&/^https?:\/\/.+|^\/.+/i.test(r)?r:s||r?!s&&r?(n+"/"+r).replace(l,"/"):s&&!o?r:s&&o?(n+"/"+o).replace(l,"/"):"":(n+"/"+o).replace(l,"/")},bt=(e={},a={},t={})=>{const l=a.path?.replace(/(.+?)\/*$/,"$1")||"",o=e.path?.replace(/\/+$/,"")||"",r=(l?.startsWith("/")?l:o+"/"+l).replace(/^\/*([^/].*)/,"/$1"),n=Object.assign({"/src/views/auth/Login.vue":()=>Ha(()=>Promise.resolve().then(()=>qt),void 0),"/src/views/error/PageError403.vue":()=>Ha(()=>Promise.resolve().then(()=>Pt),void 0),"/src/views/error/PageError404.vue":()=>Ha(()=>Promise.resolve().then(()=>Ot),void 0),"/src/views/error/PageError500.vue":()=>Ha(()=>Promise.resolve().then(()=>zt),void 0),"/src/views/system/OrganizeManage.vue":()=>Ha(()=>Promise.resolve().then(()=>Rl),void 0),"/src/views/system/ResourceManage.vue":()=>Ha(()=>Promise.resolve().then(()=>Io),void 0),"/src/views/system/RoleManage.vue":()=>Ha(()=>Promise.resolve().then(()=>hr),void 0),"/src/views/system/UserManage.vue":()=>Ha(()=>Promise.resolve().then(()=>Br),void 0),"/src/views/system/components/OrganizeManage/OrganizeDrawer.vue":()=>Ha(()=>Promise.resolve().then(()=>Cl),void 0),"/src/views/system/components/OrganizeManage/OrganizeForm.vue":()=>Ha(()=>Promise.resolve().then(()=>hl),void 0),"/src/views/system/components/OrganizeManage/OrganizeQuery.vue":()=>Ha(()=>Promise.resolve().then(()=>nl),void 0),"/src/views/system/components/OrganizeManage/OrganizeTable.vue":()=>Ha(()=>Promise.resolve().then(()=>vl),void 0),"/src/views/system/components/OrganizeManage/OrganizeTree.vue":()=>Ha(()=>Promise.resolve().then(()=>Kt),void 0),"/src/views/system/components/ResourceManage/ButtonDrawer.vue":()=>Ha(()=>Promise.resolve().then(()=>Xl),void 0),"/src/views/system/components/ResourceManage/ButtonForm.vue":()=>Ha(()=>Promise.resolve().then(()=>Dl),void 0),"/src/views/system/components/ResourceManage/ButtonTable.vue":()=>Ha(()=>Promise.resolve().then(()=>to),void 0),"/src/views/system/components/ResourceManage/MenuDrawer.vue":()=>Ha(()=>Promise.resolve().then(()=>ho),void 0),"/src/views/system/components/ResourceManage/MenuForm.vue":()=>Ha(()=>Promise.resolve().then(()=>ro),void 0),"/src/views/system/components/ResourceManage/MenuTable.vue":()=>Ha(()=>Promise.resolve().then(()=>xo),void 0),"/src/views/system/components/ResourceManage/TreeMenu.vue":()=>Ha(()=>Promise.resolve().then(()=>ko),void 0),"/src/views/system/components/RoleManage/RoleDrawer.vue":()=>Ha(()=>Promise.resolve().then(()=>cr),void 0),"/src/views/system/components/RoleManage/RoleForm.vue":()=>Ha(()=>Promise.resolve().then(()=>nr),void 0),"/src/views/system/components/RoleManage/RoleQuery.vue":()=>Ha(()=>Promise.resolve().then(()=>Do),void 0),"/src/views/system/components/RoleManage/RoleResource.vue":()=>Ha(()=>Promise.resolve().then(()=>Xo),void 0),"/src/views/system/components/RoleManage/RoleTable.vue":()=>Ha(()=>Promise.resolve().then(()=>lr),void 0),"/src/views/system/components/UserManage/UserDrawer.vue":()=>Ha(()=>Promise.resolve().then(()=>Ur),void 0),"/src/views/system/components/UserManage/UserForm.vue":()=>Ha(()=>Promise.resolve().then(()=>Nr),void 0),"/src/views/system/components/UserManage/UserQuery.vue":()=>Ha(()=>Promise.resolve().then(()=>Pr),void 0),"/src/views/system/components/UserManage/UserTable.vue":()=>Ha(()=>Promise.resolve().then(()=>zr),void 0)});if(String(a.component)!==a.component)return a.component;if(t[a.component])return t[a.component];if(t[r])return t[r];return n[`/src/views/${r.replace(/^\/+|\.vue$/gi,"")}.vue`]},xt=(e,a,t=!0)=>(t?Za({url:"/auth/loginUserMenu",method:"post",data:e}):Promise.resolve({code:"0000",message:null,result:[]})).then(e=>{if("0000"!==e.code)return Promise.reject(e);const t=e.result,l=st.rootRoute,o=st.externalRoute,r=st.notFoundRoutes,n=Array.from(l.children);ht(t,n,{id:"0"});const s=[{...l,children:n}],i=ft(s,{},a);return i[0].children?.unshift(o),i.push(...r),i}),_t=e=>{const a={},t=/^.*\/src\/layout\/(([^/]+\/?)+)\.(tsx|vue)$/,l=/^_.*|^\..*/;for(const[o,r]of Object.entries(e)){const e=o.replace(t,"$1");l.test(e)||a[e]||(a[e]=r.default||r)}return a},wt=e=>{const a={},t=/^.*\/src\/views(\/([^/]+\/?)+)\.(tsx|vue)$/,l=/^_.*|^\..*/;for(const[o,r]of Object.entries(e)){const e=o.replace(t,"$1");l.test(e)||a[e]||(a[e]=r)}return a},kt=$("router",()=>{const e=a([]),t=a(st.constantRoutes);return{dynamicRoutes:e,constantRoutes:t,generateRouter:async(a,t,l=!0)=>{e.value=await xt(a,t,l)}}}),Ct={class:"page-container"},Tt=(e,a)=>{const t=e.__vccOpts||e;for(const[l,o]of a)t[l]=o;return t},St=Tt(l({name:"PageError403",__name:"PageError403",setup:e=>(e,a)=>{const t=fe,l=be;return T(),C("div",Ct,[o(l,{title:"403",status:"403",subTitle:"抱歉，您无权访问此页!"},{extra:S(()=>[o(t,{type:"primary",onClick:a[0]||(a[0]=a=>e.$router.push({path:"/index"}))},{default:S(()=>[...a[1]||(a[1]=[d(" 返回首页 ",-1)])]),_:1})]),_:1})])}}),[["__scopeId","data-v-7cfb9f6e"]]),Pt=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})),It={class:"page-container"},Mt=Tt(l({name:"PageError404",__name:"PageError404",setup:e=>(e,a)=>{const t=fe,l=be;return T(),C("div",It,[o(l,{title:"404",status:"404",subTitle:"抱歉，您访问的页面不存在!"},{extra:S(()=>[o(t,{type:"primary",onClick:a[0]||(a[0]=a=>e.$router.push({path:"/index"}))},{default:S(()=>[...a[1]||(a[1]=[d(" 返回首页 ",-1)])]),_:1})]),_:1})])}}),[["__scopeId","data-v-95ca0d39"]]),Ot=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"})),At={class:"page-container"},Rt=Tt(l({name:"PageError500",__name:"PageError500",setup:e=>(e,a)=>{const t=fe,l=be;return T(),C("div",At,[o(l,{title:"500",status:"500",subTitle:"抱歉，服务器反馈异常!"},{extra:S(()=>[o(t,{type:"primary",onClick:a[0]||(a[0]=a=>e.$router.push({path:"/index"}))},{default:S(()=>[...a[1]||(a[1]=[d(" 返回首页 ",-1)])]),_:1})]),_:1})])}}),[["__scopeId","data-v-aa383fdf"]]),zt=Object.freeze(Object.defineProperty({__proto__:null,default:Rt},Symbol.toStringTag,{value:"Module"})),jt={class:"login-container"},Et={class:"main"},Nt={class:"main-container"},Ft={class:"main-content"},Vt={style:{padding:"1px",margin:"5px 0"}},Dt={style:{padding:"1px"}},Lt={style:{padding:"0 5px",overflow:"hidden"}},Ut=Tt(l({name:"Login",__name:"Login",setup(l){const r=a(!1),n=Ja(),s=v(),i=e({username:"",password:"",rememberMe:!0}),u=e({username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]}),c=e({username:t(()=>"error"!==p.validateInfos.username.validateStatus),password:t(()=>"error"!==p.validateInfos.password.validateStatus)}),p=me.useForm(i,u),m=async()=>{try{await p.validate();const e=e=>{pe.success({message:"系统提示",duration:.8,description:"欢迎回来",onClose:()=>{r.value=!1,s.push({path:"/"})}})},a=e=>{e.message&&pe.error({message:"系统提示",duration:.8,description:e.message,onClose:()=>{r.value=!1}}),setTimeout(()=>{r.value=!1},500)};return r.value=!0,n.login({...i,password:ia(i.password)}).then(e).catch(a)}catch{}};return(e,a)=>{const t=xe,l=ge,n=_e,s=fe,u=me;return T(),C("div",jt,[P("div",Et,[P("div",Nt,[a[5]||(a[5]=P("div",{class:"main-header"},[P("div",{class:"title"},[P("img",{src:ya,class:"logo",alt:"logo"}),P("span",null,"系统平台")]),P("div",{class:"description"},[P("span",null,"基于 Antdv.pro v4.x 框架搭建")])],-1)),P("div",Ft,[o(u,null,{default:S(()=>[P("div",Vt,[o(l,I(M(_(p).validateInfos.username)),{default:S(()=>[o(t,{value:_(i).username,"onUpdate:value":a[0]||(a[0]=e=>_(i).username=e),placeholder:"账号: admin",size:"large",type:"text",onPressEnter:m},{prefix:S(()=>[o(_(Ge),{style:O(_(c).username?{color:"#c0c0c0"}:{})},null,8,["style"])]),_:1},8,["value"])]),_:1},16)]),P("div",Dt,[o(l,I(M(_(p).validateInfos.password)),{default:S(()=>[o(t,{value:_(i).password,"onUpdate:value":a[1]||(a[1]=e=>_(i).password=e),placeholder:"密码: 12345678",size:"large",type:"password",onPressEnter:m},{prefix:S(()=>[o(_(Ke),{style:O(_(c).password?{color:"#c0c0c0"}:{})},null,8,["style"])]),_:1},8,["value"])]),_:1},16)]),P("div",Lt,[o(n,{checked:_(i).rememberMe,"onUpdate:checked":a[2]||(a[2]=e=>_(i).rememberMe=e)},{default:S(()=>[...a[3]||(a[3]=[d(" 自动登录 ",-1)])]),_:1},8,["checked"])]),o(l,{style:{margin:"30px 0 0"}},{default:S(()=>[o(s,{size:"large",type:"primary",class:"login-button",loading:_(r),disabled:_(r),onClick:m},{default:S(()=>[...a[4]||(a[4]=[d(" 登录 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})])])]),a[6]||(a[6]=P("div",{class:"footer"},[P("div",{class:"copyright"}," Copyright © 2025 Antdv.pro ")],-1))])}}}),[["__scopeId","data-v-009bd8a2"]]),qt=Object.freeze(Object.defineProperty({__proto__:null,default:Ut},Symbol.toStringTag,{value:"Module"})),Ht=(e,a)=>{if(ua(a)||ca(a))for(const t of e){if(a===t.value)return t||null;if(da(t.children)){const e=Ht(t.children,a);if(e)return e}}return null},$t=(e,a,t="label")=>{const l=Ht(e,a);if(da(t)){for(const e of t){const a=l?.[e];if(ua(a)||ca(a))return a}return a}if(ua(t)){const e=l?.[t],o=ua(e),r=ca(e);return o||r?e:a}return a},Wt=(e="",a={},t,l)=>da(l)?{action:e,params:a,sorter:l.filter(e=>e.field&&e.value).map(e=>({field:e.field.replace(/(^|\B)([A-Z])/g,"_$2").toLowerCase(),value:e.value.replace(/(^|\B)([A-Z])/g,"_$2").toLowerCase()})),pageSize:t?.pageSize??void 0,pageNo:t?.pageNo??void 0}:pa(l)&&ua(l.field)&&ua(l.value)?{action:e,params:a,sorter:{field:l.field.replace(/(^|\B)([A-Z])/g,"_$2").toLowerCase(),value:l.value.replace(/(^|\B)([A-Z])/g,"_$2").toLowerCase()},pageSize:t?.pageSize??void 0,pageNo:t?.pageNo??void 0}:{action:e,params:a,sorter:void 0,pageSize:t?.pageSize??void 0,pageNo:t?.pageNo??void 0};function Bt(e){return Za({url:"/organize/modifyOrganizeInfo",method:"post",data:e})}const Yt={class:"organize-tree-container"},Gt=Tt(l({name:"OrganizeTree",inheritAttrs:!1,__name:"OrganizeTree",emits:["queryTable","selectedNode","addRecord"],setup(e,{expose:t,emit:l}){const r={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},n={display:"flex",padding:"15px 10px",flexFlow:"column nowrap",flex:"1 1 auto",position:"relative",overflow:"auto"},s={flex:"0 0 auto",overflow:"hidden"},i=l,d=h("tree"),u=a([]),c=a(!1),p=a([]),v=a([]),m=a([]),g=a({children:"children",title:"title",key:"key"}),f=e=>{if(!c.value){c.value=!0;const e=[],a=[...m.value],t=[...v.value],l=new Set(["0",...p.value]);p.value=[],m.value=[],v.value=[];for(const o of l){const a=Promise.resolve(w({key:o})).then(e=>({parent:"0"!==o?{key:o}:null,children:e||[]}));e.push(a.catch(()=>{}))}return Promise.all(e).then(e=>{for(const a of e)a&&d.value?.reloadTreeNodes(a.children,a.parent?.key);d.value?.doTreeOnlyExpanded(a),d.value?.doTreeSelected(t),p.value=[...l],c.value=!1})}},y=Ie(e=>{i("selectedNode",e.selectedNode),i("queryTable",{orgId:"Y"===e.selectedNode?.isOrg?e.selectedNode.key:"",deptId:"N"===e.selectedNode?.isOrg?e.selectedNode.key:""})}),b=Me(e=>{p.value=[...e.loadedKeys]}),w=Oe(e=>{const a=Wt("",{orgId:e.key},null,null);return(t=a,Za({url:"/organize/getOrganizeInfoTree",method:"post",data:t})).then(e=>"0000"!==e.code?Promise.reject():e.result);var t});return x(()=>{f()}),t({doRefresh:f}),(e,a)=>{const t=Qe,l=fe,p=Xe,h=A("STree"),x=we;return T(),C("section",Yt,[o(x,{title:"组织列表",style:r,bodyStyle:n,headStyle:s,bordered:!1},{extra:S(()=>[o(l,{ghost:"",type:"primary",style:{margin:"0 5px"},onClick:a[0]||(a[0]=e=>{i("addRecord")})},{icon:S(()=>[o(t)]),_:1}),o(l,{ghost:"",type:"primary",style:{margin:"0 5px"},onClick:a[1]||(a[1]=e=>f())},{icon:S(()=>[o(p)]),_:1})]),default:S(()=>[o(h,{ref_key:"tree",ref:d,treeData:_(u),"onUpdate:treeData":a[2]||(a[2]=e=>R(u)?u.value=e:null),expandedKeys:_(m),"onUpdate:expandedKeys":a[3]||(a[3]=e=>R(m)?m.value=e:null),selectedKeys:_(v),"onUpdate:selectedKeys":a[4]||(a[4]=e=>R(v)?v.value=e:null),fieldNames:_(g),allowAutoExpandLoad:!0,allowAutoExpanded:!0,allowSelectedLevel:1,allowCheckedLevel:1,selectable:!0,checkable:!1,showIcon:!1,showLine:!1,tooltip:!0,blockNode:!0,loading:_(c),loadData:_(w),onChange:_(b),onSelect:_(y)},null,8,["treeData","expandedKeys","selectedKeys","fieldNames","loading","loadData","onChange","onSelect"])]),_:1})])}}}),[["__scopeId","data-v-f5bffa37"]]),Kt=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"})),Qt={class:"organize-query-container"},Xt={class:"flex-row-auto"},Zt={class:"flex-row-none"},Jt={class:"flex-row-auto"},el={style:{flex:"1 1 auto"}},al={style:{flex:"0 0 auto"}},tl={key:0,class:"form-inline-more"},ll={class:"flex-row-none",style:{width:"210px"}},ol={class:"flex-row-auto"},rl=Tt(l({name:"OrganizeQuery",inheritAttrs:!1,__name:"OrganizeQuery",emits:["addRecord","queryTable"],setup(e,{emit:l}){z(e=>({"2f5f044f":_(c),"540e670c":_(p)}));const r=a(!1),n=l,s=ke(),i=a({title:"",activity:""}),u=t(()=>s.componentSize?.value??"middle"),c=t(()=>"large"===u.value?"412px":"middle"===u.value?"368px":"330px"),p=t(()=>"large"===u.value?"414px":"middle"===u.value?"370px":"332px"),v=()=>{n("addRecord")},m=()=>{n("queryTable",i.value)},g=()=>{r.value=!r.value};return(e,a)=>{const t=Ze,l=fe,n=Ce,s=ge,c=Je,p=Qe,h=ae,f=te,y=me,b=j("action");return T(),C("section",Qt,[o(y,{layout:"inline"},{default:S(()=>[P("div",Xt,[P("div",Zt,[o(s,{label:"组织/部门",style:O({width:"large"===_(u)?"385px":"middle"===_(u)?"345px":"312px"})},{default:S(()=>[o(n,{value:_(i).title,"onUpdate:value":a[0]||(a[0]=e=>_(i).title=e),placeholder:"请输入组织/部门名称",allowClear:"",onSearch:m},{enterButton:S(()=>[o(l,null,{icon:S(()=>[o(t,{style:{color:"var(--ant-primary-color)"}})]),_:1})]),_:1},8,["value"])]),_:1},8,["style"])]),P("div",Jt,[P("div",el,[o(l,{onClick:g},{icon:S(()=>[o(c,{style:{color:"var(--ant-primary-color)"}})]),_:1})]),P("div",al,[N((T(),F(l,{type:"primary",onClick:v},{icon:S(()=>[o(p)]),default:S(()=>[a[3]||(a[3]=P("span",null,"新增",-1))]),_:1})),[[b,void 0,"add"]])])])]),_(r)?(T(),C("div",tl,[P("div",ll,[o(s,{label:"组织状态",style:{"margin-bottom":"0"}},{default:S(()=>[o(f,{value:_(i).activity,"onUpdate:value":a[1]||(a[1]=e=>_(i).activity=e),placeholder:"请选择组织状态",onChange:m},{default:S(()=>[o(h,{value:""},{default:S(()=>[...a[4]||(a[4]=[d(" 全部 ",-1)])]),_:1}),o(h,{value:"Y"},{default:S(()=>[...a[5]||(a[5]=[d(" 启用 ",-1)])]),_:1}),o(h,{value:"N"},{default:S(()=>[...a[6]||(a[6]=[d(" 禁用 ",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),P("div",ol,[o(l,{type:"primary",style:{margin:"0 8px"},onClick:m},{default:S(()=>[...a[7]||(a[7]=[d(" 查询 ",-1)])]),_:1}),o(l,{style:{margin:"0 8px"},onClick:a[2]||(a[2]=e=>(i.value.title="",i.value.activity="",void m()))},{default:S(()=>[...a[8]||(a[8]=[d(" 重置 ",-1)])]),_:1})])])):E("",!0)]),_:1})])}}}),[["__scopeId","data-v-5904f8c0"]]),nl=Object.freeze(Object.defineProperty({__proto__:null,default:rl},Symbol.toStringTag,{value:"Module"})),sl={class:"organize-table-container"},il={key:0},dl={key:1},ul={key:2},cl=["onClick"],pl=Tt(l({name:"OrganizeTable",inheritAttrs:!1,__name:"OrganizeTable",props:{dictionary:{}},emits:["editRecord"],setup(e,{expose:t,emit:l}){const r=e,n=l,s=h("table"),i=a({title:"",orgId:"",deptId:"",activity:""}),d=Ae({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),u=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),c=ze([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"名称",dataIndex:"title",tooltip:!0,fixed:"left"},{title:"简称",dataIndex:"orgShortName"},{title:"编码",dataIndex:"key"},{title:"上级单位",dataIndex:"parentOrgName",tooltip:!0},{title:"形态",dataIndex:"isOrg",width:100},{title:"可用状态",dataIndex:"activity",align:"center",width:90},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:80}]),p=je({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),v=Ee(e=>{const a=Wt("",i.value,e.paginate,e.sorter);return(t=a,Za({url:"/organize/getOrganizeInfoList",method:"post",data:t})).then(e=>"0000"!==e.code?(pe.error({message:"系统消息",description:e.message||"组织机构查询失败!"}),Promise.reject(e)):e);var t}),m=e=>{s.value?.refresh(e)};return t({doTableRefresh:m,queryParams:i}),(e,a)=>{const t=le,l=A("STable");return T(),C("section",sl,[o(l,{ref_key:"table",ref:s,columns:_(c),"onUpdate:columns":a[0]||(a[0]=e=>R(c)?c.value=e:null),paginate:_(p),"onUpdate:paginate":a[1]||(a[1]=e=>R(p)?p.value=e:null),columnPresetResizable:!0,loadData:_(v),bodyMinRows:!0,immediate:!1,border:!1,scroll:_(u),sticky:_(d),rowKey:"key"},{bodyerCell:S(({column:e,record:a,value:l,groupIndex:o})=>["serial"===e.key?(T(),C("span",il,V(o+1),1)):E("",!0),"parentOrgName"===e.key?(T(),C("span",dl,V(_($t)(r.dictionary.orgTree,l)),1)):E("",!0),"isOrg"===e.key?(T(),C("span",ul,V(_($t)(r.dictionary.isOrg,l)),1)):E("",!0),"activity"===e.key?(T(),F(t,{key:3,checked:l,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,a,t)=>(e[a]=t,s.value?.update(),Bt(Wt("update",e)).then(e=>{if("0000"!==e.code)return pe.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);pe.success({message:"系统消息",description:"修改成功"}),m()})))(a,"activity",e)},null,8,["checked","onChange"])):E("",!0),"action"===e.key?(T(),C("a",{key:4,href:"javascript: void(0)",style:{"font-weight":"500",display:"inline-block",margin:"0 7px"},onClick:e=>(e=>{n("editRecord",e)})(a)}," 修改 ",8,cl)):E("",!0)]),_:1},8,["columns","paginate","loadData","scroll","sticky"])])}}}),[["__scopeId","data-v-98d1b1b5"]]),vl=Object.freeze(Object.defineProperty({__proto__:null,default:pl},Symbol.toStringTag,{value:"Module"})),ml={class:"organize-form-container"},gl=Tt(l({name:"OrganizeForm",inheritAttrs:!1,__name:"OrganizeForm",props:{dictionary:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const r=h("form"),n=e,s=t(()=>n.loading),i=a({}),d=a(""),u=Ne([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"title",field:"title",label:"名称",props:{rows:1,autoSize:!0,placeholder:"请输入名称"}},{type:"AInput",slot:"orgShortName",field:"orgShortName",label:"简称",props:{placeholder:"请输入简称"}},{type:"ASelect",slot:"isOrg",field:"isOrg",label:"形态",props:{placeholder:"请选择组织形态",options:n.dictionary.isOrg}},{type:"ATreeSelect",slot:"parentOrgId",field:"parentOrgId",label:"上级",props:{popupClassName:"text-ellipsis",dropdownStyle:{maxHeight:"300px"},allowClear:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,treeNodeFilterProp:"label",placeholder:"请选择上级",treeData:n.dictionary.orgTree},transfer:{input:e=>"0"!==e?e:"",output:e=>e||"0"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"",border:!0,grid:{}},{type:"ASwitch",slot:"activity",field:"activity",label:"状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),c=Fe({title:[{required:!0,message:"请输入名称"}],isOrg:[{required:!0,message:"请选择形态"}],orgShortName:[{required:!0,message:"请输入简称"}]}),p=Ve({gutter:8,xs:24});return l({validateFields:(...e)=>r.value?.validateFields(...e).then(()=>({action:d.value,record:i.value})),resetFields:(...e)=>r.value?.resetFields(...e),doCreate:(e,a)=>{d.value=e,i.value=a},doClose:()=>{d.value="",i.value={}}}),(e,a)=>{const t=A("SForm");return T(),C("section",ml,[o(t,{ref_key:"form",ref:r,modelValue:_(i),"onUpdate:modelValue":a[0]||(a[0]=e=>R(i)?i.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(s),groups:_(u),rules:_(c),grid:_(p)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-83ef33ce"]]),hl=Object.freeze(Object.defineProperty({__proto__:null,default:gl},Symbol.toStringTag,{value:"Module"})),fl={class:"organize-drawer-container"},yl={class:"readonly-container"},bl={class:"readonly-item"},xl={class:"value"},_l={class:"drawer-body-footer"},wl={class:"drawer-body-footer-fixed"},kl=Tt(l({name:"OrganizeDrawer",inheritAttrs:!1,__name:"OrganizeDrawer",props:{dictionary:{}},emits:["submitted","closed"],setup(e,{expose:t,emit:l}){const r=l,n=e,s=h("form"),i=a(""),u=a(""),c=a({key:""}),p=a(!1),v=a(!1),m=a(!1),g=a(!1),f=a(!1),y=()=>{s.value?.validateFields()?.then(({action:e,record:a})=>{if(!m.value){m.value=!0;const l={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?(t=Wt(e,a),Za({url:"/organize/addOrganizeInfo",method:"post",data:t})):Bt(Wt(e,a));return o.finally(()=>{m.value=!1}),o.then(e=>{"0000"!==e.code?pe.error({message:"系统消息",description:e.message||l.error}):pe.success({message:"系统消息",description:l.success});const t="0000"!==e.code?Promise.reject(e):a;return r("submitted"),b(),t})}var t})},b=()=>{f.value&&(i.value="",u.value="",c.value={key:""},v.value=!1,p.value=!1,m.value=!1,g.value=!1,f.value=!1,s.value?.doClose(),r("closed"))};return t({doEdit:e=>{i.value="修改",u.value="update",v.value=!1,p.value=!1,g.value=!1,f.value=!0,c.value=Object.assign({parentOrgId:"0",activity:"Y",isOrg:"Y"},e),D(()=>{s.value?.doCreate("update",c.value)})},doAdd:e=>{i.value="新增",u.value="insert",v.value=!1,p.value=!1,g.value=!0,f.value=!0,c.value=Object.assign({parentOrgId:"0",activity:"Y",isOrg:"Y"},e),D(()=>{s.value?.doCreate("insert",c.value)})}}),(e,a)=>{const t=G,l=fe,r=Y;return T(),C("section",fl,[o(r,{width:"400",open:_(f),title:_(i),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>b())},{default:S(()=>[P("div",yl,[P("div",bl,[a[3]||(a[3]=P("span",{class:"name"},"编码:",-1)),P("span",xl,V(_(c).key||"由系统生成"),1)])]),o(t,{dashed:!0,style:{margin:"16px  0 20px"}}),o(gl,{ref_key:"form",ref:s,dictionary:n.dictionary,disabled:_(v),readonly:_(p),loading:_(m)},null,8,["dictionary","disabled","readonly","loading"]),P("div",_l,[P("div",wl,[o(l,{onClick:a[0]||(a[0]=e=>b())},{default:S(()=>[...a[4]||(a[4]=[d(" 取消 ",-1)])]),_:1}),o(l,{type:"primary",loading:_(m),onClick:a[1]||(a[1]=e=>y())},{default:S(()=>[...a[5]||(a[5]=[d(" 保存 ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-b6dea309"]]),Cl=Object.freeze(Object.defineProperty({__proto__:null,default:kl},Symbol.toStringTag,{value:"Module"}));function Tl(e){return Za({url:"/base/getTreeById",method:"post",data:e})}const Sl={class:"section-container"},Pl={class:"section-left-tree"},Il={class:"section-right-container"},Ml={class:"section-query-container"},Ol={class:"section-table-container"},Al=Tt(l({name:"OrganizeManage",inheritAttrs:!1,__name:"OrganizeManage",setup(e){z(e=>({"23c8d4f1":_(p).layoutViewStyle.minHeight}));const t={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},l={flex:"0 0 auto",overflow:"hidden"},r={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},n=h("tree"),s=h("table"),i=h("query"),d=h("drawer"),u=a(null),c=a(!1),p=ja(),v=a({orgTree:[],isOrg:[{label:"组织",value:"Y"},{label:"部门",value:"N"}]}),m=e=>{u.value=e},g=(e={})=>{s.value&&(s.value.queryParams={...s.value.queryParams,...e},s.value.doTableRefresh())},f=e=>{d.value?.doEdit(e)},y=()=>{d.value?.doAdd({parentOrgId:u.value?.key})},b=()=>{Tl({id:"orgTree"}).then(e=>{if("0000"!==e.code)return Promise.reject(new Error);v.value.orgTree.splice(0),v.value.orgTree.push(...e.result)}),n.value?.doRefresh()};return x(()=>{b()}),(e,a)=>{const u=we,p=ea,h=aa,x=fe;return T(),C("section",Sl,[P("div",{class:"section-left-container",style:O({width:_(c)?"0":"334px"})},[P("div",Pl,[o(Gt,{ref_key:"tree",ref:n,dictionary:_(v),onAddRecord:y,onSelectedNode:m,onQueryTable:g,onQueryAll:b},null,8,["dictionary"])])],4),P("div",Il,[o(u,{style:t,headStyle:l,bodyStyle:r,bordered:!1},{default:S(()=>[P("div",Ml,[o(rl,{ref_key:"query",ref:i,onQueryTable:g,onAddRecord:y},null,512)]),P("div",Ol,[o(pl,{ref_key:"table",ref:s,dictionary:_(v),onEditRecord:f},null,8,["dictionary"])])]),_:1}),o(x,{type:"link",class:"section-tree-collapse",onClick:a[0]||(a[0]=L(e=>c.value=!_(c),["stop"]))},{icon:S(()=>[_(c)?(T(),F(p,{key:0})):E("",!0),_(c)?E("",!0):(T(),F(h,{key:1}))]),_:1})]),o(kl,{ref_key:"drawer",ref:d,dictionary:_(v),onSubmitted:g},null,8,["dictionary"])])}}}),[["__scopeId","data-v-52d9a71e"]]),Rl=Object.freeze(Object.defineProperty({__proto__:null,default:Al},Symbol.toStringTag,{value:"Module"}));function zl(e){return Za({url:"/resource/addResourceInfo",method:"post",data:e})}function jl(e){return Za({url:"/resource/getResourceListInfo",method:"post",data:e})}function El(e){return Za({url:"/resource/modifyResourceInfo",method:"post",data:e})}function Nl(e){return Za({url:"/resource/deleteResourceInfo",method:"post",data:e})}const Fl={class:"resource-button-form-container"},Vl=Tt(l({name:"ResourceButtonForm",inheritAttrs:!1,__name:"ButtonForm",props:{presetOptions:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const r=h("form"),n=e,s=t(()=>n.loading),i=a({}),d=a(""),u=Ne([{type:"AGroup",slot:"",field:"AGroup-1",label:"",grid:{}},{type:"AInput",slot:"title",field:"title",label:"按钮名称",props:{placeholder:"请输入按钮名称",options:n.presetOptions.buttons}},{type:"AInput",slot:"resourceName",field:"resourceName",label:"按钮标识",props:{placeholder:"请输入按钮标识"}},{type:"AInput",slot:"sort",field:"sort",label:"按钮排序",props:{placeholder:"请输入按钮排序"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",border:!0,grid:{}},{type:"ASwitch",slot:"activity",field:"activity",label:"是否启用",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),c=Fe({title:[{required:!0,message:"请输入按钮名称"}],resourceName:[{required:!0,message:"请输入按钮标识"}],sort:[{required:!0,message:"请输入按钮排序"}]}),p=Ve({gutter:8,xs:24});return l({validateFields:(...e)=>r.value?.validateFields(...e).then(()=>({action:d.value,record:i.value})),resetFields:(...e)=>r.value?.resetFields(...e),doCreate:(e,a)=>{d.value=e,i.value=a},doClose:()=>{d.value="",i.value={}}}),(e,a)=>{const t=A("SForm");return T(),C("section",Fl,[o(t,{ref_key:"form",ref:r,modelValue:_(i),"onUpdate:modelValue":a[0]||(a[0]=e=>R(i)?i.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(s),groups:_(u),rules:_(c),grid:_(p)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-66b042f0"]]),Dl=Object.freeze(Object.defineProperty({__proto__:null,default:Vl},Symbol.toStringTag,{value:"Module"})),Ll={class:"resource-button-drawer-container"},Ul={class:"readonly-container"},ql={class:"readonly-item"},Hl={class:"value"},$l={class:"readonly-item"},Wl={class:"value"},Bl={class:"readonly-item"},Yl={class:"value"},Gl={class:"drawer-body-footer"},Kl={class:"drawer-body-footer-fixed"},Ql=Tt(l({name:"ResourceButtonDrawer",inheritAttrs:!1,__name:"ButtonDrawer",props:{presetOptions:{}},emits:["submitted","deleted","closed"],setup(e,{expose:t,emit:l}){const r=e,n=l,s=h("form"),i=a(""),u=a(""),c=a({}),p=a(!1),v=a(!1),m=a(!1),g=a(!1),f=a(!1),y=()=>{f.value&&(i.value="",u.value="",c.value={},v.value=!1,p.value=!1,m.value=!1,g.value=!1,f.value=!1,s.value?.doClose(),n("closed"))};return t({doEdit:e=>{i.value="修改按钮资源",u.value="update",v.value=!1,p.value=!1,g.value=!1,f.value=!0,c.value=Object.assign({resourceType:"b",activity:"Y"},e),D(()=>{s.value?.doCreate("update",c.value)})},doAdd:e=>{i.value="添加按钮资源",u.value="insert",v.value=!1,p.value=!1,g.value=!0,f.value=!0,c.value=Object.assign({resourceType:"b",activity:"Y"},e),D(()=>{s.value?.doCreate("insert",c.value)})},doDel:async e=>Nl(Wt("delete",e)).then(e=>{if("0000"!==e.code)return pe.error({message:"系统消息",description:e.message||"删除失败!"}),Promise.reject(e);pe.success({message:"系统消息",description:"删除成功!"}),n("deleted")})}),(e,a)=>{const t=G,l=fe,u=Y;return T(),C("section",Ll,[o(u,{width:"400",open:_(f),title:_(i),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>y())},{default:S(()=>[P("div",Ul,[P("div",ql,[a[3]||(a[3]=P("span",{class:"name"},"按钮资源ID:",-1)),P("span",Hl,V(_(c).resourceId||"由系统生成"),1)]),P("div",$l,[a[4]||(a[4]=P("span",{class:"name"},"所属菜单ID:",-1)),P("span",Wl,V(_(c).parentId),1)]),P("div",Bl,[a[5]||(a[5]=P("span",{class:"name"},"所属菜单标识:",-1)),P("span",Yl,V(_(c).component),1)])]),o(t,{dashed:!0}),o(Vl,{ref_key:"form",ref:s,presetOptions:r.presetOptions,disabled:_(v),readonly:_(p),loading:_(m)},null,8,["presetOptions","disabled","readonly","loading"]),P("div",Gl,[P("div",Kl,[o(l,{onClick:a[0]||(a[0]=e=>y())},{default:S(()=>[...a[6]||(a[6]=[d(" 取消 ",-1)])]),_:1}),o(l,{type:"primary",loading:_(m),onClick:a[1]||(a[1]=e=>{s.value?.validateFields()?.then(({action:e,record:a})=>{if(!m.value){m.value=!0;const t={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},l="insert"===e?zl(Wt(e,a)):El(Wt(e,a));return l.finally(()=>{m.value=!1}),l.then(e=>{"0000"!==e.code?pe.error({message:"系统消息",description:e.message||t.error}):pe.success({message:"系统消息",description:t.success});const l="0000"!==e.code?Promise.reject(e):a;return n("submitted"),y(),l})}})})},{default:S(()=>[...a[7]||(a[7]=[d(" 保存 ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-150487a3"]]),Xl=Object.freeze(Object.defineProperty({__proto__:null,default:Ql},Symbol.toStringTag,{value:"Module"})),Zl={class:"resource-button-table-container"},Jl={key:0},eo=["onClick"],ao=Tt(l({name:"ResourceButtonTable",inheritAttrs:!1,__name:"ButtonTable",props:{parentNode:{}},setup(e,{expose:t}){const l=e,r=h("table"),n=h("buttonDrawer"),s=a({resourceType:"b",parentId:""}),i=a({buttons:[{label:"新增",value:"add",sort:1},{label:"删除",value:"del",sort:2},{label:"修改",value:"edit",sort:3},{label:"查询",value:"query",sort:4},{label:"重置",value:"reset",sort:5},{label:"上传",value:"upload",sort:6},{label:"上报",value:"up",sort:7},{label:"审批",value:"approve",sort:8},{label:"导出",value:"export",sort:9}]}),d={flex:"0 0 auto",overflow:"hidden"},u={flex:"1 1 auto",overflow:"auto",position:"relative",boxSizing:"border-box",padding:"20px"},c=a(!1),p=a(!1),v=a({container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",maxWidth:"140px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}}),m=Ae({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),g=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),f=ze([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"按钮名称",dataIndex:"title"},{title:"按钮标识",dataIndex:"resourceName"},{title:"是否启用",dataIndex:"activity"},{title:"操作",dataIndex:"action",align:"center",width:80}]),y=je({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),b=Ee(async e=>jl(Wt("",s.value,e.paginate,e.sorter)).then(e=>"0000"!==e.code?(pe.error({message:"系统消息",description:e.message||"按钮资源查询失败!"}),Promise.reject(e)):e)),x=(e,a,t)=>{e[a]=t,r.value?.update()},w=e=>El(Wt("update",e)).then(e=>{if("0000"!==e.code)return pe.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);pe.success({message:"系统消息",description:"修改成功"}),k()}),k=()=>{p.value=!1,c.value=!1,r.value?.refresh()},P=()=>{n.value?.doAdd({parentId:l.parentNode.resourceId,component:l.parentNode.component})};return t({queryParams:s,doTableRefresh:k,doTableReady:()=>{c.value=!0},doTableClear:()=>{p.value=!1,c.value=!1,r.value?.clear()}}),(e,a)=>{const t=Qe,l=fe,s=A("SEditCellInput"),h=le,I=A("STable"),M=we;return T(),C("section",Zl,[o(M,{title:"按钮资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:d,bodyStyle:u,bordered:!1},{extra:S(()=>[e.parentNode.resourceId?(T(),F(l,{key:0,type:"primary",onClick:P},{icon:S(()=>[o(t)]),_:1})):E("",!0)]),default:S(()=>[o(I,{ref_key:"table",ref:r,loading:_(c),"onUpdate:loading":a[1]||(a[1]=e=>R(c)?c.value=e:null),columns:_(f),"onUpdate:columns":a[2]||(a[2]=e=>R(f)?f.value=e:null),paginate:_(y),"onUpdate:paginate":a[3]||(a[3]=e=>R(y)?y.value=e:null),style:{height:"100%",overflow:"auto"},columnPresetResizable:!0,loadData:_(b),bodyMinRows:!0,immediate:!1,border:!1,scroll:_(g),sticky:_(m),rowKey:"resourceId"},{bodyerCell:S(({column:e,record:t,value:l,groupIndex:o})=>["serial"===e.key?(T(),C("span",Jl,V(o+1),1)):E("",!0),"title"===e.key||"resourceName"===e.key?(T(),F(s,{key:1,status:_(p),"onUpdate:status":a[0]||(a[0]=e=>R(p)?p.value=e:null),cellStyle:_(v),text:l,onChange:a=>x(t,e.key,a.value),onConfirm:e=>w(t)},null,8,["status","cellStyle","text","onChange","onConfirm"])):E("",!0),"activity"===e.key?(T(),F(h,{key:2,checked:l,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,a,t)=>{x(e,a,t),w(e)})(t,"activity",e)},null,8,["checked","onChange"])):E("",!0),"action"===e.key?(T(),C("a",{key:3,href:"javascript: void(0)",style:{display:"inline-block","font-weight":"500",margin:"0 7px",color:"#f44848"},onClick:L(e=>(e=>{ve.confirm({title:"是否确认删除该按钮资源?",content:"删除按钮资源会导致相关权限丢失，请慎重考虑!",cancelText:"取消",okText:"删除",okType:"danger",onOk:()=>{n.value?.doDel([e])}})})(t),["stop"])}," 删除 ",8,eo)):E("",!0)]),_:1},8,["loading","columns","paginate","loadData","scroll","sticky"])]),_:1}),o(Ql,{ref_key:"buttonDrawer",ref:n,presetOptions:_(i),onSubmitted:k,onDeleted:k},null,8,["presetOptions"])])}}}),[["__scopeId","data-v-24f16ebc"]]),to=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),lo={class:"resource-menu-form-container"},oo=Tt(l({name:"ResourceMenuForm",inheritAttrs:!1,__name:"MenuForm",props:{disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const r=h("form"),n=e,s=t(()=>n.loading),i=a({}),d=a(""),c=Ne([{type:"AGroup",slot:"",field:"AGroup-1",label:"",grid:{}},{type:"AInput",slot:"title",field:"title",label:"菜单名称",props:{placeholder:"请输入菜单名称"}},{type:"AInput",slot:"resourceName",field:"resourceName",label:"菜单标识",props:{placeholder:"请输入菜单标识"}},{type:"AAutoComplete",slot:"component",field:"component",label:"组件标识",props:{showSearch:!0,placeholder:"请输入组件名称",filterOption:(e,a)=>!!a.label.startsWith(e.trim()),options:[{label:"PageView",value:"PageView"},{label:"RouteView",value:"RouteView"},{label:"PageFrame",value:"PageFrame"}]}},{type:"AInput",slot:"redirect",field:"redirect",label:"跳转路径",props:{placeholder:"请输入跳转路径"}},{type:"AInput",slot:"path",field:"path",label:"访问路径",props:{placeholder:"请输入访问路径"}},{type:"ASelect",slot:"icon-select",field:"icon",label:"菜单图标",props:{placeholder:"请输入菜单图标",allowClear:!0,multiple:!1,mode:"tags"},transfer:{output:(e,{helper:a})=>a.isArray(e)?e.slice(-1)[0]:e}},{type:"AInput",slot:"sort",field:"sort",label:"菜单排序",props:{placeholder:"请输入菜单排序"}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",border:!0,grid:{}},{type:"ASwitch",slot:"hideChildInMenu",field:"hideChildInMenu",label:"隐藏子菜单",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"hideInMenu",field:"hideInMenu",label:"隐藏菜单",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"allowCache",field:"allowCache",label:"是否缓存",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}},{type:"ASwitch",slot:"activity",field:"activity",label:"是否启用",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),p=Fe({title:[{required:!0,message:"请输入菜单名称"}],resourceName:[{required:!0,message:"请输入菜单标识"}],component:[{required:!0,message:"请输入组件名称"}],sort:[{required:!0,message:"请输入菜单排序"}]}),v=Ve({gutter:8,xs:24});return l({validateFields:(...e)=>r.value?.validateFields(...e).then(()=>({action:d.value,record:i.value})),resetFields:(...e)=>r.value?.resetFields(...e),doCreate:(e,a)=>{d.value=e,i.value=a},doClose:()=>{d.value="",i.value={}}}),(e,a)=>{const t=A("SIconSelect"),l=A("SForm");return T(),C("section",lo,[o(l,{ref_key:"form",ref:r,modelValue:_(i),"onUpdate:modelValue":a[0]||(a[0]=e=>R(i)?i.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(s),groups:_(c),rules:_(p),grid:_(v)},{"s-component-icon-select":S(({source:e,field:a,attrs:l})=>[o(t,u({value:e[a],"onUpdate:value":t=>e[a]=t},l),null,16,["value","onUpdate:value"])]),_:1},8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-4272f172"]]),ro=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),no={class:"resource-menu-drawer-container"},so={class:"readonly-container"},io={class:"readonly-item"},uo={class:"value"},co={class:"readonly-item"},po={class:"value"},vo={class:"drawer-body-footer"},mo={class:"drawer-body-footer-fixed"},go=Tt(l({name:"ResourceMenuDrawer",inheritAttrs:!1,__name:"MenuDrawer",emits:["submitted","deleted","closed"],setup(e,{expose:t,emit:l}){const r=l,n=h("form"),s=a(""),i=a(""),u=a({}),c=a(!1),p=a(!1),v=a(!1),m=a(!1),g=a(!1),f=()=>{g.value&&(s.value="",i.value="",u.value={key:""},p.value=!1,c.value=!1,v.value=!1,m.value=!1,g.value=!1,n.value?.doClose(),r("closed"))};return t({doEdit:e=>{s.value="修改菜单资源",i.value="update",p.value=!1,c.value=!1,m.value=!1,g.value=!0,u.value=Object.assign({allowCache:"Y",hideInMenu:"N",hideChildInMenu:"N",resourceType:"m",activity:"Y"},e),D(()=>{n.value?.doCreate("update",u.value)})},doAdd:e=>{s.value="添加菜单资源",i.value="insert",p.value=!1,c.value=!1,m.value=!0,g.value=!0,u.value=Object.assign({allowCache:"Y",hideInMenu:"N",hideChildInMenu:"N",resourceType:"m",activity:"Y"},e),D(()=>{n.value?.doCreate("insert",u.value)})},doDel:async e=>Nl(Wt("delete",e)).then(e=>{if("0000"!==e.code)return pe.error({message:"系统消息",description:e.message||"删除失败!"}),Promise.reject(e);pe.success({message:"系统消息",description:"删除成功!"}),r("deleted")})}),(e,a)=>{const t=G,l=fe,i=Y;return T(),C("section",no,[o(i,{width:"400",open:_(g),title:_(s),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>f())},{default:S(()=>[P("div",so,[P("div",io,[a[3]||(a[3]=P("span",{class:"name"},"当前菜单ID:",-1)),P("span",uo,V(_(u).resourceId||"由系统生成"),1)]),P("div",co,[a[4]||(a[4]=P("span",{class:"name"},"父级菜单ID:",-1)),P("span",po,V(_(u).parentId),1)])]),o(t,{dashed:!0}),o(oo,{ref_key:"form",ref:n,nuForm:"",disabled:_(p),readonly:_(c),loading:_(v)},null,8,["disabled","readonly","loading"]),P("div",vo,[P("div",mo,[o(l,{onClick:a[0]||(a[0]=e=>f())},{default:S(()=>[...a[5]||(a[5]=[d(" 取消 ",-1)])]),_:1}),o(l,{type:"primary",loading:_(v),onClick:a[1]||(a[1]=e=>{n.value?.validateFields()?.then(({action:e,record:a})=>{if(!v.value){v.value=!0;const t={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},l="insert"===e?zl(Wt(e,a)):El(Wt(e,a));return l.finally(()=>{v.value=!1}),l.then(e=>{"0000"!==e.code?pe.error({message:"系统消息",description:e.message||t.error}):pe.success({message:"系统消息",description:t.success});const l="0000"!==e.code?Promise.reject(e):a;return r("submitted"),f(),l})}})})},{default:S(()=>[...a[6]||(a[6]=[d(" 保存 ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-7f5fa129"]]),ho=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),fo={class:"resource-menu-table-container"},yo={key:0},bo=Tt(l({name:"ResourceMenuTable",inheritAttrs:!1,__name:"MenuTable",setup(e,{expose:t}){const l=h("table"),r=h("menuDrawer"),n=a({resourceType:"m",parentId:""}),s={flex:"0 0 auto",overflow:"hidden"},i={flex:"1 1 auto",overflow:"auto",position:"relative",boxSizing:"border-box",padding:"20px"},d=a(!1),u=a(!1),c=a({container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",minWidth:"180px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}}),p=Ae({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),v=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),m=ze([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"菜单名称",dataIndex:"title",minWidth:100,fixed:"left"},{title:"菜单标识",dataIndex:"resourceName",minWidth:150},{title:"组件标识",dataIndex:"component",minWidth:150},{title:"跳转路径",dataIndex:"redirect",minWidth:150},{title:"访问路径",dataIndex:"path",minWidth:150},{title:"菜单图标",dataIndex:"icon",minWidth:150},{title:"菜单排序",dataIndex:"sort",minWidth:150},{title:"隐藏子菜单",dataIndex:"hideChildInMenu",width:120},{title:"隐藏菜单",dataIndex:"hideInMenu",width:120},{title:"是否缓存",dataIndex:"allowCache",width:120},{title:"是否启用",dataIndex:"activity",width:120}]),g=je({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),f=Ee(async e=>jl(Wt("",n.value,e.paginate,e.sorter)).then(e=>"0000"!==e.code?(pe.error({message:"系统消息",description:e.message||"按钮资源查询失败!"}),Promise.reject(e)):e)),y=(e,a,t)=>{e[a]="sort"===a?+t||"":t,l.value?.update()},b=e=>El(Wt("update",e)).then(e=>{if("0000"!==e.code)return pe.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);pe.success({message:"系统消息",description:"修改成功"}),x()}),x=()=>{u.value=!1,d.value=!1,l.value?.refresh()};return t({queryParams:n,doTableRefresh:x,doTableReady:()=>{d.value=!0},doTableClear:()=>{u.value=!1,d.value=!1,l.value?.clear()}}),(e,a)=>{const t=A("SEditCellInput"),n=A("SEditCellTextarea"),h=le,w=A("SEditCellAutoComplete"),k=A("SEditCellSelectIcon"),P=A("STable"),I=we;return T(),C("section",fo,[o(I,{title:"子菜单资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:s,bodyStyle:i,bordered:!1},{default:S(()=>[o(P,{ref_key:"table",ref:l,loading:_(d),"onUpdate:loading":a[4]||(a[4]=e=>R(d)?d.value=e:null),columns:_(m),"onUpdate:columns":a[5]||(a[5]=e=>R(m)?m.value=e:null),paginate:_(g),"onUpdate:paginate":a[6]||(a[6]=e=>R(g)?g.value=e:null),style:{width:"100%",height:"100%",overflow:"auto"},columnPresetResizable:!0,tableLayout:"auto",loadData:_(f),bodyMinRows:!0,immediate:!1,border:!1,scroll:_(v),sticky:_(p),rowKey:"resourceId"},{bodyerCell:S(({column:e,record:l,value:o,groupIndex:r})=>["serial"===e.key?(T(),C("span",yo,V(r+1),1)):E("",!0),["title","resourceName","sort"].includes(e.key)?(T(),F(t,{key:1,status:_(u),"onUpdate:status":a[0]||(a[0]=e=>R(u)?u.value=e:null),cellStyle:_(c),text:String(o??""),empty:"无",onChange:a=>y(l,e.key,a.value),onConfirm:e=>b(l)},null,8,["status","cellStyle","text","onChange","onConfirm"])):E("",!0),["redirect","path"].includes(e.key)?(T(),F(n,{key:2,status:_(u),"onUpdate:status":a[1]||(a[1]=e=>R(u)?u.value=e:null),cellStyle:_(c),text:String(o??""),empty:"无",onChange:a=>y(l,e.key,a.value),onConfirm:e=>b(l)},null,8,["status","cellStyle","text","onChange","onConfirm"])):E("",!0),["hideChildInMenu","hideInMenu","allowCache","activity"].includes(e.key)?(T(),F(h,{key:3,checked:o,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"是",unCheckedChildren:"否",onChange:a=>((e,a,t)=>{y(e,a,t),b(e)})(l,e.key,a)},null,8,["checked","onChange"])):E("",!0),"component"===e.key?(T(),F(w,{key:4,status:_(u),"onUpdate:status":a[2]||(a[2]=e=>R(u)?u.value=e:null),cellStyle:_(c),text:String(o??""),empty:"无",options:["PageView","RouteView","PageFrame"].map(e=>({label:e,value:e})),filterOption:(e,a)=>!!a?.label.startsWith(e.trim()),onChange:a=>y(l,e.key,a.value),onConfirm:e=>b(l)},null,8,["status","cellStyle","text","options","filterOption","onChange","onConfirm"])):E("",!0),"icon"===e.key?(T(),F(k,{key:5,status:_(u),"onUpdate:status":a[3]||(a[3]=e=>R(u)?u.value=e:null),cellStyle:_(c),text:String(o??""),allowClear:"",empty:"无",onChange:a=>y(l,e.key,a.value),onConfirm:e=>b(l)},null,8,["status","cellStyle","text","onChange","onConfirm"])):E("",!0)]),_:1},8,["loading","columns","paginate","loadData","scroll","sticky"])]),_:1}),o(go,{ref_key:"menuDrawer",ref:r,onSubmitted:x,onDeleted:x},null,512)])}}}),[["__scopeId","data-v-fb3794d6"]]),xo=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),_o={class:"resource-tree-menu-container"},wo=Tt(l({name:"ResourceTreeMenu",inheritAttrs:!1,__name:"TreeMenu",emits:["linkage"],setup(e,{emit:t}){const l={flex:"0 0 auto",overflow:"hidden"},r={flex:"1 1 auto",overflow:"hidden",position:"relative"},n=a({key:"resourceId",title:"title",children:"children"}),s=t,i=h("tree"),d=h("menuDrawer"),u=a([]),c=a(!1),p=()=>{if(!c.value){c.value=!0;const a=(e={resourceType:"m"},Za({url:"/resource/getResourceTreeInfo",method:"post",data:e})).then(e=>{if("0000"!==e.code)return se.error("菜单资源加载失败"),Promise.reject();u.value=e.result,D(()=>m())});return a.finally(()=>{c.value=!1}),a}var e},v=()=>{i.value?.doTreeAllCollapsed()},m=()=>{i.value?.doTreeAllExpanded()},g=Ie(e=>{s("linkage",e.selectedNode)}),f=e=>{d.value?.doAdd({parentId:e.resourceId})},y=e=>{d.value?.doEdit(e)},b=e=>{ve.confirm({title:"是否确认删除该菜单?",content:"删除菜单会导致相关页面丢失，请慎重考虑!",cancelText:"取消",okText:"删除",okType:"danger",onOk:()=>{d.value?.doDel([e])}})};return p(),(e,a)=>{const t=Qe,s=fe,h=oa,x=ra,w=ta,k=la,P=A("STree"),I=we;return T(),C("section",_o,[o(I,{title:"菜单资源",style:{display:"flex","flex-flow":"column nowrap",height:"100%"},headStyle:l,bodyStyle:r,bordered:!1},{default:S(()=>[o(P,{ref_key:"tree",ref:i,loading:_(c),treeData:_(u),fieldNames:_(n),allowCheckedLevel:2,allowSelectedLevel:2,selectable:!0,checkable:!1,blockNode:!0,showIcon:!1,showLine:!0,tooltip:!0,sticky:!0,bgColor:"#ffffff",onSelect:_(g)},{titleRootButton:S(e=>[o(s,{type:"link",size:"small",onClick:L(a=>f(e),["stop"])},{icon:S(()=>[o(t)]),_:1},8,["onClick"]),o(s,{type:"link",size:"small",onClick:L(v,["stop"])},{icon:S(()=>[o(h)]),_:1}),o(s,{type:"link",size:"small",onClick:L(m,["stop"])},{icon:S(()=>[o(x)]),_:1})]),titleParentButton:S(e=>[o(s,{type:"link",size:"small",onClick:L(a=>f(e),["stop"])},{icon:S(()=>[o(t)]),_:1},8,["onClick"]),o(s,{type:"link",size:"small",onClick:L(a=>y(e),["stop"])},{icon:S(()=>[o(w)]),_:1},8,["onClick"]),o(s,{type:"link",size:"small",style:{color:"#f44848"},onClick:L(a=>b(e),["stop"])},{icon:S(()=>[o(k)]),_:1},8,["onClick"])]),titleLeafButton:S(e=>[o(s,{type:"link",size:"small",onClick:L(a=>f(e),["stop"])},{icon:S(()=>[o(t)]),_:1},8,["onClick"]),o(s,{type:"link",size:"small",onClick:L(a=>y(e),["stop"])},{icon:S(()=>[o(w)]),_:1},8,["onClick"]),o(s,{type:"link",size:"small",style:{color:"#f44848"},onClick:L(a=>b(e),["stop"])},{icon:S(()=>[o(k)]),_:1},8,["onClick"])]),_:1},8,["loading","treeData","fieldNames","onSelect"])]),_:1}),o(go,{ref_key:"menuDrawer",ref:d,onSubmitted:p,onDeleted:p},null,512)])}}}),[["__scopeId","data-v-160dda07"]]),ko=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),Co={class:"section-container"},To={class:"section-left-tree"},So={class:"section-right-container"},Po=Tt(l({name:"ResourceManage",inheritAttrs:!1,__name:"ResourceManage",setup(e){z(e=>({"24935c06":_(n).layoutViewStyle.minHeight}));const t=a({}),l=h("refTable"),r=a(!1),n=ja(),s=e=>{t.value=e,D(()=>{e.resourceId||l.value?.doTableClear(),e.resourceId&&(l.value.queryParams.parentId=e.resourceId,l.value.doTableRefresh())})};return(e,a)=>{const n=ea,i=aa,d=fe;return T(),C("section",Co,[P("div",{class:"section-left-container",style:O({width:_(r)?"0":"334px"})},[P("div",To,[o(wo,{ref:"treeMenu",onLinkage:s},null,512)])],4),P("div",So,[(T(),F(U(["PageView","RouteView"].includes(_(t).component)?bo:ao),{ref_key:"refTable",ref:l,parentNode:_(t)},null,8,["parentNode"])),o(d,{type:"link",class:"section-tree-collapse",onClick:a[0]||(a[0]=L(e=>r.value=!_(r),["stop"]))},{icon:S(()=>[_(r)?(T(),F(n,{key:0})):E("",!0),_(r)?E("",!0):(T(),F(i,{key:1}))]),_:1})])])}}}),[["__scopeId","data-v-ef50a6aa"]]),Io=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Mo={class:"role-query-container"},Oo={class:"flex-row-auto"},Ao={class:"flex-row-none"},Ro={class:"flex-row-auto"},zo={style:{flex:"1 1 auto"}},jo={style:{flex:"0 0 auto"}},Eo={key:0,class:"form-inline-more"},No={class:"flex-row-none",style:{width:"210px"}},Fo={class:"flex-row-auto"},Vo=Tt(l({name:"RoleQuery",inheritAttrs:!1,__name:"RoleQuery",emits:["addRecord","queryTable"],setup(e,{emit:l}){z(e=>({"47cc962e":_(c),"12c79d4d":_(p)}));const r=a(!1),n=l,s=ke(),i=a({roleName:"",activity:""}),u=t(()=>s.componentSize?.value??"middle"),c=t(()=>"large"===u.value?"412px":"middle"===u.value?"368px":"330px"),p=t(()=>"large"===u.value?"414px":"middle"===u.value?"370px":"332px"),v=()=>{n("addRecord")},m=()=>{n("queryTable",i.value)},g=()=>{r.value=!r.value};return(e,a)=>{const t=Ze,l=fe,n=Ce,s=ge,c=Je,p=Qe,h=ae,f=te,y=me,b=j("action");return T(),C("section",Mo,[o(y,{layout:"inline"},{default:S(()=>[P("div",Oo,[P("div",Ao,[o(s,{label:"组织/部门",style:O({width:"large"===_(u)?"385px":"middle"===_(u)?"345px":"312px"})},{default:S(()=>[o(n,{value:_(i).roleName,"onUpdate:value":a[0]||(a[0]=e=>_(i).roleName=e),placeholder:"请输入角色名",allowClear:"",onSearch:m},{enterButton:S(()=>[o(l,null,{icon:S(()=>[o(t,{style:{color:"var(--ant-primary-color)"}})]),_:1})]),_:1},8,["value"])]),_:1},8,["style"])]),P("div",Ro,[P("div",zo,[o(l,{onClick:g},{icon:S(()=>[o(c,{style:{color:"var(--ant-primary-color)"}})]),_:1})]),P("div",jo,[N((T(),F(l,{type:"primary",onClick:v},{icon:S(()=>[o(p)]),default:S(()=>[a[3]||(a[3]=P("span",null,"新增",-1))]),_:1})),[[b,void 0,"add"]])])])]),_(r)?(T(),C("div",Eo,[P("div",No,[o(s,{label:"组织状态",style:{"margin-bottom":"0"}},{default:S(()=>[o(f,{value:_(i).activity,"onUpdate:value":a[1]||(a[1]=e=>_(i).activity=e),placeholder:"请选择角色状态",onChange:m},{default:S(()=>[o(h,{value:""},{default:S(()=>[...a[4]||(a[4]=[d(" 全部 ",-1)])]),_:1}),o(h,{value:"Y"},{default:S(()=>[...a[5]||(a[5]=[d(" 启用 ",-1)])]),_:1}),o(h,{value:"N"},{default:S(()=>[...a[6]||(a[6]=[d(" 禁用 ",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),P("div",Fo,[o(l,{type:"primary",style:{margin:"0 8px"},onClick:m},{default:S(()=>[...a[7]||(a[7]=[d(" 查询 ",-1)])]),_:1}),o(l,{style:{margin:"0 8px"},onClick:a[2]||(a[2]=e=>(i.value.roleName="",i.value.activity="",void m()))},{default:S(()=>[...a[8]||(a[8]=[d(" 重置 ",-1)])]),_:1})])])):E("",!0)]),_:1})])}}}),[["__scopeId","data-v-50bd989c"]]),Do=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Lo={class:"role-resource-drawer-container"},Uo={class:"flex-row-auto",style:{width:"100%",height:"calc(100% - 55px)"}},qo={class:"flex-row-none",style:{width:"310px",height:"100%","margin-right":"24px"}},Ho={class:"s-tree-title-button always-show"},$o={class:"flex-row-auto",style:{width:"100%",height:"100%"}},Wo={class:"resource-button-container"},Bo={class:"group-header"},Yo={class:"group-content"},Go={class:"drawer-body-footer"},Ko={class:"drawer-body-footer-fixed"},Qo=Tt(l({name:"RoleResource",inheritAttrs:!1,__name:"RoleResource",emits:["submitted","closed"],setup(e,{expose:t,emit:l}){const r=l,n=a(!1),i=a(""),u=a(""),c=a({}),p=a({tree:!1,button:!1,submitting:!1}),v=h("tree"),m=a([]),g=a([]),f={key:"value",title:"label"},y=a([]),b=a([]),x=a([]),w=async()=>{return p.value.tree||(p.value.tree=!0),p.value.button||(p.value.button=!0),(e={roleId:c.value.roleId},Za({url:"/resource/getResourceMenuByRole",method:"post",data:e})).then(e=>{if("0000"!==e.code)return e.message&&se.error(e.message),Promise.reject();m.value=e.result.treeNodes,g.value=e.result.treeSelect,D(()=>{v.value?.doTreeAllExpanded()}),k([...g.value])});var e},k=async e=>{p.value.button||(p.value.button=!0);const a=Wt("",e.map(e=>({roleId:c.value.roleId,menuId:e}))),t=(l=a,Za({url:"/resource/getResourceButtonByRole",method:"post",data:l})).then(e=>{if("0000"!==e.code)return e.message&&se.error(e.message),Promise.reject();y.value=e.result.map(e=>({...e,selected:e.selected.filter(a=>e.actionsOptions.some(e=>e.value===a))})),N()});var l;return t.finally(()=>{p.value.tree=!1,p.value.button=!1}),t},I=De(e=>{if(!v.value)return;const a=[...e.checkedKeys];g.value=a,k(a)}),M=e=>{const a=e.button,t=e.option;t||(a.options.every(e=>a.selected.includes(e.value))?a.selected=[]:a.selected=a.options.map(e=>e.value)),t&&(a.selected.includes(t.value)?a.selected=a.selected.filter(e=>e!==t.value):a.selected.push(t.value)),x.value=b.value.flatMap(e=>e.selected)},O=e=>e.options.every(a=>e.selected.includes(a.value)),z=e=>!e.options.every(a=>e.selected.includes(a.value))&&e.options.some(a=>e.selected.includes(a.value)),j=()=>{v.value?.doTreeAllCollapsed()},E=()=>{v.value?.doTreeAllExpanded()},N=()=>{y.value=y.value.filter(e=>e.actionsOptions&&e.actionsOptions.length>0&&g.value.some(a=>a===e.id)),y.value.sort((e,a)=>g.value.findIndex(a=>a===e.id)-g.value.findIndex(e=>e===a.id)),b.value=y.value.map(e=>{const a=v.value.pickMatchTreeNode(e.id),t=v.value.pickUpperTreeNodes(e.id);return e.actionsOptions||(e.actionsOptions=[]),e.selected||(e.selected=[]),{menu:a,titles:[...t.map(e=>e.label),a.label],options:e.actionsOptions,selected:e.selected,id:e.id}}),x.value=b.value.flatMap(e=>e.selected)},U=()=>{n.value&&(n.value=!1,i.value="",u.value="",c.value={},p.value={tree:!1,button:!1,submitting:!1},m.value=[],g.value=[],y.value=[],b.value=[],x.value=[],r("closed"))},H=()=>{const e=c.value.roleId,a=[...g.value,...x.value].join(",");p.value.submitting||(p.value.submitting=!0);const t=(l={roleId:e,resourceIds:a},Za({url:"/resource/modifyResoureInfoByRole",method:"post",data:l})).then(e=>{if("0000"!==e.code)return pe.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);pe.success({message:"系统消息",description:"修改成功"}),r("submitted"),U()});var l;return t.finally(()=>{p.value.submitting=!1}),t};return t({doClose:U,doOpen:e=>{n.value=!0,i.value="资源配置",u.value="update",c.value=e,p.value={tree:!1,button:!1,submitting:!1}}}),(e,a)=>{const t=oa,l=fe,r=ra,u=A("STree"),c=we,h=_e,y=re,x=oe,k=ye,N=Y;return T(),C("section",Lo,[o(N,{open:_(n),title:_(i),width:"100%",zIndex:1010,maskClosable:!0,bodyStyle:{height:"calc(100% - 55px)",padding:"15px"},contentWrapperStyle:{"max-width":"1180px"},onAfterOpenChange:a[3]||(a[3]=()=>_(n)&&w()),onClose:a[4]||(a[4]=e=>U())},{default:S(()=>[P("div",Uo,[P("div",qo,[o(c,{title:"菜单资源",style:{display:"flex","flex-flow":"column nowrap",width:"100%",height:"100%"},bodyStyle:{width:"100%",height:"100%",flex:"1 1 auto",padding:"15px 24px",overflow:"auto",position:"relative"},headStyle:{flex:"0 0 auto",overflow:"hidden"}},{default:S(()=>[o(u,{ref_key:"tree",ref:v,checkedKeys:_(g),"onUpdate:checkedKeys":a[0]||(a[0]=e=>R(g)?g.value=e:null),loading:_(p).tree,treeData:_(m),fieldNames:f,allowCheckedLevel:2,allowSelectedLevel:2,allowSelectToCheck:!0,allowUnSelected:!0,allowUnChecked:!0,selectable:!1,checkedMode:"link",checkable:!0,showIcon:!1,showLine:!0,tooltip:!0,onCheck:_(I)},{titleRootButton:S(()=>[P("span",Ho,[o(l,{ghost:"",size:"small",type:"primary",style:{margin:"0 3px"},onClick:L(j,["stop"])},{icon:S(()=>[o(t)]),_:1}),o(l,{ghost:"",size:"small",type:"primary",style:{margin:"0 3px"},onClick:L(E,["stop"])},{icon:S(()=>[o(r)]),_:1})])]),_:1},8,["checkedKeys","loading","treeData","onCheck"])]),_:1})]),P("div",$o,[o(c,{title:"按钮资源",style:{display:"flex","flex-flow":"column nowrap",width:"100%",height:"100%"},bodyStyle:{width:"100%",height:"100%",flex:"1 1 auto",padding:"15px 24px",overflow:"auto",position:"relative"},headStyle:{flex:"0 0 auto",overflow:"hidden"}},{default:S(()=>[o(k,{spinning:_(p).button},{default:S(()=>[P("div",Wo,[(T(!0),C(s,null,q(_(b),e=>(T(),C("div",{key:e.id,class:"resource-button-group"},[P("div",Bo,[o(h,{style:{margin:"0 6px 0 4px"},checked:O(e),indeterminate:z(e),onChange:a=>M({button:e,option:null})},null,8,["checked","indeterminate","onChange"]),o(x,null,{default:S(()=>[(T(!0),C(s,null,q(e.titles,e=>(T(),F(y,{key:e},{default:S(()=>[d(V(e),1)]),_:2},1024))),128))]),_:2},1024)]),P("div",Yo,[(T(!0),C(s,null,q(e.options,a=>(T(),C("div",{key:a.value,class:"group-checkbox"},[o(h,{title:a.label,checked:e.selected.includes(a.value),onChange:t=>M({button:e,option:a})},{default:S(()=>[d(V(a.label),1)]),_:2},1032,["title","checked","onChange"])]))),128))])]))),128))])]),_:1},8,["spinning"])]),_:1})])]),P("div",Go,[P("div",Ko,[o(l,{onClick:a[1]||(a[1]=e=>U())},{default:S(()=>[...a[5]||(a[5]=[d(" 取消 ",-1)])]),_:1}),o(l,{type:"primary",loading:_(p).submitting,onClick:a[2]||(a[2]=e=>H())},{default:S(()=>[...a[6]||(a[6]=[d(" 保存 ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-14db7c2f"]]),Xo=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"}));function Zo(e){return Za({url:"/role/modifyRoleInfo",method:"post",data:e})}const Jo={class:"role-table-container"},er={key:0},ar=["onClick"],tr=Tt(l({name:"RoleTable",inheritAttrs:!1,__name:"RoleTable",setup(e,{expose:t}){const l=a({roleName:"",activity:""}),r=a({dataFlag:[{label:"用户级",value:"0"},{label:"部门级",value:"1"},{label:"公司级",value:"2"}]}),n=h("table"),s=h("roleResource"),i=a(!1),d=a({container:{display:"inline-block",width:"auto"},inputWrapper:{display:"inline-block",maxWidth:"200px",paddingRight:"36px"},textWrapper:{display:"inline-block",width:"auto",paddingRight:"36px"}}),u=Ae({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),c=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),p=ze([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"角色名称",dataIndex:"roleName"},{title:"数据范围",dataIndex:"dataFlag"},{title:"角色状态",dataIndex:"activity"},{title:"操作",dataIndex:"action",align:"center",width:120}]),v=je({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),m=Ee(e=>{const a=Wt("",l.value,e.paginate,e.sorter);return(t=a,Za({url:"/role/getRoleInfoByPages",method:"post",data:t})).then(e=>"0000"!==e.code?(pe.error({message:"系统消息",description:e.message||"用户角色查询失败!"}),Promise.reject(e)):e);var t}),g=(e,a,t)=>{e[a]=t,n.value?.update()},f=e=>Zo(Wt("update",e)).then(e=>{if("0000"!==e.code)return pe.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);pe.success({message:"系统消息",description:"修改成功"}),y()}),y=()=>{i.value=!1,n.value?.refresh()};return t({doTableRefresh:y,queryParams:l}),(e,a)=>{const t=A("SEditCellInput"),l=A("SEditCellSelect"),h=le,y=A("STable");return T(),C("section",Jo,[o(y,{ref_key:"table",ref:n,columns:_(p),"onUpdate:columns":a[2]||(a[2]=e=>R(p)?p.value=e:null),paginate:_(v),"onUpdate:paginate":a[3]||(a[3]=e=>R(v)?v.value=e:null),columnPresetResizable:!0,loadData:_(m),bodyMinRows:!0,immediate:!0,border:!1,scroll:_(c),sticky:_(u),rowKey:"roleId"},{bodyerCell:S(({column:e,record:o,value:n,groupIndex:u})=>["serial"===e.key?(T(),C("span",er,V(u+1),1)):E("",!0),"roleName"===e.key?(T(),F(t,{key:1,status:_(i),"onUpdate:status":a[0]||(a[0]=e=>R(i)?i.value=e:null),cellStyle:_(d),text:n,onChange:a=>g(o,e.key,a.value),onConfirm:e=>f(o)},null,8,["status","cellStyle","text","onChange","onConfirm"])):E("",!0),"dataFlag"===e.key?(T(),F(l,{key:2,status:_(i),"onUpdate:status":a[1]||(a[1]=e=>R(i)?i.value=e:null),cellStyle:_(d),text:n,options:_(r).dataFlag,onChange:a=>g(o,e.key,a.value),onConfirm:e=>f(o)},null,8,["status","cellStyle","text","options","onChange","onConfirm"])):E("",!0),"activity"===e.key?(T(),F(h,{key:3,checked:n,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,a,t)=>{g(e,a,t),f(e)})(o,"activity",e)},null,8,["checked","onChange"])):E("",!0),"action"===e.key?(T(),C("a",{key:4,href:"javascript: void(0)",style:{display:"inline-block",margin:"0 7px","font-weight":"500",color:"var(--ant-primary-color)"},onClick:L(e=>(e=>{s.value?.doOpen(e)})(o),["stop"])}," 资源配置 ",8,ar)):E("",!0)]),_:1},8,["columns","paginate","loadData","scroll","sticky"]),o(Qo,{ref_key:"roleResource",ref:s,onSubmitted:()=>{}},null,512)])}}}),[["__scopeId","data-v-d1d57ad8"]]),lr=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"})),or={class:"role-form-container"},rr=Tt(l({name:"RoleForm",inheritAttrs:!1,__name:"RoleForm",props:{disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const r=h("form"),n=e,s=t(()=>n.loading),i=a({}),d=a(""),u=Ne([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"roleName",field:"roleName",label:"角色名称",props:{rows:1,autoSize:!0,placeholder:"请输入角色名称"}},{type:"ASelect",slot:"dataFlag",field:"dataFlag",label:"数据范围",props:{placeholder:"请选择数据范围",options:[{label:"用户级",value:"0"},{label:"部门级",value:"1"},{label:"公司级",value:"2"}]}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"状态信息",border:!0},{type:"ASwitch",slot:"activity",field:"activity",label:"角色状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),c=Fe({roleName:[{required:!0,message:"请输入角色名称"}],dataFlag:[{required:!0,message:"请选择数据范围"}]}),p=Ve({gutter:8,xs:24});return l({validateFields:(...e)=>r.value?.validateFields(...e).then(()=>({action:d.value,record:i.value})),resetFields:(...e)=>r.value?.resetFields(...e),doCreate:(e,a)=>{d.value=e,i.value=a},doClose:()=>{d.value="",i.value={}}}),(e,a)=>{const t=A("SForm");return T(),C("section",or,[o(t,{ref_key:"form",ref:r,modelValue:_(i),"onUpdate:modelValue":a[0]||(a[0]=e=>R(i)?i.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(s),groups:_(u),rules:_(c),grid:_(p)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-b5a206ba"]]),nr=Object.freeze(Object.defineProperty({__proto__:null,default:rr},Symbol.toStringTag,{value:"Module"})),sr={class:"role-drawer-container"},ir={class:"drawer-body-footer"},dr={class:"drawer-body-footer-fixed"},ur=l({name:"RoleDrawer",inheritAttrs:!1,__name:"RoleDrawer",emits:["submitted","closed"],setup(e,{expose:t,emit:l}){const r=l,n=h("form"),s=a(""),i=a(""),u=a({}),c=a(!1),p=a(!1),v=a(!1),m=a(!1),g=a(!1),f=()=>{n.value?.validateFields()?.then(({action:e,record:a})=>{if(!v.value){v.value=!0;const l={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?(t=Wt(e,a),Za({url:"/role/addRoleInfo",method:"post",data:t})):Zo(Wt(e,a));return o.finally(()=>{v.value=!1}),o.then(e=>{"0000"!==e.code?pe.error({message:"系统消息",description:e.message||l.error}):pe.success({message:"系统消息",description:l.success});const t="0000"!==e.code?Promise.reject(e):a;return r("submitted"),y(),t})}var t})},y=()=>{g.value&&(s.value="",i.value="",u.value={},p.value=!1,c.value=!1,v.value=!1,m.value=!1,g.value=!1,n.value?.doClose(),r("closed"))};return t({doEdit:e=>{s.value="修改角色",i.value="update",p.value=!1,c.value=!1,m.value=!1,g.value=!0,u.value=Object.assign({activity:"Y"},e),D(()=>{n.value?.doCreate("update",u.value)})},doAdd:e=>{s.value="添加角色",i.value="insert",p.value=!1,c.value=!1,m.value=!0,g.value=!0,u.value=Object.assign({activity:"Y"},e),D(()=>{n.value?.doCreate("insert",u.value)})}}),(e,a)=>{const t=fe,l=Y;return T(),C("section",sr,[o(l,{width:"400",open:_(g),title:_(s),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>y())},{default:S(()=>[o(rr,{ref_key:"form",ref:n,disabled:_(p),readonly:_(c),loading:_(v)},null,8,["disabled","readonly","loading"]),P("div",ir,[P("div",dr,[o(t,{onClick:a[0]||(a[0]=e=>y())},{default:S(()=>[...a[3]||(a[3]=[d(" 取消 ",-1)])]),_:1}),o(t,{type:"primary",loading:_(v),onClick:a[1]||(a[1]=e=>f())},{default:S(()=>[...a[4]||(a[4]=[d(" 保存 ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open","title"])])}}}),cr=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"})),pr={class:"section-container"},vr={class:"section-query-container"},mr={class:"section-table-container"},gr=Tt(l({name:"RoleManage",inheritAttrs:!1,__name:"RoleManage",setup(e){z(e=>({"70cd3262":_(i).layoutViewStyle.minHeight}));const a={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},t={flex:"0 0 auto",overflow:"hidden"},l={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},r=h("table"),n=h("query"),s=h("drawer"),i=ja(),d=(e={})=>{r.value&&(r.value.queryParams={...r.value.queryParams,...e},r.value.doTableRefresh())},u=e=>{s.value?.doEdit(e)},c=()=>{s.value?.doAdd({})};return(e,i)=>{const p=we;return T(),C("section",pr,[o(p,{style:a,headStyle:t,bodyStyle:l,bordered:!1},{default:S(()=>[P("div",vr,[o(Vo,{ref_key:"query",ref:n,onQueryTable:d,onAddRecord:c},null,512)]),P("div",mr,[o(tr,{ref_key:"table",ref:r,onEditRecord:u},null,512)])]),_:1}),o(ur,{ref_key:"drawer",ref:s,onSubmitted:d},null,512)])}}}),[["__scopeId","data-v-d8ad8ad1"]]),hr=Object.freeze(Object.defineProperty({__proto__:null,default:gr},Symbol.toStringTag,{value:"Module"})),fr={class:"user-query-container"},yr={class:"flex-row-auto"},br={class:"flex-row-none"},xr={class:"flex-row-auto"},_r={style:{flex:"1 1 auto"}},wr={style:{flex:"0 0 auto"}},kr={key:0,class:"form-inline-more"},Cr={class:"flex-row-none",style:{width:"210px"}},Tr={class:"flex-row-auto"},Sr=Tt(l({name:"UserQuery",inheritAttrs:!1,__name:"UserQuery",emits:["addRecord","queryTable"],setup(e,{emit:l}){z(e=>({"2e4a8b7e":_(c),"43a9aa4c":_(p)}));const r=a(!1),n=l,s=ke(),i=a({userNo:"",activity:""}),u=t(()=>s.componentSize?.value??"middle"),c=t(()=>"large"===u.value?"412px":"middle"===u.value?"368px":"330px"),p=t(()=>"large"===u.value?"414px":"middle"===u.value?"370px":"332px"),v=()=>{n("addRecord")},m=()=>{n("queryTable",i.value)},g=()=>{r.value=!r.value};return(e,a)=>{const t=Ze,l=fe,n=Ce,s=ge,c=Je,p=Qe,h=ae,f=te,y=me,b=j("action");return T(),C("section",fr,[o(y,{layout:"inline"},{default:S(()=>[P("div",yr,[P("div",br,[o(s,{label:"组织/部门",style:O({width:"large"===_(u)?"385px":"middle"===_(u)?"345px":"312px"})},{default:S(()=>[o(n,{value:_(i).userNo,"onUpdate:value":a[0]||(a[0]=e=>_(i).userNo=e),placeholder:"请输入用户名",allowClear:"",onSearch:m},{enterButton:S(()=>[o(l,null,{icon:S(()=>[o(t,{style:{color:"var(--ant-primary-color)"}})]),_:1})]),_:1},8,["value"])]),_:1},8,["style"])]),P("div",xr,[P("div",_r,[o(l,{onClick:g},{icon:S(()=>[o(c,{style:{color:"var(--ant-primary-color)"}})]),_:1})]),P("div",wr,[N((T(),F(l,{type:"primary",onClick:v},{icon:S(()=>[o(p)]),default:S(()=>[a[3]||(a[3]=P("span",null,"新增",-1))]),_:1})),[[b,void 0,"add"]])])])]),_(r)?(T(),C("div",kr,[P("div",Cr,[o(s,{label:"组织状态",style:{"margin-bottom":"0"}},{default:S(()=>[o(f,{value:_(i).activity,"onUpdate:value":a[1]||(a[1]=e=>_(i).activity=e),placeholder:"请选择角色状态",onChange:m},{default:S(()=>[o(h,{value:""},{default:S(()=>[...a[4]||(a[4]=[d(" 全部 ",-1)])]),_:1}),o(h,{value:"Y"},{default:S(()=>[...a[5]||(a[5]=[d(" 启用 ",-1)])]),_:1}),o(h,{value:"N"},{default:S(()=>[...a[6]||(a[6]=[d(" 禁用 ",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),P("div",Tr,[o(l,{type:"primary",style:{margin:"0 8px"},onClick:m},{default:S(()=>[...a[7]||(a[7]=[d(" 查询 ",-1)])]),_:1}),o(l,{style:{margin:"0 8px"},onClick:a[2]||(a[2]=e=>(i.value.userNo="",i.value.activity="",void m()))},{default:S(()=>[...a[8]||(a[8]=[d(" 重置 ",-1)])]),_:1})])])):E("",!0)]),_:1})])}}}),[["__scopeId","data-v-55f46bfe"]]),Pr=Object.freeze(Object.defineProperty({__proto__:null,default:Sr},Symbol.toStringTag,{value:"Module"}));function Ir(e){return Za({url:"/user/modifyUserInfo",method:"post",data:e})}const Mr={class:"user-table-container"},Or={key:0},Ar=["onClick"],Rr=Tt(l({name:"UserTable",inheritAttrs:!1,__name:"UserTable",props:{presetOptions:{}},emits:["editRecord"],setup(e,{expose:t,emit:l}){const r=a({userNo:"",activity:""}),n=e,i=l,u=h("table"),c=Ae({topHeader:0,leftFooter:!1,rightFooter:!1,bottomFooter:!1,bottomScrollbar:!0}),p=Re({scrollToFirstXOnChange:!0,scrollToFirstYOnChange:!0,overflow:"visible",x:"max-content"}),v=ze([{title:"序号",dataIndex:"serial",align:"center",maxWidth:60,width:60},{title:"用户名",dataIndex:"userNo",ellipsis:!0,width:130},{title:"用户姓名",dataIndex:"userName",ellipsis:!0,width:130},{title:"手机号",dataIndex:"mobilePhone",ellipsis:!0,width:120},{title:"职位",dataIndex:"postName"},{title:"所属组织",dataIndex:"orgId"},{title:"所属部门",dataIndex:"deptId"},{title:"可用状态",dataIndex:"activity",align:"center",minWidth:80},{title:"操作",dataIndex:"action",align:"center",width:80}]),m=je({pageNo:1,pageSize:20,totalPage:0,totalSize:0,showSizeChanger:!0,showTotal:!0,visible:!0,fixed:!0}),g=Ee(e=>{const a=Wt("",r.value,e.paginate,e.sorter);return(t=a,Za({url:"/user/getUserInfoList",method:"post",data:t})).then(e=>"0000"!==e.code?(pe.error({message:"系统消息",description:e.message||"用户查询查询失败!"}),Promise.reject(e)):e);var t}),f=(e,a,t)=>{e[a]=t,u.value?.update()},y=e=>Ir(Wt("update",e)).then(e=>{if("0000"!==e.code)return pe.error({message:"系统消息",description:"修改失败"}),Promise.reject(e);pe.success({message:"系统消息",description:"修改成功"}),b()}),b=()=>{u.value?.refresh()};return t({doTableRefresh:b,queryParams:r}),(e,a)=>{const t=le,l=A("STable");return T(),C("section",Mr,[o(l,{ref_key:"table",ref:u,columns:_(v),"onUpdate:columns":a[0]||(a[0]=e=>R(v)?v.value=e:null),paginate:_(m),"onUpdate:paginate":a[1]||(a[1]=e=>R(m)?m.value=e:null),columnPresetResizable:!0,loadData:_(g),bodyMinRows:!0,immediate:!0,border:!1,scroll:_(p),sticky:_(c),rowKey:"id"},{bodyerCell:S(({column:e,record:a,value:l,groupIndex:o})=>["serial"===e.key?(T(),C("span",Or,V(o+1),1)):E("",!0),"orgId"===e.key?(T(),C(s,{key:1},[d(V(_($t)(n.presetOptions.orgTree,l,["shortName","label"])),1)],64)):E("",!0),"deptId"===e.key?(T(),C(s,{key:2},[d(V(_($t)(n.presetOptions.deptId,l)),1)],64)):E("",!0),"activity"===e.key?(T(),F(t,{key:3,checked:l,checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关",onChange:e=>((e,a,t)=>{f(e,a,t),y(e)})(a,"activity",e)},null,8,["checked","onChange"])):E("",!0),"action"===e.key?(T(),C("a",{key:4,href:"javascript: void(0)",style:{"font-weight":"500",display:"inline-block",margin:"0 7px"},onClick:e=>(e=>{i("editRecord",e)})(a)}," 修改 ",8,Ar)):E("",!0)]),_:1},8,["columns","paginate","loadData","scroll","sticky"])])}}}),[["__scopeId","data-v-257bd7f0"]]),zr=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),jr={class:"user-drawer-form-container"},Er=Tt(l({name:"UserForm",inheritAttrs:!1,__name:"UserForm",props:{presetOptions:{},disabled:{type:Boolean},readonly:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:l}){const r=h("form"),n=e,s=t(()=>n.loading),i=a({}),d=a(""),u=Ne([{type:"AGroup",slot:"",field:"AGroup-1",label:""},{type:"AInputTextarea",slot:"userNo",field:"userNo",label:"用户名",props:{rows:1,autoSize:!0,placeholder:"请输入用户名"}},{type:"AInputPassword",slot:"password",field:"password",label:"用户密码",props:{placeholder:"请输入用户密码"}},{type:"AInput",slot:"userName",field:"userName",label:"用户姓名",props:{placeholder:"请输入用户姓名"}},{type:"AInput",slot:"mobilePhone",field:"mobilePhone",label:"手机号码",props:{placeholder:"请输入手机号码"}},{type:"AInput",slot:"idCard",field:"idCard",label:"身份证号",props:{placeholder:"请输入身份证号"}},{type:"ATreeSelect",slot:"orgId",field:"orgId",label:"所属组织",props:{popupClassName:"text-ellipsis",dropdownStyle:{maxHeight:"300px"},allowClear:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,treeNodeFilterProp:"label",placeholder:"请选择所属组织",treeData:n.presetOptions.orgTree}},{type:"ASelect",slot:"deptId",field:"deptId",label:"所属部门",props:{allowClear:!0,placeholder:"请选择所属部门",options:n.presetOptions.deptId}},{type:"ASelect",slot:"roleId",field:"roleId",label:"所属角色",props:{mode:"multiple",placeholder:"请选择所属角色",allowClear:!0,fieldNames:{label:"roleName",value:"roleId"},options:n.presetOptions.roleId}},{type:"AGroup",slot:"AGroup-2",field:"AGroup-2",label:"状态信息",border:!0},{type:"ASwitch",slot:"activity",field:"activity",label:"用户状态",props:{checkedValue:"Y",unCheckedValue:"N",checkedChildren:"开",unCheckedChildren:"关"}}]),c=Fe({userNo:[{required:!0,message:"请输入用户名"}],password:Le.password({message:"请输入用户密码",validator:"用户密码过短",pattern:/.{6,}/,required:!0}),userName:[{required:!0,message:"请输入用户姓名"}],mobilePhone:[{required:!0,message:"请输入手机号码"}],idCard:[{required:!0,message:"请输入身份证号"}],orgId:[{required:!0,message:"请选择所属组织"}],roleId:[{required:!0,message:"请选择所属角色"}]}),p=Ve({gutter:8,xs:24});return l({validateFields:(...e)=>r.value?.validateFields(...e).then(()=>({action:d.value,record:i.value})),resetFields:(...e)=>r.value?.resetFields(...e),doCreate:(e,a)=>{d.value=e,i.value=a},doClose:()=>{d.value="",i.value={}}}),(e,a)=>{const t=A("SForm");return T(),C("section",jr,[o(t,{ref_key:"form",ref:r,modelValue:_(i),"onUpdate:modelValue":a[0]||(a[0]=e=>R(i)?i.value=e:null),disabled:e.disabled,readonly:e.readonly,spinning:_(s),groups:_(u),rules:_(c),grid:_(p)},null,8,["modelValue","disabled","readonly","spinning","groups","rules","grid"])])}}}),[["__scopeId","data-v-eeb56367"]]),Nr=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"})),Fr={class:"user-drawer-container"},Vr={class:"drawer-body-footer"},Dr={class:"drawer-body-footer-fixed"},Lr=l({name:"UserDrawer",inheritAttrs:!1,__name:"UserDrawer",props:{presetOptions:{}},emits:["submitted","closed"],setup(e,{expose:t,emit:l}){const r=e,n=l,s=h("form"),i=a(""),u=a(""),c=a({}),p=a(!1),v=a(!1),m=a(!1),g=a(!1),f=a(!1),y=()=>{s.value?.validateFields()?.then(({action:e,record:a})=>{if(!m.value){m.value=!0;const l={error:"insert"===e?"新增失败!":"更新失败!",success:"insert"===e?"新增成功!":"更新成功!"},o="insert"===e?(t=Wt(e,a),Za({url:"/user/addUserInfo",method:"post",data:t})):Ir(Wt(e,a));return o.finally(()=>{m.value=!1}),o.then(e=>{"0000"!==e.code?pe.error({message:"系统消息",description:e.message||l.error}):pe.success({message:"系统消息",description:l.success});const t="0000"!==e.code?Promise.reject(e):a;return n("submitted"),b(),t})}var t})},b=()=>{f.value&&(i.value="",u.value="",c.value={},v.value=!1,p.value=!1,m.value=!1,g.value=!1,f.value=!1,s.value?.doClose(),n("closed"))};return t({doEdit:e=>{i.value="修改用户",u.value="update",v.value=!1,p.value=!1,g.value=!1,f.value=!0,c.value=Object.assign({activity:"Y"},e),D(()=>{s.value?.doCreate("update",c.value)})},doAdd:e=>{i.value="新增用户",u.value="insert",v.value=!1,p.value=!1,g.value=!0,f.value=!0,c.value=Object.assign({activity:"Y"},e),D(()=>{s.value?.doCreate("insert",c.value)})}}),(e,a)=>{const t=fe,l=Y;return T(),C("section",Fr,[o(l,{width:"400",open:_(f),title:_(i),zIndex:1010,forceRender:!1,maskClosable:!0,destroyOnClose:!0,placement:"right",onClose:a[2]||(a[2]=e=>b())},{default:S(()=>[o(Er,{ref_key:"form",ref:s,presetOptions:r.presetOptions,disabled:_(v),readonly:_(p),loading:_(m)},null,8,["presetOptions","disabled","readonly","loading"]),P("div",Vr,[P("div",Dr,[o(t,{onClick:a[0]||(a[0]=e=>b())},{default:S(()=>[...a[3]||(a[3]=[d(" 取消 ",-1)])]),_:1}),o(t,{type:"primary",loading:_(m),onClick:a[1]||(a[1]=e=>y())},{default:S(()=>[...a[4]||(a[4]=[d(" 保存 ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open","title"])])}}}),Ur=Object.freeze(Object.defineProperty({__proto__:null,default:Lr},Symbol.toStringTag,{value:"Module"})),qr={class:"section-container"},Hr={class:"section-query-container"},$r={class:"section-table-container"},Wr=Tt(l({name:"UserManage",inheritAttrs:!1,__name:"UserManage",setup(e){z(e=>({"69393a1a":_(u).layoutViewStyle.minHeight}));const t=a({orgTree:[],deptId:[],roleId:[]}),l={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",width:"100%",height:"100%",overflow:"hidden"},r={flex:"0 0 auto",overflow:"hidden"},n={display:"flex",flexFlow:"column nowrap",flex:"1 1 auto",padding:"20px 24px 6px",overflow:"hidden",position:"relative"},s=h("table"),i=h("query"),d=h("drawer"),u=ja(),c=(e={})=>{s.value&&(s.value.queryParams={...s.value.queryParams,...e},s.value.doTableRefresh())},p=e=>{d.value?.doEdit(e)},v=()=>{d.value?.doAdd({})};var m;return Tl({id:"orgTree"}).then(e=>{if("0000"!==e.code)return Promise.reject();t.value.orgTree.splice(0),t.value.orgTree.push(...e.result)}),(m={id:"dept",sqlParams:{orgId:"",isAll:"1"}},Za({url:"/base/getOptionById",method:"post",data:m})).then(e=>{if("0000"!==e.code)return Promise.reject();t.value.deptId.splice(0),t.value.deptId.push(...e.result)}),function(e){return Za({url:"/role/getRoleInfoList",method:"post",data:e})}({activity:"Y"}).then(e=>{if("0000"!==e.code)return Promise.reject();t.value.roleId.splice(0),t.value.roleId.push(...e.result)}),(e,a)=>{const u=we;return T(),C("section",qr,[o(u,{style:l,headStyle:r,bodyStyle:n,bordered:!1},{default:S(()=>[P("div",Hr,[o(Sr,{ref_key:"query",ref:i,onQueryTable:c,onAddRecord:v},null,512)]),P("div",$r,[o(Rr,{ref_key:"table",ref:s,presetOptions:_(t),onEditRecord:p},null,8,["presetOptions"])])]),_:1}),o(Lr,{ref_key:"drawer",ref:d,presetOptions:_(t),onSubmitted:c},null,8,["presetOptions"])])}}}),[["__scopeId","data-v-f59c922e"]]),Br=Object.freeze(Object.defineProperty({__proto__:null,default:Wr},Symbol.toStringTag,{value:"Module"}));export{La as A,it as D,qt as L,Rl as O,dt as P,Io as R,$a as U,Ha as _,Da as a,wt as b,Wa as c,st as d,gt as e,vt as f,_t as g,nt as h,ct as i,lt as j,Ja as k,kt as l,Fa as m,Va as n,Pt as o,Ot as p,zt as q,Za as r,hr as s,Br as t,ja as u};
