import{A as e,B as t,D as s,M as r,E as n,G as o,H as i,I as a,J as c,L as l,K as u,O as h}from"./vendors-all-BBoDmint.js";function d(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}function p(e,t){return Object.entries(t).reduce((e,[t,s])=>{const r=e[t];return Array.isArray(r)&&Array.isArray(s)?(e[t]=r.concat(s),e):d(r)&&d(s)?(e[t]=p(r,s),e):(e[t]=s,e)},Object.assign({},e))}const f={formatMessage:function(t,...s){return`[MSW] ${e(t,...s)}`},warn:function(e,...t){},error:function(e,...t){}};class g extends Error{constructor(e){super(e),this.name="InternalError"}}const m=/[/\\]msw[/\\]src[/\\](.+)/,y=/(node_modules)?[/\\]lib[/\\](core|browser|node|native|iife)[/\\]|^[^/\\]*$/;class v{static cache=new WeakMap;__kind;info;isUsed;resolver;resolverIterator;resolverIteratorResult;options;constructor(e){this.resolver=e.resolver,this.options=e.options;const t=function(e){const t=e.stack;if(!t)return;const s=t.split("\n").slice(1).find(e=>!(m.test(e)||y.test(e)));if(!s)return;return s.replace(/\s*at [^()]*\(([^)]+)\)/,"$1").replace(/^@/,"")}(new Error);this.info={...e.info,callFrame:t},this.isUsed=!1,this.__kind="RequestHandler"}async parse(e){return{}}async test(e){const t=await this.parse({request:e.request,resolutionContext:e.resolutionContext});return this.predicate({request:e.request,parsedResult:t,resolutionContext:e.resolutionContext})}extendResolverArgs(e){return{}}cloneRequestOrGetFromCache(e){const t=v.cache.get(e);if(void 0!==t)return t;const s=e.clone();return v.cache.set(e,s),s}async run(e){if(this.isUsed&&this.options?.once)return null;const t=this.cloneRequestOrGetFromCache(e.request),s=await this.parse({request:e.request,resolutionContext:e.resolutionContext});if(!(await this.predicate({request:e.request,parsedResult:s,resolutionContext:e.resolutionContext})))return null;if(this.isUsed&&this.options?.once)return null;this.isUsed=!0;const r=this.wrapResolver(this.resolver)({...this.extendResolverArgs({request:e.request,parsedResult:s}),requestId:e.requestId,request:e.request}).catch(e=>{if(e instanceof Response)return e;throw e}),n=await r;return this.createExecutionResult({request:t,requestId:e.requestId,response:n,parsedResult:s})}wrapResolver(e){return async t=>{if(!this.resolverIterator){const r=await e(t);if(!(s=r)||!Reflect.has(s,Symbol.iterator)&&!Reflect.has(s,Symbol.asyncIterator))return r;this.resolverIterator=Symbol.iterator in r?r[Symbol.iterator]():r[Symbol.asyncIterator]()}var s;this.isUsed=!1;const{done:r,value:n}=await this.resolverIterator.next(),o=await n;return o&&(this.resolverIteratorResult=o.clone()),r?(this.isUsed=!0,this.resolverIteratorResult?.clone()):o}}createExecutionResult(e){return{handler:this,request:e.request,requestId:e.requestId,response:e.response,parsedResult:e.parsedResult}}}function b(e){const t=e instanceof URL?e:new URL(e);return"undefined"!=typeof location&&t.origin===location.origin?t.pathname:t.origin+t.pathname}async function w(e,t="warn"){const s=new URL(e.url),r=b(s)+s.search,n="HEAD"===e.method||"GET"===e.method?null:await e.clone().text(),o=`intercepted a request without a matching request handler:${`\n\n  â€¢ ${e.method} ${r}\n\n${n?`  â€¢ Request body: ${n}\n\n`:""}`}If you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/http/intercepting-requests`;function i(e){switch(e){case"error":throw f.error("Error: %s",o),new g(f.formatMessage('Cannot bypass a request when using the "error" strategy for the "onUnhandledRequest" option.'));case"warn":f.warn("Warning: %s",o);break;case"bypass":break;default:throw new g(f.formatMessage('Failed to react to an unhandled request: unknown strategy "%s". Please provide one of the supported strategies ("bypass", "warn", "error") or a custom callback function as the value of the "onUnhandledRequest" option.',e))}}"function"!=typeof t?function(e){const t=new URL(e.url);return"file:"===t.protocol||!!/(fonts\.googleapis\.com)/.test(t.hostname)||!!/node_modules/.test(t.pathname)||!!t.pathname.includes("@vite")||/\.(s?css|less|m?jsx?|m?tsx?|html|ttf|otf|woff|woff2|eot|gif|jpe?g|png|avif|webp|svg|mp4|webm|ogg|mov|mp3|wav|ogg|flac|aac|pdf|txt|csv|json|xml|md|zip|tar|gz|rar|7z)$/i.test(t.pathname)}(e)||i(t):t(e,{warning:i.bind(null,"warn"),error:i.bind(null,"error")})}const E=new class{#e="__msw-cookie-store__";#t;#s;constructor(){t()||s("undefined"!=typeof localStorage,"Failed to create a CookieStore: `localStorage` is not available in this environment. This is likely an issue with your environment, which has been detected as browser (or browser-like) environment and must implement global browser APIs correctly."),this.#s=new r,this.#s.idx=this.getCookieStoreIndex(),this.#t=new n(this.#s)}getCookies(e){return this.#t.getCookiesSync(e)}async setCookie(e,t){await this.#t.setCookie(e,t),this.persist()}getCookieStoreIndex(){if("undefined"==typeof localStorage||"function"!=typeof localStorage.getItem)return{};const e=localStorage.getItem(this.#e);if(null==e)return{};const t=function(e){try{return JSON.parse(e)}catch{return}}(e);if(null==t)return{};const s={};for(const r of t){const e=o.fromJSON(r);null!=e&&null!=e.domain&&null!=e.path&&(s[e.domain]||={},s[e.domain][e.path]||={},s[e.domain][e.path][e.key]=e)}return s}persist(){if("undefined"==typeof localStorage||"function"!=typeof localStorage.setItem)return;const e=[],{idx:t}=this.#s;for(const s in t)for(const r in t[s])for(const n in t[s][r])e.push(t[s][r][n].toJSON());localStorage.setItem(this.#e,JSON.stringify(e))}};var S,k,q=Object.create,R=Object.defineProperty,x=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,T=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty,P=(e,t)=>function(){return t||(0,e[L(e)[0]])((t={exports:{}}).exports,t),t.exports},O=P({"node_modules/.pnpm/statuses@2.0.2/node_modules/statuses/codes.json"(e,t){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}}}),I=P({"node_modules/.pnpm/statuses@2.0.2/node_modules/statuses/index.js"(e,t){var s,r,n=O();function o(e){if(!Object.prototype.hasOwnProperty.call(i.message,e))throw new Error("invalid status code: "+e);return i.message[e]}function i(e){if("number"==typeof e)return o(e);if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);return isNaN(t)?function(e){var t=e.toLowerCase();if(!Object.prototype.hasOwnProperty.call(i.code,t))throw new Error('invalid status message: "'+e+'"');return i.code[t]}(e):o(t)}t.exports=i,i.message=n,i.code=(s=n,r={},Object.keys(s).forEach(function(e){var t=s[e],n=Number(e);r[t.toLowerCase()]=n}),r),i.codes=function(e){return Object.keys(e).map(function(e){return Number(e)})}(n),i.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},i.empty={204:!0,205:!0,304:!0},i.retry={502:!0,503:!0,504:!0}}}),j=(S=I(),k=null!=S?q(T(S)):{},((e,t,s,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of L(t))C.call(e,n)||n===s||R(e,n,{get:()=>t[n],enumerable:!(r=x(t,n))||r.enumerable});return e})(R(k,"default",{value:S,enumerable:!0}),S)),A=j.default||j;A.message;var M=A;const{message:N}=M,W=Symbol("kSetCookie");function D(e={}){const t=e?.status||200,s=e?.statusText||N[t]||"",r=new Headers(e?.headers);return{...e,headers:r,status:t,statusText:s}}async function U(e,t,s,r,n,o){if(n.emit("request:start",{request:e,requestId:t}),e.headers.get("accept")?.includes("msw/passthrough"))return n.emit("request:end",{request:e,requestId:t}),void o?.onPassthroughResponse?.(e);const[i,c]=await a(()=>(async({request:e,requestId:t,handlers:s,resolutionContext:r})=>{let n=null,o=null;for(const i of s)if(o=await i.run({request:e,requestId:t,resolutionContext:r}),null!==o&&(n=i),o?.response)break;return n?{handler:n,parsedResult:o?.parsedResult,response:o?.response}:null})({request:e,requestId:t,handlers:s,resolutionContext:o?.resolutionContext}));if(i)throw n.emit("unhandledException",{error:i,request:e,requestId:t}),i;if(!c)return await w(e,r.onUnhandledRequest),n.emit("request:unhandled",{request:e,requestId:t}),n.emit("request:end",{request:e,requestId:t}),void o?.onPassthroughResponse?.(e);const{response:l}=c;if(!l)return n.emit("request:end",{request:e,requestId:t}),void o?.onPassthroughResponse?.(e);if(302===l.status&&"passthrough"===l.headers.get("x-msw-intention"))return n.emit("request:end",{request:e,requestId:t}),void o?.onPassthroughResponse?.(e);await async function(e,t){const s=Reflect.get(t,W);s&&await E.setCookie(s,e.url)}(e,l),n.emit("request:match",{request:e,requestId:t});const u=c;return o?.onMockedResponse?.(l,u),n.emit("request:end",{request:e,requestId:t}),l}function H(e){return t=>null!=t&&"object"==typeof t&&"__kind"in t&&t.__kind===e}class _{subscriptions=[];dispose(){let e;for(;e=this.subscriptions.shift();)e()}}class ${constructor(e){this.initialHandlers=e,this.handlers=[...e]}handlers;prepend(e){this.handlers.unshift(...e)}reset(e){this.handlers=e.length>0?[...e]:[...this.initialHandlers]}currentHandlers(){return this.handlers}}class G extends _{handlersController;emitter;publicEmitter;events;constructor(...e){super(),s(this.validateHandlers(e),f.formatMessage("Failed to apply given request handlers: invalid input. Did you forget to spread the request handlers Array?")),this.handlersController=new $(e),this.emitter=new c,this.publicEmitter=new c,function(e,t){const s=e.emit;if(s._isPiped)return;const r=function(e,...r){return t.emit(e,...r),s.call(this,e,...r)};r._isPiped=!0,e.emit=r}(this.emitter,this.publicEmitter),this.events=this.createLifeCycleEvents(),this.subscriptions.push(()=>{this.emitter.removeAllListeners(),this.publicEmitter.removeAllListeners()})}validateHandlers(e){return e.every(e=>!Array.isArray(e))}use(...e){s(this.validateHandlers(e),f.formatMessage('Failed to call "use()" with the given request handlers: invalid input. Did you forget to spread the array of request handlers?')),this.handlersController.prepend(e)}restoreHandlers(){this.handlersController.currentHandlers().forEach(e=>{"isUsed"in e&&(e.isUsed=!1)})}resetHandlers(...e){this.handlersController.reset(e)}listHandlers(){return function(e){const t=[...e];return Object.freeze(t),t}(this.handlersController.currentHandlers())}createLifeCycleEvents(){return{on:(...e)=>this.publicEmitter.on(...e),removeListener:(...e)=>this.publicEmitter.removeListener(...e),removeAllListeners:(...e)=>this.publicEmitter.removeAllListeners(...e)}}}function B(e){return globalThis[e]||void 0}var F=class{constructor(e){this.symbol=e,this.readyState="INACTIVE",this.emitter=new c,this.subscriptions=[],this.logger=new l(e.description),this.emitter.setMaxListeners(0),this.logger.info("constructing the interceptor...")}checkEnvironment(){return!0}apply(){const e=this.logger.extend("apply");if(e.info("applying the interceptor..."),"APPLIED"===this.readyState)return void e.info("intercepted already applied!");if(!this.checkEnvironment())return void e.info("the interceptor cannot be applied in this environment!");this.readyState="APPLYING";const t=this.getInstance();if(t)return e.info("found a running instance, reusing..."),this.on=(s,r)=>(e.info('proxying the "%s" listener',s),t.emitter.addListener(s,r),this.subscriptions.push(()=>{t.emitter.removeListener(s,r),e.info('removed proxied "%s" listener!',s)}),this),void(this.readyState="APPLIED");e.info("no running instance found, setting up a new instance..."),this.setup(),this.setInstance(),this.readyState="APPLIED"}setup(){}on(e,t){const s=this.logger.extend("on");return"DISPOSING"===this.readyState||"DISPOSED"===this.readyState?(s.info("cannot listen to events, already disposed!"),this):(s.info('adding "%s" event listener:',e,t),this.emitter.on(e,t),this)}once(e,t){return this.emitter.once(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}dispose(){const e=this.logger.extend("dispose");if("DISPOSED"!==this.readyState)if(e.info("disposing the interceptor..."),this.readyState="DISPOSING",this.getInstance()){if(this.clearInstance(),e.info("global symbol deleted:",B(this.symbol)),this.subscriptions.length>0){e.info("disposing of %d subscriptions...",this.subscriptions.length);for(const e of this.subscriptions)e();this.subscriptions=[],e.info("disposed of all subscriptions!",this.subscriptions.length)}this.emitter.removeAllListeners(),e.info("destroyed the listener!"),this.readyState="DISPOSED"}else e.info("no interceptors running, skipping dispose...");else e.info("cannot dispose, already disposed!")}getInstance(){var e;const t=B(this.symbol);return this.logger.info("retrieved global instance:",null==(e=null==t?void 0:t.constructor)?void 0:e.name),t}setInstance(){var e,t;e=this.symbol,t=this,globalThis[e]=t,this.logger.info("set global instance!",this.symbol.description)}clearInstance(){var e;e=this.symbol,delete globalThis[e],this.logger.info("cleared global instance!",this.symbol.description)}};function z(e,t){return Object.defineProperties(t,{target:{value:e,enumerable:!0,writable:!0},currentTarget:{value:e,enumerable:!0,writable:!0}}),t}var X=Symbol("kCancelable"),K=Symbol("kDefaultPrevented"),J=class extends MessageEvent{constructor(e,t){super(e,t),this[X]=!!t.cancelable,this[K]=!1}get cancelable(){return this[X]}set cancelable(e){this[X]=e}get defaultPrevented(){return this[K]}set defaultPrevented(e){this[K]=e}preventDefault(){this.cancelable&&!this[K]&&(this[K]=!0)}},V=class extends Event{constructor(e,t={}){super(e,t),this.code=void 0===t.code?0:t.code,this.reason=void 0===t.reason?"":t.reason,this.wasClean=void 0!==t.wasClean&&t.wasClean}},Y=class extends V{constructor(e,t={}){super(e,t),this[X]=!!t.cancelable,this[K]=!1}get cancelable(){return this[X]}set cancelable(e){this[X]=e}get defaultPrevented(){return this[K]}set defaultPrevented(e){this[K]=e}preventDefault(){this.cancelable&&!this[K]&&(this[K]=!0)}},Q=Symbol("kEmitter"),Z=Symbol("kBoundListener"),ee=class{constructor(e,t){this.socket=e,this.transport=t,this.id=Math.random().toString(16).slice(2),this.url=new URL(e.url),this[Q]=new EventTarget,this.transport.addEventListener("outgoing",e=>{const t=z(this.socket,new J("message",{data:e.data,origin:e.origin,cancelable:!0}));this[Q].dispatchEvent(t),t.defaultPrevented&&e.preventDefault()}),this.transport.addEventListener("close",e=>{this[Q].dispatchEvent(z(this.socket,new V("close",e)))})}addEventListener(e,t,s){if(!Reflect.has(t,Z)){const e=t.bind(this.socket);Object.defineProperty(t,Z,{value:e,enumerable:!1,configurable:!1})}this[Q].addEventListener(e,Reflect.get(t,Z),s)}removeEventListener(e,t,s){this[Q].removeEventListener(e,Reflect.get(t,Z),s)}send(e){this.transport.send(e)}close(e,t){this.transport.close(e,t)}},te="InvalidAccessError: close code out of user configurable range",se=Symbol("kPassthroughPromise"),re=Symbol("kOnSend"),ne=Symbol("kClose"),oe=class extends EventTarget{constructor(e,t){super(),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null,this.url=e.toString(),this.protocol="",this.extensions="",this.binaryType="blob",this.readyState=this.CONNECTING,this.bufferedAmount=0,this[se]=new u,queueMicrotask(async()=>{await this[se]||(this.protocol="string"==typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"",this.readyState===this.CONNECTING&&(this.readyState=this.OPEN,this.dispatchEvent(z(this,new Event("open")))))})}set onopen(e){this.removeEventListener("open",this._onopen),this._onopen=e,null!==e&&this.addEventListener("open",e)}get onopen(){return this._onopen}set onmessage(e){this.removeEventListener("message",this._onmessage),this._onmessage=e,null!==e&&this.addEventListener("message",e)}get onmessage(){return this._onmessage}set onerror(e){this.removeEventListener("error",this._onerror),this._onerror=e,null!==e&&this.addEventListener("error",e)}get onerror(){return this._onerror}set onclose(e){this.removeEventListener("close",this._onclose),this._onclose=e,null!==e&&this.addEventListener("close",e)}get onclose(){return this._onclose}send(e){if(this.readyState===this.CONNECTING)throw this.close(),new DOMException("InvalidStateError");this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&(this.bufferedAmount+=function(e){if("string"==typeof e)return e.length;if(e instanceof Blob)return e.size;return e.byteLength}(e),queueMicrotask(()=>{var t;this.bufferedAmount=0,null==(t=this[re])||t.call(this,e)}))}close(e=1e3,t){s(e,te),s(1e3===e||e>=3e3&&e<=4999,te),this[ne](e,t)}[ne](e=1e3,t,s=!0){this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&(this.readyState=this.CLOSING,queueMicrotask(()=>{this.readyState=this.CLOSED,this.dispatchEvent(z(this,new V("close",{code:e,reason:t,wasClean:s}))),this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null}))}addEventListener(e,t,s){return super.addEventListener(e,t,s)}removeEventListener(e,t,s){return super.removeEventListener(e,t,s)}};oe.CONNECTING=0,oe.OPEN=1,oe.CLOSING=2,oe.CLOSED=3;var ie=Symbol("kEmitter"),ae=Symbol("kBoundListener"),ce=Symbol("kSend"),le=class{constructor(e,t,s){this.client=e,this.transport=t,this.createConnection=s,this[ie]=new EventTarget,this.mockCloseController=new AbortController,this.realCloseController=new AbortController,this.transport.addEventListener("outgoing",e=>{void 0!==this.realWebSocket&&queueMicrotask(()=>{e.defaultPrevented||this[ce](e.data)})}),this.transport.addEventListener("incoming",this.handleIncomingMessage.bind(this))}get socket(){return s(this.realWebSocket,'Cannot access "socket" on the original WebSocket server object: the connection is not open. Did you forget to call `server.connect()`?'),this.realWebSocket}connect(){s(!this.realWebSocket||this.realWebSocket.readyState!==WebSocket.OPEN,'Failed to call "connect()" on the original WebSocket instance: the connection already open');const e=this.createConnection();e.binaryType=this.client.binaryType,e.addEventListener("open",e=>{this[ie].dispatchEvent(z(this.realWebSocket,new Event("open",e)))},{once:!0}),e.addEventListener("message",e=>{this.transport.dispatchEvent(z(this.realWebSocket,new MessageEvent("incoming",{data:e.data,origin:e.origin})))}),this.client.addEventListener("close",e=>{this.handleMockClose(e)},{signal:this.mockCloseController.signal}),e.addEventListener("close",e=>{this.handleRealClose(e)},{signal:this.realCloseController.signal}),e.addEventListener("error",()=>{const t=z(e,new Event("error",{cancelable:!0}));this[ie].dispatchEvent(t),t.defaultPrevented||this.client.dispatchEvent(z(this.client,new Event("error")))}),this.realWebSocket=e}addEventListener(e,t,s){if(!Reflect.has(t,ae)){const e=t.bind(this.client);Object.defineProperty(t,ae,{value:e,enumerable:!1})}this[ie].addEventListener(e,Reflect.get(t,ae),s)}removeEventListener(e,t,s){this[ie].removeEventListener(e,Reflect.get(t,ae),s)}send(e){this[ce](e)}[ce](e){const{realWebSocket:t}=this;s(t,'Failed to call "server.send()" for "%s": the connection is not open. Did you forget to call "server.connect()"?',this.client.url),t.readyState!==WebSocket.CLOSING&&t.readyState!==WebSocket.CLOSED&&(t.readyState!==WebSocket.CONNECTING?t.send(e):t.addEventListener("open",()=>{t.send(e)},{once:!0}))}close(){const{realWebSocket:e}=this;s(e,'Failed to close server connection for "%s": the connection is not open. Did you forget to call "server.connect()"?',this.client.url),this.realCloseController.abort(),e.readyState!==WebSocket.CLOSING&&e.readyState!==WebSocket.CLOSED&&(e.close(),queueMicrotask(()=>{this[ie].dispatchEvent(z(this.realWebSocket,new Y("close",{code:1e3,cancelable:!0})))}))}handleIncomingMessage(e){const t=z(e.target,new J("message",{data:e.data,origin:e.origin,cancelable:!0}));this[ie].dispatchEvent(t),t.defaultPrevented||this.client.dispatchEvent(z(this.client,new MessageEvent("message",{data:e.data,origin:e.origin})))}handleMockClose(e){this.realWebSocket&&this.realWebSocket.close()}handleRealClose(e){this.mockCloseController.abort();const t=z(this.realWebSocket,new Y("close",{code:e.code,reason:e.reason,wasClean:e.wasClean,cancelable:!0}));this[ie].dispatchEvent(t),t.defaultPrevented||this.client[ne](e.code,e.reason)}},ue=class extends EventTarget{constructor(e){super(),this.socket=e,this.socket.addEventListener("close",e=>{this.dispatchEvent(z(this.socket,new V("close",e)))}),this.socket[re]=e=>{this.dispatchEvent(z(this.socket,new J("outgoing",{data:e,origin:this.socket.url,cancelable:!0})))}}addEventListener(e,t,s){return super.addEventListener(e,t,s)}dispatchEvent(e){return super.dispatchEvent(e)}send(e){queueMicrotask(()=>{if(this.socket.readyState===this.socket.CLOSING||this.socket.readyState===this.socket.CLOSED)return;const t=()=>{this.socket.dispatchEvent(z(this.socket,new MessageEvent("message",{data:e,origin:this.socket.url})))};this.socket.readyState===this.socket.CONNECTING?this.socket.addEventListener("open",()=>{t()},{once:!0}):t()})}close(e,t){this.socket[ne](e,t)}},he=class extends F{constructor(){super(he.symbol)}checkEnvironment(){return function(e){const t=Object.getOwnPropertyDescriptor(globalThis,e);return!(void 0===t||"function"==typeof t.get&&void 0===t.get()||void 0===t.get&&null==t.value||void 0===t.set&&!t.configurable)}("WebSocket")}setup(){const e=Object.getOwnPropertyDescriptor(globalThis,"WebSocket"),t=new Proxy(globalThis.WebSocket,{construct:(e,t,s)=>{const[r,n]=t,o=()=>Reflect.construct(e,t,s),i=new oe(r,n),a=new ue(i);return queueMicrotask(async()=>{try{const e=new le(i,a,o),t=this.emitter.listenerCount("connection")>0;await async function(e,t,...s){const r=e.listeners(t);if(0!==r.length)for(const n of r)await n.apply(e,s)}(this.emitter,"connection",{client:new ee(i,a),server:e,info:{protocols:n}}),t?i[se].resolve(!1):(i[se].resolve(!0),e.connect(),e.addEventListener("open",()=>{i.dispatchEvent(z(i,new Event("open"))),e.realWebSocket&&(i.protocol=e.realWebSocket.protocol)}))}catch(e){e instanceof Error&&(i.dispatchEvent(new Event("error")),i.readyState!==WebSocket.CLOSING&&i.readyState!==WebSocket.CLOSED&&i[ne](1011,e.message,!1))}}),i}});Object.defineProperty(globalThis,"WebSocket",{value:t,configurable:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis,"WebSocket",e)})}},de=he;de.symbol=Symbol("websocket");const pe=new de;function fe(e){return e instanceof Blob?e.size:d(e)&&"byteLength"in e?e.byteLength:new Blob([e]).size}function ge(e){return e.length<=24?e:`${e.slice(0,24)}â€¦`}async function me(e){if(e instanceof Blob){return`Blob(${ge(await e.text())})`}if(d(e)){return`ArrayBuffer(${ge((new TextDecoder).decode(e))})`}return ge(e)}function ye(e){const{client:t,server:s}=e;!function(e){b(e.url)}(t),t.addEventListener("message",e=>{!async function(e){fe(e.data),await me(e.data),e.defaultPrevented}(e)}),t.addEventListener("close",e=>{!function(e){const t=e.target;b(t.url)}(e)}),t.socket.addEventListener("error",e=>{!function(e){const t=e.target;b(t.url)}(e)}),t.send=new Proxy(t.send,{apply(e,s,r){const[n]=r,o=new MessageEvent("message",{data:n});return Object.defineProperties(o,{currentTarget:{enumerable:!0,writable:!1,value:t.socket},target:{enumerable:!0,writable:!1,value:t.socket}}),queueMicrotask(()=>{!async function(e){fe(e.data),await me(e.data)}(o)}),Reflect.apply(e,s,r)}}),s.addEventListener("open",()=>{s.addEventListener("message",e=>{!async function(e){fe(e.data),await me(e.data),e.defaultPrevented}(e)})},{once:!0}),s.send=new Proxy(s.send,{apply(e,t,r){const[n]=r,o=new MessageEvent("message",{data:n});return Object.defineProperties(o,{currentTarget:{enumerable:!0,writable:!1,value:s.socket},target:{enumerable:!0,writable:!1,value:s.socket}}),async function(e){fe(e.data),await me(e.data)}(o),Reflect.apply(e,t,r)}})}var ve={},be=/(%?)(%([sdijo]))/g;function we(e,...t){if(0===t.length)return e;let s=0,r=e.replace(be,(e,r,n,o)=>{const i=function(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":{if("string"==typeof e)return e;const t=JSON.stringify(e);return"{}"===t||"[]"===t||/^\[object .+?\]$/.test(t)?e:t}}}(t[s],o);return r?e:(s++,i)});return s<t.length&&(r+=` ${t.slice(s).join(" ")}`),r=r.replace(/%{2,2}/g,"%"),r}var Ee=class extends Error{constructor(e,...t){super(e),this.message=e,this.name="Invariant Violation",this.message=we(e,...t),function(e){if(!e.stack)return;const t=e.stack.split("\n");t.splice(1,2),e.stack=t.join("\n")}(this)}},Se=(e,t,...s)=>{if(!e)throw new Ee(t,...s)};function ke(){if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)return!0;if("undefined"!=typeof process){const e=process.type;return"renderer"!==e&&"worker"!==e&&!(!process.versions||!process.versions.node)}return!1}Se.as=(e,t,s,...r)=>{if(!t){const t=0===r.length?s:we(s,...r);let o;try{o=Reflect.construct(e,[t])}catch(n){o=e(t)}throw o}};var qe=class extends Promise{#r;resolve;reject;constructor(e=null){const t=function(){const e=(t,s)=>{e.state="pending",e.resolve=s=>{if("pending"===e.state)return e.result=s,t(s instanceof Promise?s:Promise.resolve(s).then(t=>(e.state="fulfilled",t)))},e.reject=t=>{if("pending"===e.state)return queueMicrotask(()=>{e.state="rejected"}),s(e.rejectionReason=t)}};return e}();super((s,r)=>{t(s,r),e?.(t.resolve,t.reject)}),this.#r=t,this.resolve=this.#r.resolve,this.reject=this.#r.reject}get state(){return this.#r.state}get rejectionReason(){return this.#r.rejectionReason}then(e,t){return this.#n(super.then(e,t))}catch(e){return this.#n(super.catch(e))}finally(e){return this.#n(super.finally(e))}#n(e){return Object.defineProperties(e,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})}},Re={serviceWorker:{url:"/mockServiceWorker.js",options:null},quiet:!1,waitUntilReady:!0,onUnhandledRequest:"warn",findWorker:(e,t)=>e===t};function xe(e,t,s){return[e.active,e.installing,e.waiting].filter(e=>null!=e).find(e=>s(e.scriptURL,t))||null}var Le=async(e,t={},s)=>{const r=new URL(e,location.href).href;const n=await navigator.serviceWorker.getRegistrations().then(e=>e.filter(e=>xe(e,r,s)));!navigator.serviceWorker.controller&&n.length>0&&location.reload();const[o]=n;if(o)return o.update(),[xe(o,r,s),o];const[i,a]=await async function(e){try{return[null,await e().catch(e=>{throw e})]}catch(t){return[t,null]}}(async()=>{const n=await navigator.serviceWorker.register(e,t);return[xe(n,r,s),n]});if(i){if(i.message.includes("(404)")){const e=new URL(t?.scope||"/",location.href);throw new Error(f.formatMessage(`Failed to register a Service Worker for scope ('${e.href}') with script ('${r}'): Service Worker script does not exist at the given path.\n\nDid you forget to run "npx msw init <PUBLIC_DIR>"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`))}throw new Error(f.formatMessage("Failed to register the Service Worker:\n\n%s",i.message))}return a};function Te(e={}){if(e.quiet)return;e.message;e.workerUrl,e.workerScope,e.client}function Ce(e){if(!["HEAD","GET"].includes(e.method))return e.body}function Pe(e){return new Request(e.url,{...e,body:Ce(e)})}function Oe(){return"undefined"!=typeof navigator&&"serviceWorker"in navigator&&"undefined"!=typeof location&&"file:"!==location.protocol}var Ie=function(){try{const e=new ReadableStream({start:e=>e.close()});return(new MessageChannel).port1.postMessage(e,[e]),!0}catch{return!1}}(),je=(e,t)=>async s=>{if(!e.isMockingEnabled&&e.workerStoppedAt&&s.data.interceptedAt>e.workerStoppedAt)return void s.postMessage("PASSTHROUGH");const r=s.data.id,n=Pe(s.data),o=n.clone(),i=n.clone();v.cache.set(n,i);try{await U(n,r,e.getRequestHandlers().filter(H("RequestHandler")),t,e.emitter,{onPassthroughResponse(){s.postMessage("PASSTHROUGH")},async onMockedResponse(r,{handler:n,parsedResult:i}){const a=r.clone(),c=r.clone(),l=function(e){return{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())}}(r);if(Ie){const e=r.body;s.postMessage("MOCK_RESPONSE",{...l,body:e},e?[e]:void 0)}else{const e=null===r.body?null:await a.arrayBuffer();s.postMessage("MOCK_RESPONSE",{...l,body:e})}t.quiet||e.emitter.once("response:mocked",()=>{n.log({request:o,response:c,parsedResult:i})})}})}catch(a){a instanceof Error&&(f.error('Uncaught exception in the request handler for "%s %s":\n\n%s\n\nThis exception has been gracefully handled as a 500 response, however, it\'s strongly recommended to resolve this error, as it indicates a mistake in your code. If you wish to mock an error response, please see this guide: https://mswjs.io/docs/http/mocking-responses/error-responses',n.method,n.url,a.stack??a),s.postMessage("MOCK_RESPONSE",{status:500,statusText:"Request Handler Error",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,message:a.message,stack:a.stack})}))}};var Ae=new TextEncoder;var Me=Object.defineProperty,Ne={};function We(e){return`[33m${e}[0m`}function De(e){return`[34m${e}[0m`}function Ue(e){return`[90m${e}[0m`}function He(e){return`[31m${e}[0m`}function _e(e){return`[32m${e}[0m`}((e,t)=>{for(var s in t)Me(e,s,{get:t[s],enumerable:!0})})(Ne,{blue:()=>De,gray:()=>Ue,green:()=>_e,red:()=>He,yellow:()=>We});var $e=ke(),Ge=class{constructor(e){this.name=e,this.prefix=`[${this.name}]`;const t=Je("DEBUG"),s=Je("LOG_LEVEL");"1"===t||"true"===t||void 0!==t&&this.name.startsWith(t)?(this.debug=Ve(s,"debug")?Fe:this.debug,this.info=Ve(s,"info")?Fe:this.info,this.success=Ve(s,"success")?Fe:this.success,this.warning=Ve(s,"warning")?Fe:this.warning,this.error=Ve(s,"error")?Fe:this.error):(this.info=Fe,this.success=Fe,this.warning=Fe,this.error=Fe,this.only=Fe)}prefix;extend(e){return new Ge(`${this.name}:${e}`)}debug(e,...t){this.logEntry({level:"debug",message:Ue(e),positionals:t,prefix:this.prefix,colors:{prefix:"gray"}})}info(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:this.prefix,colors:{prefix:"blue"}});const s=new Be;return(e,...t)=>{s.measure(),this.logEntry({level:"info",message:`${e} ${Ue(`${s.deltaTime}ms`)}`,positionals:t,prefix:this.prefix,colors:{prefix:"blue"}})}}success(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:`âœ” ${this.prefix}`,colors:{timestamp:"green",prefix:"green"}})}warning(e,...t){this.logEntry({level:"warning",message:e,positionals:t,prefix:`âš  ${this.prefix}`,colors:{timestamp:"yellow",prefix:"yellow"}})}error(e,...t){this.logEntry({level:"error",message:e,positionals:t,prefix:`âœ– ${this.prefix}`,colors:{timestamp:"red",prefix:"red"}})}only(e){e()}createEntry(e,t){return{timestamp:new Date,level:e,message:t}}logEntry(e){const{level:t,message:s,prefix:r,colors:n,positionals:o=[]}=e,i=this.createEntry(t,s),a={timestamp:Ne[n?.timestamp||"gray"],prefix:Ne[n?.prefix||"gray"]};this.getWriter(t)([a.timestamp(this.formatTimestamp(i.timestamp))].concat(null!=r?a.prefix(r):[]).concat(Ye(s)).join(" "),...o.map(Ye))}formatTimestamp(e){return`${e.toLocaleTimeString("en-GB")}:${e.getMilliseconds()}`}getWriter(e){switch(e){case"debug":case"success":case"info":return ze;case"warning":return Xe;case"error":return Ke}}},Be=class{startTime;endTime;deltaTime;constructor(){this.startTime=performance.now()}measure(){this.endTime=performance.now();const e=this.endTime-this.startTime;this.deltaTime=e.toFixed(2)}},Fe=()=>{};function ze(e,...t){$e&&process.stdout.write(we(e,...t)+"\n")}function Xe(e,...t){$e&&process.stderr.write(we(e,...t)+"\n")}function Ke(e,...t){$e&&process.stderr.write(we(e,...t)+"\n")}function Je(e){return $e?ve[e]:globalThis[e]?.toString()}function Ve(e,t){return void 0!==e&&e!==t}function Ye(e){return void 0===e?"undefined":null===e?"null":"string"==typeof e?e:"object"==typeof e?JSON.stringify(e):e.toString()}var Qe=class extends Error{constructor(e,t,s){super(`Possible EventEmitter memory leak detected. ${s} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=t,this.count=s,this.name="MaxListenersExceededWarning"}},Ze=class{static listenerCount(e,t){return e.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=Ze.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,t,s){this.emit(e,t,s)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,t){const s=e.indexOf(t);return s>-1&&e.splice(s,1),[]}_wrapOnceListener(e,t){const s=(...r)=>(this.removeListener(e,s),t.apply(this,r));return Object.defineProperty(s,"name",{value:t.name}),s}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...t){const s=this._getListeners(e);return s.forEach(e=>{e.apply(this,t)}),s.length>0}addListener(e,t){this._emitInternalEvent("newListener",e,t);const s=this._getListeners(e).concat(t);if(this.events.set(e,s),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;new Qe(this,e,this.listenerCount(e))}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,this._wrapOnceListener(e,t))}prependListener(e,t){const s=this._getListeners(e);if(s.length>0){const r=[t].concat(s);this.events.set(e,r)}else this.events.set(e,s.concat(t));return this}prependOnceListener(e,t){return this.prependListener(e,this._wrapOnceListener(e,t))}removeListener(e,t){const s=this._getListeners(e);return s.length>0&&(this._removeListener(s,t),this.events.set(e,s),this._emitInternalEvent("removeListener",e,t)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},et=Ze;et.defaultMaxListeners=10;var tt=(e,t,s)=>(((e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)})(e,t,"read from private field"),s?s.call(e):t.get(e));function st(e){return globalThis[e]||void 0}var rt=class{constructor(e){this.symbol=e,this.readyState="INACTIVE",this.emitter=new et,this.subscriptions=[],this.logger=new Ge(e.description),this.emitter.setMaxListeners(0),this.logger.info("constructing the interceptor...")}checkEnvironment(){return!0}apply(){const e=this.logger.extend("apply");if(e.info("applying the interceptor..."),"APPLIED"===this.readyState)return void e.info("intercepted already applied!");if(!this.checkEnvironment())return void e.info("the interceptor cannot be applied in this environment!");this.readyState="APPLYING";const t=this.getInstance();if(t)return e.info("found a running instance, reusing..."),this.on=(s,r)=>(e.info('proxying the "%s" listener',s),t.emitter.addListener(s,r),this.subscriptions.push(()=>{t.emitter.removeListener(s,r),e.info('removed proxied "%s" listener!',s)}),this),void(this.readyState="APPLIED");e.info("no running instance found, setting up a new instance..."),this.setup(),this.setInstance(),this.readyState="APPLIED"}setup(){}on(e,t){const s=this.logger.extend("on");return"DISPOSING"===this.readyState||"DISPOSED"===this.readyState?(s.info("cannot listen to events, already disposed!"),this):(s.info('adding "%s" event listener:',e,t),this.emitter.on(e,t),this)}once(e,t){return this.emitter.once(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}dispose(){const e=this.logger.extend("dispose");if("DISPOSED"!==this.readyState)if(e.info("disposing the interceptor..."),this.readyState="DISPOSING",this.getInstance()){if(this.clearInstance(),e.info("global symbol deleted:",st(this.symbol)),this.subscriptions.length>0){e.info("disposing of %d subscriptions...",this.subscriptions.length);for(const e of this.subscriptions)e();this.subscriptions=[],e.info("disposed of all subscriptions!",this.subscriptions.length)}this.emitter.removeAllListeners(),e.info("destroyed the listener!"),this.readyState="DISPOSED"}else e.info("no interceptors running, skipping dispose...");else e.info("cannot dispose, already disposed!")}getInstance(){var e;const t=st(this.symbol);return this.logger.info("retrieved global instance:",null==(e=null==t?void 0:t.constructor)?void 0:e.name),t}setInstance(){var e,t;e=this.symbol,t=this,globalThis[e]=t,this.logger.info("set global instance!",this.symbol.description)}clearInstance(){var e;e=this.symbol,delete globalThis[e],this.logger.info("cleared global instance!",this.symbol.description)}};function nt(){return Math.random().toString(16).slice(2)}var ot,it,at=Symbol("isPatchedModule"),ct=class extends Error{constructor(e){super(e),this.name="InterceptorError",Object.setPrototypeOf(this,ct.prototype)}},lt=class{constructor(e,t){this.request=e,this.source=t,((e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)})(this,ot),this.readyState=lt.PENDING,this.handled=new qe}async passthrough(){Se.as(ct,this.readyState===lt.PENDING,'Failed to passthrough the "%s %s" request: the request has already been handled',this.request.method,this.request.url),this.readyState=lt.PASSTHROUGH,await this.source.passthrough(),tt(this,ot,it).resolve()}respondWith(e){Se.as(ct,this.readyState===lt.PENDING,'Failed to respond to the "%s %s" request with "%d %s": the request has already been handled (%d)',this.request.method,this.request.url,e.status,e.statusText||"OK",this.readyState),this.readyState=lt.RESPONSE,tt(this,ot,it).resolve(),this.source.respondWith(e)}errorWith(e){Se.as(ct,this.readyState===lt.PENDING,'Failed to error the "%s %s" request with "%s": the request has already been handled (%d)',this.request.method,this.request.url,null==e?void 0:e.toString(),this.readyState),this.readyState=lt.ERROR,this.source.errorWith(e),tt(this,ot,it).resolve()}},ut=lt;function ht(e){try{return new URL(e),!0}catch(t){return!1}}function dt(e,t){const s=Object.getOwnPropertySymbols(t).find(t=>t.description===e);if(s)return Reflect.get(t,s)}ot=new WeakSet,it=function(){return this.handled},ut.PENDING=0,ut.PASSTHROUGH=1,ut.RESPONSE=2,ut.ERROR=3;var pt=class extends Response{static isConfigurableStatusCode(e){return e>=200&&e<=599}static isRedirectResponse(e){return pt.STATUS_CODES_WITH_REDIRECT.includes(e)}static isResponseWithBody(e){return!pt.STATUS_CODES_WITHOUT_BODY.includes(e)}static setUrl(e,t){if(!e||"about:"===e||!ht(e))return;const s=dt("state",t);s?s.urlList.push(new URL(e)):Object.defineProperty(t,"url",{value:e,enumerable:!0,configurable:!0,writable:!1})}static parseRawHeaders(e){const t=new Headers;for(let s=0;s<e.length;s+=2)t.append(e[s],e[s+1]);return t}constructor(e,t={}){var s;const r=null!=(s=t.status)?s:200,n=pt.isConfigurableStatusCode(r)?r:200;if(super(pt.isResponseWithBody(r)?e:null,{status:n,statusText:t.statusText,headers:t.headers}),r!==n){const e=dt("state",this);e?e.status=r:Object.defineProperty(this,"status",{value:r,enumerable:!0,configurable:!0,writable:!1})}pt.setUrl(t.url,this)}},ft=pt;ft.STATUS_CODES_WITHOUT_BODY=[101,103,204,205,304],ft.STATUS_CODES_WITH_REDIRECT=[301,302,303,307,308];var gt=Symbol("kRawRequest");function mt(e,t){Reflect.set(e,gt,t)}var yt=class extends rt{constructor(e){yt.symbol=Symbol(e.name),super(yt.symbol),this.interceptors=e.interceptors}setup(){const e=this.logger.extend("setup");e.info("applying all %d interceptors...",this.interceptors.length);for(const t of this.interceptors)e.info('applying "%s" interceptor...',t.constructor.name),t.apply(),e.info("adding interceptor dispose subscription"),this.subscriptions.push(()=>t.dispose())}on(e,t){for(const s of this.interceptors)s.on(e,t);return this}once(e,t){for(const s of this.interceptors)s.once(e,t);return this}off(e,t){for(const s of this.interceptors)s.off(e,t);return this}removeAllListeners(e){for(const t of this.interceptors)t.removeAllListeners(e);return this}};var vt=e=>function(t,s){const r=(async()=>{e.workerChannel.removeAllListeners(),e.workerChannel.on("REQUEST",je(e,t)),e.workerChannel.on("RESPONSE",function(e){return t=>{const s=t.data,r=Pe(s.request);if(s.response.type?.includes("opaque"))return;const n=0===s.response.status?Response.error():new ft(ft.isResponseWithBody(s.response.status)?s.response.body:null,{...s.response,url:r.url});e.emitter.emit(s.isMockedResponse?"response:mocked":"response:bypass",{requestId:s.request.id,request:r,response:n})}}(e));const r=await Le(t.serviceWorker.url,t.serviceWorker.options,t.findWorker),[n,o]=r;if(!n){const e=s?.findWorker?f.formatMessage('Failed to locate the Service Worker registration using a custom "findWorker" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at "%s".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n',t.serviceWorker.url):f.formatMessage('Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL "%s" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom "serviceWorker.url" option to point to the actual worker script location, or a custom "findWorker" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start',t.serviceWorker.url,location.host);throw new Error(e)}return e.workerPromise.resolve(n),e.registration=o,window.addEventListener("beforeunload",()=>{"redundant"!==n.state&&e.workerChannel.postMessage("CLIENT_CLOSED"),window.clearInterval(e.keepAliveInterval),window.postMessage({type:"msw/worker:stop"})}),await function(e){const t=new qe;return e.workerChannel.postMessage("INTEGRITY_CHECK_REQUEST"),e.workerChannel.once("INTEGRITY_CHECK_RESPONSE",e=>{const{checksum:s,packageVersion:r}=e.data;"4db4a41e972cec1b64cc569c66952d82"!==s&&f.warn(`The currently registered Service Worker has been generated by a different version of MSW (${r}) and may not be fully compatible with the installed version.\n\nIt's recommended you update your worker script by running this command:\n\n  â€¢ npx msw init <PUBLIC_DIR>\n\nYou can also automate this process and make the worker script update automatically upon the library installations. Read more: https://mswjs.io/docs/cli/init.`),t.resolve()}),t}(e).catch(e=>{f.error("Error while checking the worker script integrity. Please report this on GitHub (https://github.com/mswjs/msw/issues) and include the original error below.")}),e.keepAliveInterval=window.setInterval(()=>e.workerChannel.postMessage("KEEPALIVE_REQUEST"),5e3),function(e,t){t?.quiet||location.href.startsWith(e.scope)||f.warn(`Cannot intercept requests on this page because it's outside of the worker's scope ("${e.scope}"). If you wish to mock API requests on this page, you must resolve this scope issue.\n\n- (Recommended) Register the worker at the root level ("/") of your application.\n- Set the "Service-Worker-Allowed" response header to allow out-of-scope workers.`)}(o,e.startOptions),o})().then(async s=>{const r=s.installing||s.waiting;if(r){const e=new qe;r.addEventListener("statechange",()=>{"activated"===r.state&&e.resolve()}),await e}return await function(e,t){const s=new qe;return e.workerChannel.postMessage("MOCK_ACTIVATE"),e.workerChannel.once("MOCKING_ENABLED",async r=>{e.isMockingEnabled=!0;const n=await e.workerPromise;Te({quiet:t.quiet,workerScope:e.registration?.scope,workerUrl:n.scriptURL,client:r.data.client}),s.resolve(!0)}),s}(e,t).catch(e=>{throw f.error("Failed to enable mocking. Please report this on GitHub (https://github.com/mswjs/msw/issues) and include the original error below."),e}),s});return r},bt=Symbol("kDefaultPrevented"),wt=Symbol("kPropagationStopped"),Et=Symbol("kImmediatePropagationStopped"),St=class extends MessageEvent{#o;[bt];[wt];[Et];constructor(...e){super(e[0],e[1]),this[bt]=!1}get defaultPrevented(){return this[bt]}preventDefault(){super.preventDefault(),this[bt]=!0}stopImmediatePropagation(){super.stopImmediatePropagation(),this[Et]=!0}},kt=Symbol("kListenerOptions"),qt=class{#i;constructor(){this.#i={}}on(e,t,s){return this.#a(e,t,s)}once(e,t,s){return this.on(e,t,{...s||{},once:!0})}earlyOn(e,t,s){return this.#a(e,t,s,"prepend")}earlyOnce(e,t,s){return this.earlyOn(e,t,{...s||{},once:!0})}emit(e){if(0===this.listenerCount(e.type))return!1;const t=this.#c(e);for(const s of this.#i[e.type]){if(null!=t.event[wt]&&t.event[wt]!==this)return!1;if(t.event[Et])break;this.#l(t.event,s)}return t.revoke(),!0}async emitAsPromise(e){if(0===this.listenerCount(e.type))return[];const t=[],s=this.#c(e);for(const r of this.#i[e.type]){if(null!=s.event[wt]&&s.event[wt]!==this)return[];if(s.event[Et])break;t.push(await Promise.resolve(this.#l(s.event,r)))}return s.revoke(),Promise.allSettled(t).then(e=>e.map(e=>"fulfilled"===e.status?e.value:e.reason))}*emitAsGenerator(e){if(0===this.listenerCount(e.type))return;const t=this.#c(e);for(const s of this.#i[e.type]){if(null!=t.event[wt]&&t.event[wt]!==this)return;if(t.event[Et])break;yield this.#l(t.event,s)}t.revoke()}removeListener(e,t){if(0===this.listenerCount(e))return;const s=[];for(const r of this.#i[e])r!==t&&s.push(r);this.#i[e]=s}removeAllListeners(e){null!=e?this.#i[e]=[]:this.#i={}}listeners(e){return null==e?Object.values(this.#i).flat():this.#i[e]||[]}listenerCount(e){return this.listeners(e).length}#a(e,t,s,r="append"){return this.#i[e]??=[],"prepend"===r?this.#i[e].unshift(t):this.#i[e].push(t),s&&(Object.defineProperty(t,kt,{value:s,enumerable:!1,writable:!1}),s.signal&&s.signal.addEventListener("abort",()=>{this.removeListener(e,t)},{once:!0})),this}#c(e){const{stopPropagation:t}=e;return e.stopPropagation=new Proxy(e.stopPropagation,{apply:(t,s,r)=>(e[wt]=this,Reflect.apply(t,s,r))}),{event:e,revoke(){e.stopPropagation=t}}}#l(e,t){const s=t.call(this,e);return t[kt]?.once&&this.removeListener(e.type,t),s}},Rt=Oe(),xt=class extends St{#u;constructor(e){super(e.data.type,{data:e.data.payload}),this.#u=e}get ports(){return this.#u.ports}postMessage(e,...t){this.#u.ports[0].postMessage({type:e,data:t[0]},{transfer:t[1]})}},Lt=class extends qt{constructor(e){super(),this.options=e,Rt&&navigator.serviceWorker.addEventListener("message",async e=>{const t=await this.options.worker;null!=e.source&&e.source!==t||e.data&&d(e.data)&&"type"in e.data&&this.emit(new xt(e))})}postMessage(e){Se(Rt,"Failed to post message on a WorkerChannel: the Service Worker API is unavailable in this context. This is likely an issue with MSW. Please report it on GitHub: https://github.com/mswjs/msw/issues"),this.options.worker.then(t=>{t.postMessage(e)})}};async function Tt(e,t,...s){const r=e.listeners(t);if(0!==r.length)for(const n of r)await n.apply(e,s)}function Ct(e){const t=Object.getOwnPropertyDescriptor(globalThis,e);return void 0!==t&&(("function"!=typeof t.get||void 0!==t.get())&&((void 0!==t.get||null!=t.value)&&!(void 0===t.set&&!t.configurable)))}var Pt=async e=>{try{return{error:null,data:await e().catch(e=>{throw e})}}catch(t){return{error:t,data:null}}};function Ot(e,t=!1){return t?Object.prototype.toString.call(e).startsWith("[object "):"[object Object]"===Object.prototype.toString.call(e)}function It(e,t){try{return e[t],!0}catch(s){return!1}}function jt(e){return null!=e&&e instanceof Response&&It(e,"type")&&"error"===e.type}async function At(e){const t=async t=>{return t instanceof Error?(await e.controller.errorWith(t),!0):jt(t)?(await e.controller.respondWith(t),!0):Ot(s=t,!0)&&It(s,"status")&&It(s,"statusText")&&It(s,"bodyUsed")?(await e.controller.respondWith(t),!0):!!Ot(t)&&(await e.controller.errorWith(t),!0);var s},s=async s=>{if(s instanceof ct)throw n.error;return function(e){return null!=e&&e instanceof Error&&"code"in e&&"errno"in e}(s)?(await e.controller.errorWith(s),!0):s instanceof Response&&await t(s)},r=new qe;if(e.request.signal){if(e.request.signal.aborted)return void(await e.controller.errorWith(e.request.signal.reason));e.request.signal.addEventListener("abort",()=>{r.reject(e.request.signal.reason)},{once:!0})}const n=await Pt(async()=>{const t=Tt(e.emitter,"request",{requestId:e.requestId,request:e.request,controller:e.controller});await Promise.race([r,t,e.controller.handled])});if("rejected"!==r.state){var o;if(!n.error)return e.controller.readyState===ut.PENDING?await e.controller.passthrough():e.controller.handled;if(await s(n.error))return;if(e.emitter.listenerCount("unhandledException")>0){const s=new ut(e.request,{passthrough(){},async respondWith(e){await t(e)},async errorWith(t){await e.controller.errorWith(t)}});if(await Tt(e.emitter,"unhandledException",{error:n.error,request:e.request,requestId:e.requestId,controller:s}),s.readyState!==ut.PENDING)return}await e.controller.respondWith((o=n.error,new Response(JSON.stringify(o instanceof Error?{name:o.name,message:o.message,stack:o.stack}:o),{status:500,statusText:"Unhandled Exception",headers:{"Content-Type":"application/json"}})))}else await e.controller.errorWith(r.rejectionReason)}function Mt(e){return Object.assign(new TypeError("Failed to fetch"),{cause:e})}var Nt=["content-encoding","content-language","content-location","content-type","content-length"],Wt=Symbol("kRedirectCount");function Dt(e,t){return e.origin===t.origin&&"null"===e.origin||e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port}var Ut=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(e)}})}},Ht=class extends TransformStream{constructor(e,...t){super({},...t);const s=[super.readable,...e].reduce((e,t)=>e.pipeThrough(t));Object.defineProperty(this,"readable",{get:()=>s})}};function _t(e){if(null===e.body)return null;const t=function(e){if(""===e)return null;const t=function(e){return e.toLowerCase().split(",").map(e=>e.trim())}(e);if(0===t.length)return null;const s=t.reduceRight((e,t)=>"gzip"===t||"x-gzip"===t?e.concat(new DecompressionStream("gzip")):"deflate"===t?e.concat(new DecompressionStream("deflate")):"br"===t?e.concat(new Ut):(e.length=0,e),[]);return new Ht(s)}(e.headers.get("content-encoding")||"");return t?(e.body.pipeTo(t.writable),t.readable):null}var $t=class extends rt{constructor(){super($t.symbol)}checkEnvironment(){return Ct("fetch")}async setup(){const e=globalThis.fetch;Se(!e[at],'Failed to patch the "fetch" module: already patched.'),globalThis.fetch=async(t,s)=>{const r=nt(),n="string"!=typeof t||"undefined"==typeof location||ht(t)?t:new URL(t,location.href),o=new Request(n,s);t instanceof Request&&mt(o,t);const i=new qe,a=new ut(o,{passthrough:async()=>{this.logger.info("request has not been handled, passthrough...");const t=o.clone(),{error:s,data:n}=await Pt(()=>e(o));if(s)return i.reject(s);if(this.logger.info("original fetch performed",n),this.emitter.listenerCount("response")>0){this.logger.info('emitting the "response" event...');const e=n.clone();await Tt(this.emitter,"response",{response:e,isMockedResponse:!1,request:t,requestId:r})}i.resolve(n)},respondWith:async e=>{if(jt(e))return this.logger.info("request has errored!",{response:e}),void i.reject(Mt(e));this.logger.info("received mocked response!",{rawResponse:e});const t=_t(e),s=null===t?e:new ft(t,e);if(ft.setUrl(o.url,s),ft.isRedirectResponse(s.status)){if("error"===o.redirect)return void i.reject(Mt("unexpected redirect"));if("follow"===o.redirect)return void async function(e,t){if(303!==t.status&&null!=e.body)return Promise.reject(Mt());const s=new URL(e.url);let r;try{r=new URL(t.headers.get("location"),e.url)}catch(i){return Promise.reject(Mt(i))}if("http:"!==r.protocol&&"https:"!==r.protocol)return Promise.reject(Mt("URL scheme must be a HTTP(S) scheme"));if(Reflect.get(e,Wt)>20)return Promise.reject(Mt("redirect count exceeded"));if(Object.defineProperty(e,Wt,{value:(Reflect.get(e,Wt)||0)+1}),"cors"===e.mode&&(r.username||r.password)&&!Dt(s,r))return Promise.reject(Mt('cross origin not allowed for request mode "cors"'));const n={};([301,302].includes(t.status)&&"POST"===e.method||303===t.status&&!["HEAD","GET"].includes(e.method))&&(n.method="GET",n.body=null,Nt.forEach(t=>{e.headers.delete(t)})),Dt(s,r)||(e.headers.delete("authorization"),e.headers.delete("proxy-authorization"),e.headers.delete("cookie"),e.headers.delete("host")),n.headers=e.headers;const o=await fetch(new Request(r,n));return Object.defineProperty(o,"redirected",{value:!0,configurable:!0}),o}(o,s).then(e=>{i.resolve(e)},e=>{i.reject(e)})}this.emitter.listenerCount("response")>0&&(this.logger.info('emitting the "response" event...'),await Tt(this.emitter,"response",{response:s.clone(),isMockedResponse:!0,request:o,requestId:r})),i.resolve(s)},errorWith:e=>{this.logger.info("request has been aborted!",{reason:e}),i.reject(e)}});return this.logger.info("[%s] %s",o.method,o.url),this.logger.info("awaiting for the mocked response..."),this.logger.info('emitting the "request" event for %s listener(s)...',this.emitter.listenerCount("request")),await At({request:o,requestId:r,emitter:this.emitter,controller:a}),i},Object.defineProperty(globalThis.fetch,at,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis.fetch,at,{value:void 0}),globalThis.fetch=e,this.logger.info('restored native "globalThis.fetch"!',globalThis.fetch.name)})}},Gt=$t;Gt.symbol=Symbol("fetch");var Bt=class{constructor(e,t){this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.type="",this.srcElement=null,this.currentTarget=null,this.eventPhase=0,this.isTrusted=!0,this.composed=!1,this.cancelable=!0,this.defaultPrevented=!1,this.bubbles=!0,this.lengthComputable=!0,this.loaded=0,this.total=0,this.cancelBubble=!1,this.returnValue=!0,this.type=e,this.target=(null==t?void 0:t.target)||null,this.currentTarget=(null==t?void 0:t.currentTarget)||null,this.timeStamp=Date.now()}composedPath(){return[]}initEvent(e,t,s){this.type=e,this.bubbles=!!t,this.cancelable=!!s}preventDefault(){this.defaultPrevented=!0}stopPropagation(){}stopImmediatePropagation(){}},Ft=class extends Bt{constructor(e,t){super(e),this.lengthComputable=(null==t?void 0:t.lengthComputable)||!1,this.composed=(null==t?void 0:t.composed)||!1,this.loaded=(null==t?void 0:t.loaded)||0,this.total=(null==t?void 0:t.total)||0}},zt="undefined"!=typeof ProgressEvent;function Xt(e,t){if(!(t in e))return null;if(Object.prototype.hasOwnProperty.call(e,t))return e;const s=Reflect.getPrototypeOf(e);return s?Xt(s,t):null}function Kt(e,t){const s=new Proxy(e,function(e){const{constructorCall:t,methodCall:s,getProperty:r,setProperty:n}=e,o={};void 0!==t&&(o.construct=function(e,s,r){const n=Reflect.construct.bind(null,e,s,r);return t.call(r,s,n)});return o.set=function(e,t,s){const r=()=>{const r=Xt(e,t)||e,n=Reflect.getOwnPropertyDescriptor(r,t);return void 0!==(null==n?void 0:n.set)?(n.set.apply(e,[s]),!0):Reflect.defineProperty(r,t,{writable:!0,enumerable:!0,configurable:!0,value:s})};return void 0!==n?n.call(e,[t,s],r):r()},o.get=function(e,t,n){const o=()=>e[t],i=void 0!==r?r.call(e,[t,n],o):o();return"function"==typeof i?(...r)=>{const n=i.bind(e,...r);return void 0!==s?s.call(e,[t,r],n):n()}:i},o}(t));return s}function Jt(e){const t=new Headers,s=e.split(/[\r\n]+/);for(const r of s){if(""===r.trim())continue;const[e,...s]=r.split(": "),n=s.join(": ");t.append(e,n)}return t}async function Vt(e){const t=e.headers.get("content-length");if(null!=t&&""!==t)return Number(t);return(await e.arrayBuffer()).byteLength}var Yt=Symbol("kIsRequestHandled"),Qt=ke(),Zt=Symbol("kFetchRequest"),es=class{constructor(e,t){this.initialRequest=e,this.logger=t,this.method="GET",this.url=null,this[Yt]=!1,this.events=new Map,this.uploadEvents=new Map,this.requestId=nt(),this.requestHeaders=new Headers,this.responseBuffer=new Uint8Array,this.request=Kt(e,{setProperty:([e,t],s)=>{if("ontimeout"===e){const r=e.slice(2);return this.request.addEventListener(r,t),s()}return s()},methodCall:([e,t],s)=>{switch(e){case"open":{const[e,r]=t;return void 0===r?(this.method="GET",this.url=ts(e)):(this.method=e,this.url=ts(r)),this.logger=this.logger.extend(`${this.method} ${this.url.href}`),this.logger.info("open",this.method,this.url.href),s()}case"addEventListener":{const[e,r]=t;return this.registerEvent(e,r),this.logger.info("addEventListener",e,r),s()}case"setRequestHeader":{const[e,r]=t;return this.requestHeaders.set(e,r),this.logger.info("setRequestHeader",e,r),s()}case"send":{const[e]=t;this.request.addEventListener("load",()=>{if(void 0!==this.onResponse){const e=function(e,t){const s=ft.isResponseWithBody(e.status)?t:null;return new ft(s,{url:e.responseURL,status:e.status,statusText:e.statusText,headers:Jt(e.getAllResponseHeaders())})}(this.request,this.request.response);this.onResponse.call(this,{response:e,isMockedResponse:this[Yt],request:o,requestId:this.requestId})}});const n="string"==typeof e?(r=e,Ae.encode(r)):e,o=this.toFetchApiRequest(n);this[Zt]=o.clone(),queueMicrotask(()=>{var e;((null==(e=this.onRequest)?void 0:e.call(this,{request:o,requestId:this.requestId}))||Promise.resolve()).finally(()=>{if(!this[Yt])return this.logger.info("request callback settled but request has not been handled (readystate %d), performing as-is...",this.request.readyState),Qt&&this.request.setRequestHeader("x-interceptors-internal-request-id",this.requestId),s()})});break}default:return s()}var r}}),ss(this.request,"upload",Kt(this.request.upload,{setProperty:([e,t],s)=>{switch(e){case"onloadstart":case"onprogress":case"onaboart":case"onerror":case"onload":case"ontimeout":case"onloadend":{const s=e.slice(2);this.registerUploadEvent(s,t)}}return s()},methodCall:([e,t],s)=>{if("addEventListener"===e){const[e,r]=t;return this.registerUploadEvent(e,r),this.logger.info("upload.addEventListener",e,r),s()}}}))}registerEvent(e,t){const s=(this.events.get(e)||[]).concat(t);this.events.set(e,s),this.logger.info('registered event "%s"',e,t)}registerUploadEvent(e,t){const s=(this.uploadEvents.get(e)||[]).concat(t);this.uploadEvents.set(e,s),this.logger.info('registered upload event "%s"',e,t)}async respondWith(e){if(this[Yt]=!0,this[Zt]){const e=await Vt(this[Zt]);this.trigger("loadstart",this.request.upload,{loaded:0,total:e}),this.trigger("progress",this.request.upload,{loaded:e,total:e}),this.trigger("load",this.request.upload,{loaded:e,total:e}),this.trigger("loadend",this.request.upload,{loaded:e,total:e})}this.logger.info("responding with a mocked response: %d %s",e.status,e.statusText),ss(this.request,"status",e.status),ss(this.request,"statusText",e.statusText),ss(this.request,"responseURL",this.url.href),this.request.getResponseHeader=new Proxy(this.request.getResponseHeader,{apply:(t,s,r)=>{if(this.logger.info("getResponseHeader",r[0]),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning null"),null;const n=e.headers.get(r[0]);return this.logger.info('resolved response header "%s" to',r[0],n),n}}),this.request.getAllResponseHeaders=new Proxy(this.request.getAllResponseHeaders,{apply:()=>{if(this.logger.info("getAllResponseHeaders"),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning empty string"),"";const t=Array.from(e.headers.entries()).map(([e,t])=>`${e}: ${t}`).join("\r\n");return this.logger.info("resolved all response headers to",t),t}}),Object.defineProperties(this.request,{response:{enumerable:!0,configurable:!1,get:()=>this.response},responseText:{enumerable:!0,configurable:!1,get:()=>this.responseText},responseXML:{enumerable:!0,configurable:!1,get:()=>this.responseXML}});const t=await Vt(e.clone());this.logger.info("calculated response body length",t),this.trigger("loadstart",this.request,{loaded:0,total:t}),this.setReadyState(this.request.HEADERS_RECEIVED),this.setReadyState(this.request.LOADING);const s=()=>{this.logger.info("finalizing the mocked response..."),this.setReadyState(this.request.DONE),this.trigger("load",this.request,{loaded:this.responseBuffer.byteLength,total:t}),this.trigger("loadend",this.request,{loaded:this.responseBuffer.byteLength,total:t})};if(e.body){this.logger.info("mocked response has body, streaming...");const r=e.body.getReader(),n=async()=>{const{value:e,done:o}=await r.read();if(o)return this.logger.info("response body stream done!"),void s();e&&(this.logger.info("read response body chunk:",e),this.responseBuffer=function(e,t){const s=new Uint8Array(e.byteLength+t.byteLength);return s.set(e,0),s.set(t,e.byteLength),s}(this.responseBuffer,e),this.trigger("progress",this.request,{loaded:this.responseBuffer.byteLength,total:t})),n()};n()}else s()}responseBufferToText(){return e=this.responseBuffer,new TextDecoder(t).decode(e);var e,t}get response(){if(this.logger.info("getResponse (responseType: %s)",this.request.responseType),this.request.readyState!==this.request.DONE)return null;switch(this.request.responseType){case"json":{const e=function(e){try{return JSON.parse(e)}catch(t){return null}}(this.responseBufferToText());return this.logger.info("resolved response JSON",e),e}case"arraybuffer":{const t=(e=this.responseBuffer).buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return this.logger.info("resolved response ArrayBuffer",t),t}case"blob":{const e=this.request.getResponseHeader("Content-Type")||"text/plain",t=new Blob([this.responseBufferToText()],{type:e});return this.logger.info("resolved response Blob (mime type: %s)",t,e),t}default:{const e=this.responseBufferToText();return this.logger.info('resolving "%s" response type as text',this.request.responseType,e),e}}var e}get responseText(){if(Se(""===this.request.responseType||"text"===this.request.responseType,"InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.LOADING&&this.request.readyState!==this.request.DONE)return"";const e=this.responseBufferToText();return this.logger.info('getResponseText: "%s"',e),e}get responseXML(){if(Se(""===this.request.responseType||"document"===this.request.responseType,"InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.DONE)return null;const e=this.request.getResponseHeader("Content-Type")||"";return"undefined"==typeof DOMParser?null:(t=e,["application/xhtml+xml","application/xml","image/svg+xml","text/html","text/xml"].some(e=>t.startsWith(e))?(new DOMParser).parseFromString(this.responseBufferToText(),e):null);var t}errorWith(e){this[Yt]=!0,this.logger.info("responding with an error"),this.setReadyState(this.request.DONE),this.trigger("error",this.request),this.trigger("loadend",this.request)}setReadyState(e){this.logger.info("setReadyState: %d -> %d",this.request.readyState,e),this.request.readyState!==e?(ss(this.request,"readyState",e),this.logger.info("set readyState to: %d",e),e!==this.request.UNSENT&&(this.logger.info('triggering "readystatechange" event...'),this.trigger("readystatechange",this.request))):this.logger.info("ready state identical, skipping transition...")}trigger(e,t,s){const r=t[`on${e}`],n=function(e,t,s){const r=zt?ProgressEvent:Ft;return["error","progress","loadstart","loadend","load","timeout","abort"].includes(t)?new r(t,{lengthComputable:!0,loaded:(null==s?void 0:s.loaded)||0,total:(null==s?void 0:s.total)||0}):new Bt(t,{target:e,currentTarget:e})}(t,e,s);this.logger.info('trigger "%s"',e,s||""),"function"==typeof r&&(this.logger.info('found a direct "%s" callback, calling...',e),r.call(t,n));const o=t instanceof XMLHttpRequestUpload?this.uploadEvents:this.events;for(const[i,a]of o)i===e&&(this.logger.info('found %d listener(s) for "%s" event, calling...',a.length,e),a.forEach(e=>e.call(t,n)))}toFetchApiRequest(e){this.logger.info("converting request to a Fetch API Request...");const t=e instanceof Document?e.documentElement.innerText:e,s=new Request(this.url.href,{method:this.method,headers:this.requestHeaders,credentials:this.request.withCredentials?"include":"same-origin",body:["GET","HEAD"].includes(this.method.toUpperCase())?null:t});return ss(s,"headers",Kt(s.headers,{methodCall:([e,t],s)=>{switch(e){case"append":case"set":{const[e,s]=t;this.request.setRequestHeader(e,s);break}case"delete":{const[e]=t;break}}return s()}})),mt(s,this.request),this.logger.info("converted request to a Fetch API Request!",s),s}};function ts(e){return"undefined"==typeof location?new URL(e):new URL(e.toString(),location.href)}function ss(e,t,s){Reflect.defineProperty(e,t,{writable:!0,enumerable:!0,value:s})}var rs=class extends rt{constructor(){super(rs.interceptorSymbol)}checkEnvironment(){return Ct("XMLHttpRequest")}setup(){const e=this.logger.extend("setup");e.info('patching "XMLHttpRequest" module...');const t=globalThis.XMLHttpRequest;Se(!t[at],'Failed to patch the "XMLHttpRequest" module: already patched.'),globalThis.XMLHttpRequest=function({emitter:e,logger:t}){const s=new Proxy(globalThis.XMLHttpRequest,{construct(s,r,n){t.info("constructed new XMLHttpRequest");const o=Reflect.construct(s,r,n),i=Object.getOwnPropertyDescriptors(s.prototype);for(const e in i)Reflect.defineProperty(o,e,i[e]);const a=new es(o,t);return a.onRequest=async function({request:t,requestId:s}){const r=new ut(t,{passthrough:()=>{this.logger.info("no mocked response received, performing request as-is...")},respondWith:async e=>{jt(e)?this.errorWith(new TypeError("Network error")):await this.respondWith(e)},errorWith:e=>{this.logger.info("request errored!",{error:e}),e instanceof Error&&this.errorWith(e)}});this.logger.info("awaiting mocked response..."),this.logger.info('emitting the "request" event for %s listener(s)...',e.listenerCount("request")),await At({request:t,requestId:s,controller:r,emitter:e})},a.onResponse=async function({response:t,isMockedResponse:s,request:r,requestId:n}){this.logger.info('emitting the "response" event for %s listener(s)...',e.listenerCount("response")),e.emit("response",{response:t,isMockedResponse:s,request:r,requestId:n})},a.request}});return s}({emitter:this.emitter,logger:this.logger}),e.info('native "XMLHttpRequest" module patched!',globalThis.XMLHttpRequest.name),Object.defineProperty(globalThis.XMLHttpRequest,at,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis.XMLHttpRequest,at,{value:void 0}),globalThis.XMLHttpRequest=t,e.info('native "XMLHttpRequest" module restored!',globalThis.XMLHttpRequest.name)})}},ns=rs;ns.interceptorSymbol=Symbol("xhr");var os=class extends G{context;constructor(...e){super(...e),Se(!ke(),f.formatMessage("Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.")),this.context=this.createWorkerContext()}createWorkerContext(){const e=new qe;return{isMockingEnabled:!1,startOptions:null,workerPromise:e,registration:void 0,getRequestHandlers:()=>this.handlersController.currentHandlers(),emitter:this.emitter,workerChannel:new Lt({worker:e})}}async start(e={}){if("waitUntilReady"in e&&f.warn('The "waitUntilReady" option has been deprecated. Please remove it from this "worker.start()" call. Follow the recommended Browser integration (https://mswjs.io/docs/integrations/browser) to eliminate any race conditions between the Service Worker registration and any requests made by your application on initial render.'),this.context.isMockingEnabled)return f.warn('Found a redundant "worker.start()" call. Note that starting the worker while mocking is already enabled will have no effect. Consider removing this "worker.start()" call.'),this.context.registration;if(this.context.workerStoppedAt=void 0,this.context.startOptions=p(Re,e),function(e){pe.on("connection",async t=>{const s=e.getHandlers().filter(H("EventHandler"));if(s.length>0)return e?.onMockedConnection(t),void(await Promise.all(s.map(e=>e.run(t))));const r=new Request(t.client.url,{headers:{upgrade:"websocket",connection:"upgrade"}});await w(r,e.getUnhandledRequestStrategy()).catch(e=>{const s=new Event("error");Object.defineProperty(s,"cause",{enumerable:!0,configurable:!1,value:e}),t.client.socket.dispatchEvent(s)}),e?.onPassthroughConnection(t),t.server.connect()})}({getUnhandledRequestStrategy:()=>this.context.startOptions.onUnhandledRequest,getHandlers:()=>this.handlersController.currentHandlers(),onMockedConnection:e=>{this.context.startOptions.quiet||ye(e)},onPassthroughConnection(){}}),pe.apply(),this.subscriptions.push(()=>{pe.dispose()}),!Oe()){const e=function(e,t){const s=new yt({name:"fallback",interceptors:[new Gt,new ns]});return s.on("request",async({request:s,requestId:r,controller:n})=>{const o=s.clone(),i=await U(s,r,e.getRequestHandlers().filter(H("RequestHandler")),t,e.emitter,{onMockedResponse(s,{handler:r,parsedResult:n}){t.quiet||e.emitter.once("response:mocked",({response:e})=>{r.log({request:o,response:e,parsedResult:n})})}});i&&n.respondWith(i)}),s.on("response",({response:t,isMockedResponse:s,request:r,requestId:n})=>{e.emitter.emit(s?"response:mocked":"response:bypass",{response:t,request:r,requestId:n})}),s.apply(),s}(this.context,this.context.startOptions);return this.subscriptions.push(()=>{e.dispose()}),this.context.isMockingEnabled=!0,void Te({message:"Mocking enabled (fallback mode).",quiet:this.context.startOptions.quiet})}const t=vt(this.context),s=await t(this.context.startOptions,e);return this.context.isMockingEnabled=!0,s}stop(){super.dispose(),this.context.isMockingEnabled?(this.context.isMockingEnabled=!1,this.context.workerStoppedAt=Date.now(),this.context.emitter.removeAllListeners(),Oe()&&(this.context.workerChannel.removeAllListeners("RESPONSE"),window.clearInterval(this.context.keepAliveInterval)),window.postMessage({type:"msw/worker:stop"}),function(e={}){e.quiet}({quiet:this.context.startOptions?.quiet})):f.warn('Found a redundant "worker.stop()" call. Notice that stopping the worker after it has already been stopped has no effect. Consider removing this "worker.stop()" call.')}};function is(...e){return new os(...e)}const{message:as}=M;function cs(e,t){const s=Object.getOwnPropertySymbols(t).find(t=>t.description===e);if(s)return Reflect.get(t,s)}new TextEncoder;var ls=class extends Response{static isConfigurableStatusCode(e){return e>=200&&e<=599}static isRedirectResponse(e){return ls.STATUS_CODES_WITH_REDIRECT.includes(e)}static isResponseWithBody(e){return!ls.STATUS_CODES_WITHOUT_BODY.includes(e)}static setUrl(e,t){if(!e||"about:"===e||!function(e){try{return new URL(e),!0}catch(t){return!1}}(e))return;const s=cs("state",t);s?s.urlList.push(new URL(e)):Object.defineProperty(t,"url",{value:e,enumerable:!0,configurable:!0,writable:!1})}static parseRawHeaders(e){const t=new Headers;for(let s=0;s<e.length;s+=2)t.append(e[s],e[s+1]);return t}constructor(e,t={}){var s;const r=null!=(s=t.status)?s:200,n=ls.isConfigurableStatusCode(r)?r:200;if(super(ls.isResponseWithBody(r)?e:null,{status:n,statusText:t.statusText,headers:t.headers}),r!==n){const e=cs("state",this);e?e.status=r:Object.defineProperty(this,"status",{value:r,enumerable:!0,configurable:!0,writable:!1})}ls.setUrl(t.url,this)}},us=ls;us.STATUS_CODES_WITHOUT_BODY=[101,103,204,205,304],us.STATUS_CODES_WITH_REDIRECT=[301,302,303,307,308];const hs=/[?|#].*$/g;function ds(e){return e.endsWith("?")?e:e.replace(hs,"")}function ps(e,t){if(e instanceof RegExp)return e;const s=function(e,t){if(/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e))return e;if(e.startsWith("*"))return e;const s=t||"undefined"!=typeof location&&location.href;return s?decodeURI(new URL(encodeURI(e),s).href):e}(e,t);return ds(s)}function fs(e,t,s){const r=ps(t,s),n="string"==typeof r?function(e){return e.replace(/([:a-zA-Z_-]*)(\*{1,2})+/g,(e,t,s)=>{const r="(.*)";return t?t.startsWith(":")?`${t}${s}`:`${t}${r}`:r}).replace(/([^/])(:)(?=\d+)/,"$1\\$2").replace(/^([^/]+)(:)(?=\/\/)/,"$1\\$2")}(r):r,o=function(e,t=!0){return[t&&e.origin,e.pathname].filter(Boolean).join("")}(e),i=h(n,{decode:decodeURIComponent})(o);return{matches:!1!==i,params:i&&i.params||{}}}var gs=Object.create,ms=Object.defineProperty,ys=Object.getOwnPropertyDescriptor,vs=Object.getOwnPropertyNames,bs=Object.getPrototypeOf,ws=Object.prototype.hasOwnProperty,Es=((e,t)=>function(){return t||(0,e[vs(e)[0]])((t={exports:{}}).exports,t),t.exports})({"node_modules/.pnpm/cookie@1.0.2/node_modules/cookie/dist/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parse=function(e,t){const s=new i,r=e.length;if(r<2)return s;const n=t?.decode||l;let o=0;do{const t=e.indexOf("=",o);if(-1===t)break;const i=e.indexOf(";",o),l=-1===i?r:i;if(t>l){o=e.lastIndexOf(";",t-1)+1;continue}const u=a(e,o,t),h=c(e,t,u),d=e.slice(u,h);if(void 0===s[d]){let r=a(e,t+1,l),o=c(e,l,r);const i=n(e.slice(r,o));s[d]=i}o=l+1}while(o<r);return s},e.serialize=function(e,i,a){const c=a?.encode||encodeURIComponent;if(!t.test(e))throw new TypeError(`argument name is invalid: ${e}`);const l=c(i);if(!s.test(l))throw new TypeError(`argument val is invalid: ${i}`);let u=e+"="+l;if(!a)return u;if(void 0!==a.maxAge){if(!Number.isInteger(a.maxAge))throw new TypeError(`option maxAge is invalid: ${a.maxAge}`);u+="; Max-Age="+a.maxAge}if(a.domain){if(!r.test(a.domain))throw new TypeError(`option domain is invalid: ${a.domain}`);u+="; Domain="+a.domain}if(a.path){if(!n.test(a.path))throw new TypeError(`option path is invalid: ${a.path}`);u+="; Path="+a.path}if(a.expires){if(!function(e){return"[object Date]"===o.call(e)}(a.expires)||!Number.isFinite(a.expires.valueOf()))throw new TypeError(`option expires is invalid: ${a.expires}`);u+="; Expires="+a.expires.toUTCString()}a.httpOnly&&(u+="; HttpOnly");a.secure&&(u+="; Secure");a.partitioned&&(u+="; Partitioned");if(a.priority){switch("string"==typeof a.priority?a.priority.toLowerCase():void 0){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${a.priority}`)}}if(a.sameSite){switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${a.sameSite}`)}}return u};var t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,s=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,i=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function a(e,t,s){do{const s=e.charCodeAt(t);if(32!==s&&9!==s)return t}while(++t<s);return s}function c(e,t,s){for(;t>s;){const s=e.charCodeAt(--t);if(32!==s&&9!==s)return t+1}return s}function l(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}}}),Ss=((e,t,s)=>(s=null!=e?gs(bs(e)):{},((e,t,s,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of vs(t))ws.call(e,n)||n===s||ms(e,n,{get:()=>t[n],enumerable:!(r=ys(t,n))||r.enumerable});return e})(ms(s,"default",{value:e,enumerable:!0}),e)))(Es()),ks=Ss.default||Ss,qs=ks.parse,Rs=ks.serialize;function xs(e){const t=qs(e),s={};for(const r in t)void 0!==t[r]&&(s[r]=t[r]);return s}function Ls(){return xs(document.cookie)}function Ts(e){const t=e.headers.get("cookie"),s=t?xs(t):{},r=function(e){if("undefined"==typeof document||"undefined"==typeof location)return{};switch(e.credentials){case"same-origin":{const t=new URL(e.url);return location.origin===t.origin?Ls():{}}case"include":return Ls();default:return{}}}(e);for(const i in r)e.headers.append("cookie",Rs(i,r[i]));const n=E.getCookies(e.url),o=Object.fromEntries(n.map(e=>[e.key,e.value]));for(const i of n)e.headers.append("cookie",i.toString());return{...r,...o,...s}}var Cs=(e=>(e.HEAD="HEAD",e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.OPTIONS="OPTIONS",e.DELETE="DELETE",e))(Cs||{});class Ps extends v{constructor(e,t,s,r){const n="function"==typeof t?"[custom predicate]":t;super({info:{header:`${e}${n?` ${n}`:""}`,path:t,method:e},resolver:s,options:r}),this.checkRedundantQueryParameters()}checkRedundantQueryParameters(){const{method:e,path:t}=this.info;if(!t||t instanceof RegExp||"function"==typeof t)return;ds(t)!==t&&f.warn(`Found a redundant usage of query parameters in the request handler URL for "${e} ${t}". Please match against a path instead and access query parameters using "new URL(request.url).searchParams" instead. Learn more: https://mswjs.io/docs/http/intercepting-requests#querysearch-parameters`)}async parse(e){const t=new URL(e.request.url),s=Ts(e.request);if("function"==typeof this.info.path){const t=await this.info.path({request:e.request,cookies:s});return{match:"boolean"==typeof t?{matches:t,params:{}}:t,cookies:s}}return{match:this.info.path?fs(t,this.info.path,e.resolutionContext?.baseUrl):{matches:!1,params:{}},cookies:s}}async predicate(e){const t=this.matchMethod(e.request.method),s=e.parsedResult.match.matches;return t&&s}matchMethod(e){return this.info.method instanceof RegExp?this.info.method.test(e):(t=this.info.method,s=e,t.toLowerCase()===s.toLowerCase());var t,s}extendResolverArgs(e){return{params:e.parsedResult.match?.params||{},cookies:e.parsedResult.cookies}}async log(e){b(e.request.url),await async function(e){const t=e.clone(),s=await t.text();return{url:new URL(e.url),method:e.method,headers:Object.fromEntries(e.headers.entries()),body:s}}(e.request);const t=await async function(e){const t=e.clone(),s=await t.text(),r=t.status||200;return{status:r,statusText:t.statusText||as[r]||"OK",headers:Object.fromEntries(t.headers.entries()),body:s}}(e.response);s=t.status;var s}}function Os(e){return(t,s,r={})=>new Ps(e,t,s,r)}const Is={all:Os(/.+/),head:Os(Cs.HEAD),get:Os(Cs.GET),post:Os(Cs.POST),put:Os(Cs.PUT),delete:Os(Cs.DELETE),patch:Os(Cs.PATCH),options:Os(Cs.OPTIONS)},js=Symbol("bodyType");class As extends us{[js]=null;constructor(e,t){const s=D(t);super(e,s),function(e,t){t.type&&Object.defineProperty(e,"type",{value:t.type,enumerable:!0,writable:!1});const s=t.headers.get("set-cookie");if(s&&(Object.defineProperty(e,W,{value:s,enumerable:!1,writable:!1}),"undefined"!=typeof document)){const e=i.prototype.getSetCookie.call(t.headers);for(const t of e)document.cookie=t}}(this,s)}static error(){return super.error()}static text(e,t){const s=D(t);return s.headers.has("Content-Type")||s.headers.set("Content-Type","text/plain"),s.headers.has("Content-Length")||s.headers.set("Content-Length",e?new Blob([e]).size.toString():"0"),new As(e,s)}static json(e,t){const s=D(t);s.headers.has("Content-Type")||s.headers.set("Content-Type","application/json");const r=JSON.stringify(e);return s.headers.has("Content-Length")||s.headers.set("Content-Length",r?new Blob([r]).size.toString():"0"),new As(r,s)}static xml(e,t){const s=D(t);return s.headers.has("Content-Type")||s.headers.set("Content-Type","text/xml"),new As(e,s)}static html(e,t){const s=D(t);return s.headers.has("Content-Type")||s.headers.set("Content-Type","text/html"),new As(e,s)}static arrayBuffer(e,t){const s=D(t);return s.headers.has("Content-Type")||s.headers.set("Content-Type","application/octet-stream"),e&&!s.headers.has("Content-Length")&&s.headers.set("Content-Length",e.byteLength.toString()),new As(e,s)}static formData(e,t){return new As(e,D(t))}}s("undefined"!=typeof URL,f.formatMessage('Global "URL" class is not defined. This likely means that you\'re running MSW in an environment that doesn\'t support all Node.js standard API (e.g. React Native). If that\'s the case, please use an appropriate polyfill for the "URL" class, like "react-native-url-polyfill".'));export{As as H,Is as h,is as s};
